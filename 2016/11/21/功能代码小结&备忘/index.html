<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="iOS åŠŸèƒ½ä»£ç ," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="æ€»ä»¥ä¸ºå†™è¿‡çš„ä»£ç ä»¥åç”¨åˆ°å³ä½¿è®°ä¸èµ·æ¥Googleä¸€ä¸‹ï¼Œå¤§ä¸äº†ç¿»ä¸€ä¸‹ä»£ç å°±å¥½ï¼Œä½†æ˜¯æ€»æ˜¯è¦ç”¨åˆ°çš„æ—¶å€™æ‰¾æ¥æ‰¾å»è¿˜æ˜¯å·¨çƒ¦ğŸ˜‚ğŸ˜‚ğŸ˜‚ã€‚ç»ˆäºä¸‹å®šå†³å¿ƒæ•´ç†æˆè‡ªå·±çš„ï¼Œèƒ½æœ€å¿«é€Ÿåº¦çš„æ‰¾åˆ°å¹¶å®ç°ï¼Œæé«˜æ•ˆç‡ã€‚ä½•ä¹è€Œä¸ä¸ºå‘¢ï¼Ÿ GO!GO!GO!  å–æ¶ˆtableViewå¤´éƒ¨å’Œåº•éƒ¨æ‚¬æµ®æ•ˆæœ è·å–éšæœºæ•° å»é™¤tableViewåˆ†ç»„å¤´éƒ¨å¤šä½™é—´è· å›¾ç‰‡æˆªå– æ¨¡ç³Šå›¾ç‰‡ è·å–æ–‡ä»¶å¤§å° æ‰‹æœºå·éªŒè¯ é‚®ç®±éªŒè¯ ç½‘å€éªŒè¯ JSONè½¬å­—å…¸">
<meta name="keywords" content="iOS åŠŸèƒ½ä»£ç ">
<meta property="og:type" content="article">
<meta property="og:title" content="åŠŸèƒ½ä»£ç å°ç»“&amp;å¤‡å¿˜">
<meta property="og:url" content="http://dupengfei.com/2016/11/21/åŠŸèƒ½ä»£ç å°ç»“&å¤‡å¿˜/index.html">
<meta property="og:site_name" content="æœé¹é£çš„åšå®¢">
<meta property="og:description" content="æ€»ä»¥ä¸ºå†™è¿‡çš„ä»£ç ä»¥åç”¨åˆ°å³ä½¿è®°ä¸èµ·æ¥Googleä¸€ä¸‹ï¼Œå¤§ä¸äº†ç¿»ä¸€ä¸‹ä»£ç å°±å¥½ï¼Œä½†æ˜¯æ€»æ˜¯è¦ç”¨åˆ°çš„æ—¶å€™æ‰¾æ¥æ‰¾å»è¿˜æ˜¯å·¨çƒ¦ğŸ˜‚ğŸ˜‚ğŸ˜‚ã€‚ç»ˆäºä¸‹å®šå†³å¿ƒæ•´ç†æˆè‡ªå·±çš„ï¼Œèƒ½æœ€å¿«é€Ÿåº¦çš„æ‰¾åˆ°å¹¶å®ç°ï¼Œæé«˜æ•ˆç‡ã€‚ä½•ä¹è€Œä¸ä¸ºå‘¢ï¼Ÿ GO!GO!GO!  å–æ¶ˆtableViewå¤´éƒ¨å’Œåº•éƒ¨æ‚¬æµ®æ•ˆæœ è·å–éšæœºæ•° å»é™¤tableViewåˆ†ç»„å¤´éƒ¨å¤šä½™é—´è· å›¾ç‰‡æˆªå– æ¨¡ç³Šå›¾ç‰‡ è·å–æ–‡ä»¶å¤§å° æ‰‹æœºå·éªŒè¯ é‚®ç®±éªŒè¯ ç½‘å€éªŒè¯ JSONè½¬å­—å…¸">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2020-12-31T10:28:29.899Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="åŠŸèƒ½ä»£ç å°ç»“&amp;å¤‡å¿˜">
<meta name="twitter:description" content="æ€»ä»¥ä¸ºå†™è¿‡çš„ä»£ç ä»¥åç”¨åˆ°å³ä½¿è®°ä¸èµ·æ¥Googleä¸€ä¸‹ï¼Œå¤§ä¸äº†ç¿»ä¸€ä¸‹ä»£ç å°±å¥½ï¼Œä½†æ˜¯æ€»æ˜¯è¦ç”¨åˆ°çš„æ—¶å€™æ‰¾æ¥æ‰¾å»è¿˜æ˜¯å·¨çƒ¦ğŸ˜‚ğŸ˜‚ğŸ˜‚ã€‚ç»ˆäºä¸‹å®šå†³å¿ƒæ•´ç†æˆè‡ªå·±çš„ï¼Œèƒ½æœ€å¿«é€Ÿåº¦çš„æ‰¾åˆ°å¹¶å®ç°ï¼Œæé«˜æ•ˆç‡ã€‚ä½•ä¹è€Œä¸ä¸ºå‘¢ï¼Ÿ GO!GO!GO!  å–æ¶ˆtableViewå¤´éƒ¨å’Œåº•éƒ¨æ‚¬æµ®æ•ˆæœ è·å–éšæœºæ•° å»é™¤tableViewåˆ†ç»„å¤´éƒ¨å¤šä½™é—´è· å›¾ç‰‡æˆªå– æ¨¡ç³Šå›¾ç‰‡ è·å–æ–‡ä»¶å¤§å° æ‰‹æœºå·éªŒè¯ é‚®ç®±éªŒè¯ ç½‘å€éªŒè¯ JSONè½¬å­—å…¸">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://dupengfei.com/2016/11/21/åŠŸèƒ½ä»£ç å°ç»“&å¤‡å¿˜/"/>





  <title> åŠŸèƒ½ä»£ç å°ç»“&å¤‡å¿˜ | æœé¹é£çš„åšå®¢ </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?b627bfa0d9d39ca04a7102b636415274";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">æœé¹é£çš„åšå®¢</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">è®°å½•ä¸€äº›ï¼Œåˆ†äº«ä¸€äº›ï¼Œæ¬¢è¿äº¤æµ</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://dupengfei.com/2016/11/21/åŠŸèƒ½ä»£ç å°ç»“&å¤‡å¿˜/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æœé¹é£">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æœé¹é£çš„åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                åŠŸèƒ½ä»£ç å°ç»“&å¤‡å¿˜
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2016-11-21T02:11:42+08:00">
                2016-11-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/11/21/åŠŸèƒ½ä»£ç å°ç»“&å¤‡å¿˜/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/11/21/åŠŸèƒ½ä»£ç å°ç»“&å¤‡å¿˜/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>æ€»ä»¥ä¸ºå†™è¿‡çš„ä»£ç ä»¥åç”¨åˆ°å³ä½¿è®°ä¸èµ·æ¥Googleä¸€ä¸‹ï¼Œå¤§ä¸äº†ç¿»ä¸€ä¸‹ä»£ç å°±å¥½ï¼Œä½†æ˜¯æ€»æ˜¯è¦ç”¨åˆ°çš„æ—¶å€™æ‰¾æ¥æ‰¾å»è¿˜æ˜¯å·¨çƒ¦ğŸ˜‚ğŸ˜‚ğŸ˜‚ã€‚ç»ˆäºä¸‹å®šå†³å¿ƒæ•´ç†æˆè‡ªå·±çš„ï¼Œèƒ½æœ€å¿«é€Ÿåº¦çš„æ‰¾åˆ°å¹¶å®ç°ï¼Œæé«˜æ•ˆç‡ã€‚ä½•ä¹è€Œä¸ä¸ºå‘¢ï¼Ÿ</p>
<p>GO!GO!GO!</p>
<ol>
<li>å–æ¶ˆtableViewå¤´éƒ¨å’Œåº•éƒ¨æ‚¬æµ®æ•ˆæœ</li>
<li>è·å–éšæœºæ•°</li>
<li>å»é™¤tableViewåˆ†ç»„å¤´éƒ¨å¤šä½™é—´è·</li>
<li>å›¾ç‰‡æˆªå–</li>
<li>æ¨¡ç³Šå›¾ç‰‡</li>
<li>è·å–æ–‡ä»¶å¤§å°</li>
<li>æ‰‹æœºå·éªŒè¯</li>
<li>é‚®ç®±éªŒè¯</li>
<li>ç½‘å€éªŒè¯</li>
<li>JSONè½¬å­—å…¸</li>
<li>iPhoneè®¾å¤‡ç±»å‹åˆ¤æ–­</li>
<li>iPhoneç³»ç»Ÿç‰ˆæœ¬åˆ¤æ–­</li>
<li>æ—¥å¿—æ‰“å°</li>
<li>é¢œè‰²è·å–</li>
<li>å¼±å¼•ç”¨</li>
<li>è·å–å±å¹•å°ºå¯¸</li>
<li>è·å–viewçš„æ§åˆ¶</li>
<li>å­—å…¸é˜²å´©æºƒ</li>
<li>æ•°ç»„é˜²å´©æºƒ</li>
<li>æœ¬æ–‡è¾“å…¥é”™è¯¯æç¤º</li>
<li>è·å–å½“å‰æ—¶é—´</li>
<li>è·å–å½“å‰ç‰ˆæœ¬</li>
<li>tabBarçº¢ç‚¹æ˜¾ç¤º</li>
<li>Logæ—¥å¿—.m</li>
<li>MD5åŠ å¯†</li>
<li>æŒ‰é’®èƒŒæ™¯é¢œè‰²</li>
<li>åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©º</li>
<li>é”®ç›˜é€€å‡ºä¸éšè—é€šçŸ¥</li>
<li>è·å–è®¾å¤‡å”¯ä¸€ID</li>
<li>MOVè½¬Mp4</li>
<li>ä¸Šä¼ å›¾ç‰‡</li>
<li>ä¸Šä¼ è§†é¢‘</li>
<li>è·å–è§†é¢‘å¸§å›¾</li>
<li>å‹ç¼©å¹¶å¯¼å‡ºè§†é¢‘</li>
<li>ä¿å­˜è§†é¢‘åˆ°ç›¸å†Œ</li>
<li>è·å–å½“å‰æœ€é¡¶å±‚çš„ViewController</li>
<li>æ•°ç»„æ‹†åˆ†</li>
<li>å›¾ç‰‡å‹ç¼©</li>
<li>é‡Šæ”¾timerå®</li>
<li>è·å–æŸä¸ªviewæ‰€åœ¨çš„æ§åˆ¶å™¨</li>
<li>ä¸¤ç§æ–¹æ³•åˆ é™¤NSUserDefaultsæ‰€æœ‰è®°å½•</li>
<li>æ‰“å°ç³»ç»Ÿæ‰€æœ‰å·²æ³¨å†Œçš„å­—ä½“åç§°</li>
<li>è·å–å›¾ç‰‡æŸä¸€ç‚¹çš„é¢œè‰²</li>
<li>å­—ç¬¦ä¸²åè½¬</li>
<li>ç¦æ­¢é”å±ï¼Œ</li>
<li>æ¨¡æ€æ¨å‡ºé€æ˜ç•Œé¢</li>
<li>Xcodeè°ƒè¯•ä¸æ˜¾ç¤ºå†…å­˜å ç”¨</li>
<li>æ˜¾ç¤ºéšè—æ–‡ä»¶</li>
<li>iOSè·³è½¬åˆ°App Storeä¸‹è½½åº”ç”¨è¯„åˆ†</li>
<li>iOS è·å–æ±‰å­—çš„æ‹¼éŸ³</li>
<li>æ‰‹åŠ¨æ›´æ”¹iOSçŠ¶æ€æ çš„é¢œè‰²</li>
<li>åˆ¤æ–­å½“å‰ViewControlleræ˜¯pushè¿˜æ˜¯presentçš„æ–¹å¼æ˜¾ç¤ºçš„</li>
<li>è·å–å®é™…ä½¿ç”¨çš„LaunchImageå›¾ç‰‡</li>
<li>iOSåœ¨å½“å‰å±å¹•è·å–ç¬¬ä¸€å“åº”</li>
<li>åˆ¤æ–­viewæ˜¯ä¸æ˜¯æŒ‡å®šè§†å›¾çš„å­è§†å›¾</li>
<li>NSArray å¿«é€Ÿæ±‚æ€»å’Œ æœ€å¤§å€¼ æœ€å°å€¼ å’Œ å¹³å‡å€¼</li>
<li>ä¿®æ”¹UITextFieldä¸­Placeholderçš„æ–‡å­—é¢œè‰²</li>
<li>å…³äºNSDateFormatterçš„æ ¼å¼</li>
<li>è·å–ä¸€ä¸ªç±»çš„æ‰€æœ‰å­ç±»</li>
<li>ç›‘æµ‹IOSè®¾å¤‡æ˜¯å¦è®¾ç½®äº†ä»£ç†ï¼Œéœ€è¦CFNetwork.framework</li>
<li>é˜¿æ‹‰ä¼¯æ•°å­—è½¬ä¸­æ–‡æ ¼å¼</li>
<li>Base64ç¼–ç ä¸NSStringå¯¹è±¡æˆ–NSDataå¯¹è±¡çš„è½¬æ¢</li>
<li>å–æ¶ˆUICollectionViewçš„éšå¼åŠ¨ç”»</li>
<li>ä¸‹é¢å‡ ç§æ–¹æ³•éƒ½å¯ä»¥å¸®ä½ å»é™¤è¿™äº›åŠ¨ç”»</li>
<li>è®©Xcodeçš„æ§åˆ¶å°æ”¯æŒLLDBç±»å‹çš„æ‰“å°</li>
<li>CocoaPods pod install/pod updateæ›´æ–°æ…¢çš„é—®é¢˜</li>
<li>UIImage å ç”¨å†…å­˜å¤§å°</li>
<li>GCD timerå®šæ—¶å™¨</li>
<li>å›¾ç‰‡ä¸Šç»˜åˆ¶æ–‡å­— å†™ä¸€ä¸ªUIImageçš„category</li>
<li>æŸ¥æ‰¾ä¸€ä¸ªè§†å›¾çš„æ‰€æœ‰å­è§†å›¾</li>
<li>è®¡ç®—æ–‡ä»¶å¤§å°</li>
<li>UIViewè®¾ç½®éƒ¨åˆ†åœ†è§’</li>
<li>å–ä¸Šæ•´ä¸å–ä¸‹æ•´</li>
<li>è®¡ç®—å­—ç¬¦ä¸²å­—ç¬¦é•¿åº¦ï¼Œä¸€ä¸ªæ±‰å­—ç®—ä¸¤ä¸ªå­—ç¬¦</li>
<li>ç»™UIViewè®¾ç½®å›¾ç‰‡</li>
<li>é˜²æ­¢scrollViewæ‰‹åŠ¿è¦†ç›–ä¾§æ»‘æ‰‹åŠ¿</li>
<li>å­—ç¬¦ä¸²ä¸­æ˜¯å¦å«æœ‰ä¸­æ–‡</li>
<li>dispatch_groupçš„ä½¿ç”¨</li>
<li>UITextFieldæ¯å››ä½åŠ ä¸€ä¸ªç©ºæ ¼,å®ç°ä»£ç†</li>
<li>è·å–ç§æœ‰å±æ€§å’Œæˆå‘˜å˜é‡ #import</li>
<li>è·å–æ‰‹æœºå®‰è£…çš„åº”ç”¨</li>
<li>åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦åœ¨åŒä¸€å‘¨ å†™åœ¨NSDateçš„categoryé‡Œé¢</li>
<li>åº”ç”¨å†…æ‰“å¼€ç³»ç»Ÿè®¾ç½®ç•Œé¢</li>
<li>å¯é€‰å€¼å¦‚ä¸‹ï¼š</li>
<li>å±è”½è§¦å‘äº‹ä»¶ï¼Œ2ç§’åå–æ¶ˆå±è”½</li>
<li>åŠ¨ç”»æš‚åœå†å¼€å§‹</li>
<li>iOSä¸­æ•°å­—çš„æ ¼å¼åŒ–</li>
<li>å¦‚ä½•è·å–WebViewæ‰€æœ‰çš„å›¾ç‰‡åœ°å€ï¼Œ</li>
<li>è·å–åˆ°webviewçš„é«˜åº¦</li>
<li>navigationBarå˜ä¸ºçº¯é€æ˜</li>
<li>tabBaråŒç†</li>
<li>navigationBaræ ¹æ®æ»‘åŠ¨è·ç¦»çš„æ¸å˜è‰²å®ç°</li>
<li>iOS å¼€å‘ä¸­ä¸€äº›ç›¸å…³çš„è·¯å¾„</li>
<li>navigationItemçš„BarButtonItemå¦‚ä½•ç´§é å±å¹•å³è¾¹ç•Œæˆ–è€…å·¦è¾¹ç•Œï¼Ÿ</li>
<li>NSStringè¿›è¡ŒURLç¼–ç å’Œè§£ç </li>
<li>UIWebViewè®¾ç½®User-Agentã€‚</li>
<li>è·å–ç¡¬ç›˜æ€»å®¹é‡ä¸å¯ç”¨å®¹é‡:</li>
<li>è·å–UIColorçš„RGBAå€¼</li>
<li>ä¿®æ”¹textFieldçš„placeholderçš„å­—ä½“é¢œè‰²ã€å¤§å°</li>
<li>AFNç§»é™¤JSONä¸­çš„NSNull</li>
<li>ceil()å’Œfloor()</li>
<li>åœ¨webViewåŠ è½½å®Œçš„ä»£ç†æ–¹æ³•é‡Œé¢è¿™æ ·å†™ï¼š</li>
<li>NSDateFormatæœ€ä½³æ–¹å¼ï¼ˆstrptimeï¼‰</li>
<li>æ¯›ç»ç’ƒ</li>
<li>tableviewä¸‹æ‹‰åˆ·æ–°åœç•™ï¼ˆä¸æ»šåˆ°é¡¶éƒ¨ï¼‰ï¼Œ ç±»ä¼¼QQï¼Œå¾®ä¿¡æ‹‰å»å†å²æ¶ˆæ¯</li>
<li>KeyChainéšç§ä¿¡æ¯å­˜å‚¨ï¼ˆä¸»è¦æ˜¯å¯†ç ç±»ï¼‰</li>
<li>è‡ªå®šä¹‰åœ†è§’è£å‰ªï¼šææ€§èƒ½</li>
<li>éšè—tabbarä¸Šé¢çš„è™šçº¿</li>
<li>éšè—å¯¼èˆªæ ä¸‹é¢çš„è™šçº¿</li>
<li>ä¸¤ä¸ªèŒƒå›´çš„å¯Œæ–‡æœ¬</li>
<li>ä¿®æ”¹UIAlertController</li>
</ol>
<h2 id="1ï¼šå–æ¶ˆtableViewå¤´éƒ¨å’Œåº•éƒ¨æ‚¬æµ®æ•ˆæœ"><a href="#1ï¼šå–æ¶ˆtableViewå¤´éƒ¨å’Œåº•éƒ¨æ‚¬æµ®æ•ˆæœ" class="headerlink" title="1ï¼šå–æ¶ˆtableViewå¤´éƒ¨å’Œåº•éƒ¨æ‚¬æµ®æ•ˆæœ"></a>1ï¼šå–æ¶ˆtableViewå¤´éƒ¨å’Œåº•éƒ¨æ‚¬æµ®æ•ˆæœ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">- (void)scrollViewDidScroll:(UIScrollView *)scrollView &#123;  </span><br><span class="line">    CGFloat sectionHeaderHeight = 10; //è¿™é‡Œæ˜¯æˆ‘çš„headerViewå’ŒfooterViewçš„é«˜åº¦  </span><br><span class="line">    if (_tableView.contentOffset.y&lt;=sectionHeaderHeight&amp;&amp;_tableView.contentOffset.y&gt;=0) &#123;  </span><br><span class="line">        _tableView.contentInset = UIEdgeInsetsMake(-_tableView.contentOffset.y, 0, 0, 0);  </span><br><span class="line">    &#125; else if (_tableView.contentOffset.y&gt;=sectionHeaderHeight) &#123;  </span><br><span class="line">        _tableView.contentInset = UIEdgeInsetsMake(-sectionHeaderHeight, 0, 0, 0);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line">    -(void)scrollViewDidScroll:(UIScrollView *)scrollView &#123;</span><br><span class="line"></span><br><span class="line">    if (scrollView == self.tableView)</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">        UITableView *tableview = (UITableView *)scrollView;</span><br><span class="line"></span><br><span class="line">        CGFloat sectionHeaderHeight = 64;</span><br><span class="line"></span><br><span class="line">        CGFloat sectionFooterHeight = 120;</span><br><span class="line"></span><br><span class="line">        CGFloat offsetY = tableview.contentOffset.y;</span><br><span class="line"></span><br><span class="line">        if (offsetY &gt;= 0 &amp;&amp; offsetY &lt;= sectionHeaderHeight)</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            tableview.contentInset = UIEdgeInsetsMake(-offsetY, 0, -sectionFooterHeight, 0);</span><br><span class="line"></span><br><span class="line">        &#125;else if (offsetY &gt;= sectionHeaderHeight &amp;&amp; offsetY &lt;= tableview.contentSize.height - tableview.frame.size.height - sectionFooterHeight)</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            tableview.contentInset = UIEdgeInsetsMake(-sectionHeaderHeight, 0, -sectionFooterHeight, 0);</span><br><span class="line"></span><br><span class="line">        &#125;else if (offsetY &gt;= tableview.contentSize.height - tableview.frame.size.height - sectionFooterHeight &amp;&amp; offsetY &lt;= tableview.contentSize.height - tableview.frame.size.height)         &#123;</span><br><span class="line"></span><br><span class="line">            tableview.contentInset = UIEdgeInsetsMake(-offsetY, 0, -(tableview.contentSize.height - tableview.frame.size.height - sectionFooterHeight), 0);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2ï¼šè·å–éšæœºæ•°"><a href="#2ï¼šè·å–éšæœºæ•°" class="headerlink" title="2ï¼šè·å–éšæœºæ•°"></a>2ï¼šè·å–éšæœºæ•°</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//ç¬¬ä¸€ç§</span><br><span class="line">srand((unsigned)time(0)); //ä¸åŠ è¿™å¥æ¯æ¬¡äº§ç”Ÿçš„éšæœºæ•°ä¸å˜</span><br><span class="line">int i = rand() % 5;</span><br><span class="line">//ç¬¬äºŒç§</span><br><span class="line">srandom(time(0));</span><br><span class="line">int i = random() % 5;</span><br><span class="line">//ç¬¬ä¸‰ç§</span><br><span class="line">int i = arc4random() % 5 ;</span><br></pre></td></tr></table></figure>
<h2 id="3ï¼šå»é™¤tableViewåˆ†ç»„å¤´éƒ¨å¤šä½™é—´è·"><a href="#3ï¼šå»é™¤tableViewåˆ†ç»„å¤´éƒ¨å¤šä½™é—´è·" class="headerlink" title="3ï¼šå»é™¤tableViewåˆ†ç»„å¤´éƒ¨å¤šä½™é—´è·"></a>3ï¼šå»é™¤tableViewåˆ†ç»„å¤´éƒ¨å¤šä½™é—´è·</h2><h4 id="ä¸€ï¼š"><a href="#ä¸€ï¼š" class="headerlink" title="ä¸€ï¼š"></a>ä¸€ï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line"></span><br><span class="line">    self.tableView.tableHeaderView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 0, CGFLOAT_MIN)];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="äºŒï¼š"><a href="#äºŒï¼š" class="headerlink" title="äºŒï¼š"></a>äºŒï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewWillAppear:(BOOL)animated&#123;</span><br><span class="line"></span><br><span class="line">    [super viewWillAppear:animated];</span><br><span class="line"></span><br><span class="line">    CGRect frameH = self.tableView.tableHeaderView.frame;</span><br><span class="line">    frameH.size.height = 5;</span><br><span class="line">    UIView *headerView = [[UIView alloc] initWithFrame:frameH];</span><br><span class="line">    [self.tableView setTableHeaderView:headerView];</span><br><span class="line"></span><br><span class="line">    CGRect frameF = self.tableView.tableHeaderView.frame;</span><br><span class="line">    frameF.size.height = 1;</span><br><span class="line">    UIView *footerView = [[UIView alloc] initWithFrame:frameF];</span><br><span class="line">    [self.tableView setTableFooterView:footerView];</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æœ‰ä¸ªæœ‹å‹ç»™äº†ä¸€ä¸ªæ›´å¥½çš„æ–¹æ¡ˆ"><a href="#æœ‰ä¸ªæœ‹å‹ç»™äº†ä¸€ä¸ªæ›´å¥½çš„æ–¹æ¡ˆ" class="headerlink" title="æœ‰ä¸ªæœ‹å‹ç»™äº†ä¸€ä¸ªæ›´å¥½çš„æ–¹æ¡ˆ"></a>æœ‰ä¸ªæœ‹å‹ç»™äº†ä¸€ä¸ªæ›´å¥½çš„æ–¹æ¡ˆ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç›´æ¥è®¾ç½®å†…è¾¹è·ï¼ŒTableViewä¼šç›´æ¥æ ¹æ®å†…è¾¹è·è¿›è¡Œç›¸åº”çš„ç¼©è¿›ï¼</span><br></pre></td></tr></table></figure>
<h2 id="4ï¼šå›¾ç‰‡æˆªå–"><a href="#4ï¼šå›¾ç‰‡æˆªå–" class="headerlink" title="4ï¼šå›¾ç‰‡æˆªå–"></a>4ï¼šå›¾ç‰‡æˆªå–</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">CGSize itemSize = CGSizeMake(self.image.size.width, self.image.size.height);</span><br><span class="line"></span><br><span class="line">dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;</span><br><span class="line"></span><br><span class="line">    UIImage *dynamicCellImage = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:model.cover]]];</span><br><span class="line">            UIGraphicsBeginImageContextWithOptions(itemSize, NO, [UIScreen mainScreen].scale);</span><br><span class="line"></span><br><span class="line">            //å‹ç¼©å›¾ç‰‡</span><br><span class="line">            CGSize newSize;</span><br><span class="line">            CGImageRef imageRef = nil;</span><br><span class="line"></span><br><span class="line">            if ((dynamicCellImage.size.width / dynamicCellImage.size.height) &lt; (self.image.size.width / self.image.size.height)) &#123;</span><br><span class="line">                newSize.width = dynamicCellImage.size.width;</span><br><span class="line">                newSize.height = dynamicCellImage.size.width * self.image.size.height / self.image.size.width;</span><br><span class="line"></span><br><span class="line">                imageRef = CGImageCreateWithImageInRect([dynamicCellImage CGImage], CGRectMake(0, fabs(dynamicCellImage.size.height - newSize.height) / 2, newSize.width, newSize.height));</span><br><span class="line"></span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                newSize.height = dynamicCellImage.size.height;</span><br><span class="line">                newSize.width = dynamicCellImage.size.height * self.image.size.width / self.image.size.height;</span><br><span class="line"></span><br><span class="line">                imageRef = CGImageCreateWithImageInRect([dynamicCellImage CGImage], CGRectMake(fabs(dynamicCellImage.size.width - newSize.width) / 2, 0, newSize.width, newSize.height));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                self.image.image = [UIImage imageWithCGImage:imageRef];</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            UIGraphicsEndImageContext();</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="5ï¼šæ¨¡ç³Šå›¾ç‰‡"><a href="#5ï¼šæ¨¡ç³Šå›¾ç‰‡" class="headerlink" title="5ï¼šæ¨¡ç³Šå›¾ç‰‡"></a>5ï¼šæ¨¡ç³Šå›¾ç‰‡</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">//åŠ æ¨¡ç³Šæ•ˆæœï¼Œimageæ˜¯å›¾ç‰‡ï¼Œbluræ˜¯æ¨¡ç³Šåº¦</span><br><span class="line">+ (UIImage *)blurryImage:(UIImage *)image withBlurLevel:(CGFloat)blur &#123;</span><br><span class="line">    //æ¨¡ç³Šåº¦,</span><br><span class="line">    if ((blur &lt; 0.1f) || (blur &gt; 2.0f)) &#123;</span><br><span class="line">        blur = 0.5f;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //boxSizeå¿…é¡»å¤§äº0</span><br><span class="line">    int boxSize = (int)(blur * 100);</span><br><span class="line">    boxSize -= (boxSize % 2) + 1;</span><br><span class="line">//    iCocosLog(@&quot;boxSize:%i&quot;,boxSize);</span><br><span class="line">    //å›¾åƒå¤„ç†</span><br><span class="line">    CGImageRef img = image.CGImage;</span><br><span class="line"></span><br><span class="line">    //å›¾åƒç¼“å­˜,è¾“å…¥ç¼“å­˜ï¼Œè¾“å‡ºç¼“å­˜</span><br><span class="line">    vImage_Buffer inBuffer, outBuffer;</span><br><span class="line">    vImage_Error error;</span><br><span class="line">    //åƒç´ ç¼“å­˜</span><br><span class="line">    void *pixelBuffer;</span><br><span class="line"></span><br><span class="line">    //æ•°æ®æºæä¾›è€…ï¼ŒDefines an opaque type that supplies Quartz with data.</span><br><span class="line">    CGDataProviderRef inProvider = CGImageGetDataProvider(img);</span><br><span class="line">    // providerâ€™s data.</span><br><span class="line">    CFDataRef inBitmapData = CGDataProviderCopyData(inProvider);</span><br><span class="line"></span><br><span class="line">    //å®½ï¼Œé«˜ï¼Œå­—èŠ‚/è¡Œï¼Œdata</span><br><span class="line">    inBuffer.width = CGImageGetWidth(img);</span><br><span class="line">    inBuffer.height = CGImageGetHeight(img);</span><br><span class="line">    inBuffer.rowBytes = CGImageGetBytesPerRow(img);</span><br><span class="line">    inBuffer.data = (void*)CFDataGetBytePtr(inBitmapData);</span><br><span class="line"></span><br><span class="line">    //åƒæ•°ç¼“å­˜ï¼Œå­—èŠ‚è¡Œ*å›¾ç‰‡é«˜</span><br><span class="line">    pixelBuffer = malloc(CGImageGetBytesPerRow(img) * CGImageGetHeight(img));</span><br><span class="line"></span><br><span class="line">    outBuffer.data = pixelBuffer;</span><br><span class="line">    outBuffer.width = CGImageGetWidth(img);</span><br><span class="line">    outBuffer.height = CGImageGetHeight(img);</span><br><span class="line">    outBuffer.rowBytes = CGImageGetBytesPerRow(img);</span><br><span class="line"></span><br><span class="line">    // ç¬¬ä¸‰ä¸ªä¸­é—´çš„ç¼“å­˜åŒº,æŠ—é”¯é½¿çš„æ•ˆæœ</span><br><span class="line">    void *pixelBuffer2 = malloc(CGImageGetBytesPerRow(img) * CGImageGetHeight(img));</span><br><span class="line">    vImage_Buffer outBuffer2;</span><br><span class="line">    outBuffer2.data = pixelBuffer2;</span><br><span class="line">    outBuffer2.width = CGImageGetWidth(img);</span><br><span class="line">    outBuffer2.height = CGImageGetHeight(img);</span><br><span class="line">    outBuffer2.rowBytes = CGImageGetBytesPerRow(img);</span><br><span class="line"></span><br><span class="line">    //Convolves a region of interest within an ARGB8888 source image by an implicit M x N kernel that has the effect of a box filter.</span><br><span class="line">    error = vImageBoxConvolve_ARGB8888(&amp;inBuffer, &amp;outBuffer2, NULL, 0, 0, boxSize, boxSize, NULL, kvImageEdgeExtend);</span><br><span class="line">    error = vImageBoxConvolve_ARGB8888(&amp;outBuffer2, &amp;inBuffer, NULL, 0, 0, boxSize, boxSize, NULL, kvImageEdgeExtend);</span><br><span class="line">    error = vImageBoxConvolve_ARGB8888(&amp;inBuffer, &amp;outBuffer, NULL, 0, 0, boxSize, boxSize, NULL, kvImageEdgeExtend);</span><br><span class="line"></span><br><span class="line">    if (error) &#123;</span><br><span class="line">        iCocosLog(@&quot;error from convolution %ld&quot;, error);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //    iCocosLog(@&quot;å­—èŠ‚ç»„æˆéƒ¨åˆ†ï¼š%zu&quot;,CGImageGetBitsPerComponent(img));</span><br><span class="line">    //é¢œè‰²ç©ºé—´DeviceRGB</span><br><span class="line">    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();</span><br><span class="line">    //ç”¨å›¾ç‰‡åˆ›å»ºä¸Šä¸‹æ–‡,CGImageGetBitsPerComponent(img),7,8</span><br><span class="line">    CGContextRef ctx = CGBitmapContextCreate(</span><br><span class="line">                                             outBuffer.data,</span><br><span class="line">                                             outBuffer.width,</span><br><span class="line">                                             outBuffer.height,</span><br><span class="line">                                             8,</span><br><span class="line">                                             outBuffer.rowBytes,</span><br><span class="line">                                             colorSpace,</span><br><span class="line">                                             CGImageGetBitmapInfo(image.CGImage));</span><br><span class="line"></span><br><span class="line">    //æ ¹æ®ä¸Šä¸‹æ–‡ï¼Œå¤„ç†è¿‡çš„å›¾ç‰‡ï¼Œé‡æ–°ç»„ä»¶</span><br><span class="line">    CGImageRef imageRef = CGBitmapContextCreateImage (ctx);</span><br><span class="line">    UIImage *returnImage = [UIImage imageWithCGImage:imageRef];</span><br><span class="line"></span><br><span class="line">    //clean up</span><br><span class="line">    CGContextRelease(ctx);</span><br><span class="line">    CGColorSpaceRelease(colorSpace);</span><br><span class="line"></span><br><span class="line">    free(pixelBuffer);</span><br><span class="line">    free(pixelBuffer2);</span><br><span class="line">    CFRelease(inBitmapData);</span><br><span class="line"></span><br><span class="line">    CGColorSpaceRelease(colorSpace);</span><br><span class="line">    CGImageRelease(imageRef);</span><br><span class="line"></span><br><span class="line">    return returnImage;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6ï¼šæ–‡ä»¶å¤§å°"><a href="#6ï¼šæ–‡ä»¶å¤§å°" class="headerlink" title="6ï¼šæ–‡ä»¶å¤§å°"></a>6ï¼šæ–‡ä»¶å¤§å°</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> *  é€šå¸¸ç”¨äºåˆ é™¤ç¼“å­˜çš„æ—¶ï¼Œè®¡ç®—ç¼“å­˜å¤§å°</span><br><span class="line"> */</span><br><span class="line">//å•ä¸ªæ–‡ä»¶çš„å¤§å°</span><br><span class="line">+ (long long) fileSizeAtPath:(NSString*) filePath&#123;</span><br><span class="line">    NSFileManager* manager = [NSFileManager defaultManager];</span><br><span class="line">    if ([manager fileExistsAtPath:filePath])&#123;</span><br><span class="line">        return [[manager attributesOfItemAtPath:filePath error:nil] fileSize];</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7ï¼šæ‰‹æœºå·"><a href="#7ï¼šæ‰‹æœºå·" class="headerlink" title="7ï¼šæ‰‹æœºå·"></a>7ï¼šæ‰‹æœºå·</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> *  æ‰‹æœºå·åˆ¤æ–­</span><br><span class="line"> *</span><br><span class="line"> *  @param mobileNum å·ç å­—ç¬¦ä¸²</span><br><span class="line"> *</span><br><span class="line"> *  @return BOOL</span><br><span class="line"> */</span><br><span class="line">+ (BOOL)isMobileNumber:(NSString *)mobileNum</span><br><span class="line">&#123;</span><br><span class="line">        /**</span><br><span class="line">         * ç§»åŠ¨å·æ®µæ­£åˆ™è¡¨è¾¾å¼</span><br><span class="line">         */</span><br><span class="line">        NSString *CM_NUM = @&quot;^((13[4-9])|(147)|(15[0-2,7-9])|(178)|(18[2-4,7-8]))\\d&#123;8&#125;|(1705)\\d&#123;7&#125;$&quot;;</span><br><span class="line">        /**</span><br><span class="line">         * è”é€šå·æ®µæ­£åˆ™è¡¨è¾¾å¼</span><br><span class="line">         */</span><br><span class="line">        NSString *CU_NUM = @&quot;^((13[0-2])|(145)|(15[5-6])|(176)|(18[5,6]))\\d&#123;8&#125;|(1709)\\d&#123;7&#125;$&quot;;</span><br><span class="line">        /**</span><br><span class="line">         * ç”µä¿¡å·æ®µæ­£åˆ™è¡¨è¾¾å¼</span><br><span class="line">         */</span><br><span class="line">        NSString *CT_NUM = @&quot;^((133)|(153)|(177)|(18[0,1,9]))\\d&#123;8&#125;$&quot;;</span><br><span class="line"></span><br><span class="line">        NSPredicate *pred1 = [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;, CM_NUM];</span><br><span class="line">        BOOL isMatch1 = [pred1 evaluateWithObject:mobileNum];</span><br><span class="line">        NSPredicate *pred2 = [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;, CU_NUM];</span><br><span class="line">        BOOL isMatch2 = [pred2 evaluateWithObject:mobileNum];</span><br><span class="line">        NSPredicate *pred3 = [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;, CT_NUM];</span><br><span class="line">        BOOL isMatch3 = [pred3 evaluateWithObject:mobileNum];</span><br><span class="line"></span><br><span class="line">        if (isMatch1 || isMatch2 || isMatch3) &#123;</span><br><span class="line">            return YES;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            return NO;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8ï¼šé‚®ç®±"><a href="#8ï¼šé‚®ç®±" class="headerlink" title="8ï¼šé‚®ç®±"></a>8ï¼šé‚®ç®±</h2><h4 id="é€šè¿‡åŒºåˆ†å­—ç¬¦ä¸²"><a href="#é€šè¿‡åŒºåˆ†å­—ç¬¦ä¸²" class="headerlink" title="é€šè¿‡åŒºåˆ†å­—ç¬¦ä¸²"></a>é€šè¿‡åŒºåˆ†å­—ç¬¦ä¸²</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">-(BOOL)validateEmail:(NSString*)email</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    if((0 != [email rangeOfString:@&quot;@&quot;].length) &amp;&amp;</span><br><span class="line"></span><br><span class="line">       (0 != [email rangeOfString:@&quot;.&quot;].length))</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        NSCharacterSet* tmpInvalidCharSet = [[NSCharacterSet alphanumericCharacterSet] invertedSet];</span><br><span class="line"></span><br><span class="line">        NSMutableCharacterSet* tmpInvalidMutableCharSet = [[tmpInvalidCharSet mutableCopy] autorelease];</span><br><span class="line"></span><br><span class="line">        [tmpInvalidMutableCharSet removeCharactersInString:@&quot;_-&quot;];</span><br><span class="line"></span><br><span class="line">        NSRange range1 = [email rangeOfString:@&quot;@&quot;</span><br><span class="line"></span><br><span class="line">                                      options:NSCaseInsensitiveSearch];</span><br><span class="line"></span><br><span class="line">        //å–å¾—ç”¨æˆ·åéƒ¨åˆ†</span><br><span class="line"></span><br><span class="line">        NSString* userNameString = [email substringToIndex:range1.location];</span><br><span class="line"></span><br><span class="line">        NSArray* userNameArray   = [userNameString componentsSeparatedByString:@&quot;.&quot;];</span><br><span class="line"></span><br><span class="line">        for(NSString* string in userNameArray)</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            NSRange rangeOfInavlidChars = [string rangeOfCharacterFromSet: tmpInvalidMutableCharSet];</span><br><span class="line"></span><br><span class="line">            if(rangeOfInavlidChars.length != 0 || [string isEqualToString:@&quot;&quot;])</span><br><span class="line"></span><br><span class="line">                return NO;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //å–å¾—åŸŸåéƒ¨åˆ†</span><br><span class="line"></span><br><span class="line">        NSString *domainString = [email substringFromIndex:range1.location+1];</span><br><span class="line"></span><br><span class="line">        NSArray *domainArray   = [domainString componentsSeparatedByString:@&quot;.&quot;];</span><br><span class="line"></span><br><span class="line">        for(NSString *string in domainArray)</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            NSRange rangeOfInavlidChars=[string rangeOfCharacterFromSet:tmpInvalidMutableCharSet];</span><br><span class="line"></span><br><span class="line">            if(rangeOfInavlidChars.length !=0 || [string isEqualToString:@&quot;&quot;])</span><br><span class="line"></span><br><span class="line">                return NO;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return YES;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    else &#123;</span><br><span class="line"></span><br><span class="line">       return NO;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼éªŒè¯"><a href="#åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼éªŒè¯" class="headerlink" title="åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼éªŒè¯"></a>åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼éªŒè¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-(BOOL)isValidateEmail:(NSString *)email &#123;</span><br><span class="line"></span><br><span class="line">    NSString *emailRegex = @&quot;[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]&#123;2,4&#125;&quot;; </span><br><span class="line"></span><br><span class="line">    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;, emailRegex]; </span><br><span class="line"></span><br><span class="line">    return [emailTest evaluateWithObject:email];</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9ï¼šç½‘å€"><a href="#9ï¼šç½‘å€" class="headerlink" title="9ï¼šç½‘å€"></a>9ï¼šç½‘å€</h2><h4 id="1-é¦–å…ˆè¿›è¡Œç¬¬ä¸€æ­¥åˆ¤æ–­ä¼ å…¥çš„å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆHTTPè·¯å¾„çš„è¯­æ³•è§„åˆ™-å³â€HTTPS-E2-80-9D-æˆ–-â€œHTTP-E2-80-9D-ä»å°è£…çš„ä¸€ä¸ªå‡½æ•°-ä¼ å…¥å³å¯åˆ¤æ–­"><a href="#1-é¦–å…ˆè¿›è¡Œç¬¬ä¸€æ­¥åˆ¤æ–­ä¼ å…¥çš„å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆHTTPè·¯å¾„çš„è¯­æ³•è§„åˆ™-å³â€HTTPS-E2-80-9D-æˆ–-â€œHTTP-E2-80-9D-ä»å°è£…çš„ä¸€ä¸ªå‡½æ•°-ä¼ å…¥å³å¯åˆ¤æ–­" class="headerlink" title="1.é¦–å…ˆè¿›è¡Œç¬¬ä¸€æ­¥åˆ¤æ–­ä¼ å…¥çš„å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆHTTPè·¯å¾„çš„è¯­æ³•è§„åˆ™,å³â€HTTPS://%E2%80%9D æˆ– â€œHTTP://%E2%80%9D ,ä»å°è£…çš„ä¸€ä¸ªå‡½æ•°,ä¼ å…¥å³å¯åˆ¤æ–­"></a>1.é¦–å…ˆè¿›è¡Œç¬¬ä¸€æ­¥åˆ¤æ–­ä¼ å…¥çš„å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆHTTPè·¯å¾„çš„è¯­æ³•è§„åˆ™,å³â€<a href="HTTPS://%E2%80%9D" target="_blank" rel="noopener">HTTPS://%E2%80%9D</a> æˆ– â€œ<a href="HTTP://%E2%80%9D" target="_blank" rel="noopener">HTTP://%E2%80%9D</a> ,ä»å°è£…çš„ä¸€ä¸ªå‡½æ•°,ä¼ å…¥å³å¯åˆ¤æ–­</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">- (NSURL *)smartURLForString:(NSString *)str</span><br><span class="line">&#123;</span><br><span class="line">    NSURL *     result;</span><br><span class="line">    NSString *  trimmedStr;</span><br><span class="line">    NSRange     schemeMarkerRange;</span><br><span class="line">    NSString *  scheme;</span><br><span class="line"></span><br><span class="line">    assert(str != nil);</span><br><span class="line"></span><br><span class="line">    result = nil;</span><br><span class="line"></span><br><span class="line">    trimmedStr = [str stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];</span><br><span class="line">    if ( (trimmedStr != nil) &amp;&amp; (trimmedStr.length != 0) ) &#123;</span><br><span class="line">        schemeMarkerRange = [trimmedStr rangeOfString:@&quot;://&quot;];</span><br><span class="line"></span><br><span class="line">        if (schemeMarkerRange.location == NSNotFound) &#123;</span><br><span class="line">            result = [NSURL URLWithString:[NSString stringWithFormat:@&quot;http://%@&quot;, trimmedStr]];</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            scheme = [trimmedStr substringWithRange:NSMakeRange(0, schemeMarkerRange.location)];</span><br><span class="line">            assert(scheme != nil);</span><br><span class="line"></span><br><span class="line">            if ( ([scheme compare:@&quot;http&quot;  options:NSCaseInsensitiveSearch] == NSOrderedSame)</span><br><span class="line">                || ([scheme compare:@&quot;https&quot; options:NSCaseInsensitiveSearch] == NSOrderedSame) ) &#123;</span><br><span class="line">                result = [NSURL URLWithString:trimmedStr];</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                // It looks like this is some unsupported URL scheme.</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç¬¬äºŒæ­¥-åˆ¤æ–­æ­¤è·¯å¾„æ˜¯å¦èƒ½å¤Ÿè¯·æ±‚æˆåŠŸ-ç›´æ¥è¿›è¡ŒHTTPè¯·æ±‚-è§‚å¯Ÿè¿”å›ç»“æœ-gt"><a href="#ç¬¬äºŒæ­¥-åˆ¤æ–­æ­¤è·¯å¾„æ˜¯å¦èƒ½å¤Ÿè¯·æ±‚æˆåŠŸ-ç›´æ¥è¿›è¡ŒHTTPè¯·æ±‚-è§‚å¯Ÿè¿”å›ç»“æœ-gt" class="headerlink" title="ç¬¬äºŒæ­¥,åˆ¤æ–­æ­¤è·¯å¾„æ˜¯å¦èƒ½å¤Ÿè¯·æ±‚æˆåŠŸ,ç›´æ¥è¿›è¡ŒHTTPè¯·æ±‚,è§‚å¯Ÿè¿”å›ç»“æœ-&gt;"></a>ç¬¬äºŒæ­¥,åˆ¤æ–­æ­¤è·¯å¾„æ˜¯å¦èƒ½å¤Ÿè¯·æ±‚æˆåŠŸ,ç›´æ¥è¿›è¡ŒHTTPè¯·æ±‚,è§‚å¯Ÿè¿”å›ç»“æœ-&gt;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//åˆ¤æ–­</span><br><span class="line">-(void) validateUrl: (NSURL *) candidate &#123;</span><br><span class="line">    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:candidate];</span><br><span class="line">    [request setHTTPMethod:@&quot;HEAD&quot;];</span><br><span class="line">    NSURLSession *session = [NSURLSession sessionWithConfiguration:[NSURLSessionConfiguration defaultSessionConfiguration]];</span><br><span class="line">    NSURLSessionDataTask *task = [session dataTaskWithRequest:request completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) &#123;</span><br><span class="line">        NSLog(@&quot;error %@&quot;,error);</span><br><span class="line">        if (error) &#123;</span><br><span class="line">            NSLog(@&quot;ä¸å¯ç”¨&quot;);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            NSLog(@&quot;å¯ç”¨&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">    [task resume];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10ï¼šJSONè½¬å­—å…¸"><a href="#10ï¼šJSONè½¬å­—å…¸" class="headerlink" title="10ï¼šJSONè½¬å­—å…¸"></a>10ï¼šJSONè½¬å­—å…¸</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/*!</span><br><span class="line"> * @brief æŠŠæ ¼å¼åŒ–çš„JSONæ ¼å¼çš„å­—ç¬¦ä¸²è½¬æ¢æˆå­—å…¸</span><br><span class="line"> * @param jsonString JSONæ ¼å¼çš„å­—ç¬¦ä¸²</span><br><span class="line"> * @return è¿”å›å­—å…¸</span><br><span class="line"> */</span><br><span class="line">- (NSDictionary *)dictionaryWithJsonString:(NSString *)jsonString &#123;</span><br><span class="line">    if (jsonString == nil) &#123;</span><br><span class="line">        return nil;</span><br><span class="line">    &#125;</span><br><span class="line">    iCocosLog(@&quot;%@&quot;, jsonString);</span><br><span class="line"></span><br><span class="line">    NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];</span><br><span class="line">    NSError *err;</span><br><span class="line">    NSDictionary *dic = [NSJSONSerialization JSONObjectWithData:jsonData</span><br><span class="line">                                                        options:NSJSONReadingMutableContainers</span><br><span class="line">                                                          error:&amp;err];</span><br><span class="line">    if(err) &#123;</span><br><span class="line">        iCocosLog(@&quot;jsonè§£æå¤±è´¥ï¼š%@&quot;,err);</span><br><span class="line">        return nil;</span><br><span class="line">    &#125;</span><br><span class="line">    return dic;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ•°ç»„è½¬JSON"><a href="#æ•°ç»„è½¬JSON" class="headerlink" title="æ•°ç»„è½¬JSON"></a>æ•°ç»„è½¬JSON</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">NSArray *uids = [self.allModelUID objectAtIndexCheck:range];</span><br><span class="line"></span><br><span class="line">NSError *error = nil;</span><br><span class="line">NSData *picsJsonData = [NSJSONSerialization dataWithJSONObject:uids</span><br><span class="line">                                                       options:NSJSONWritingPrettyPrinted</span><br><span class="line">                                                         error:&amp;error];</span><br><span class="line">NSString *JSONString = [[NSString alloc] initWithData:picsJsonData encoding:NSUTF8StringEncoding];</span><br></pre></td></tr></table></figure>
<h2 id="11ï¼šiPhoneè®¾å¤‡ç±»å‹"><a href="#11ï¼šiPhoneè®¾å¤‡ç±»å‹" class="headerlink" title="11ï¼šiPhoneè®¾å¤‡ç±»å‹"></a>11ï¼šiPhoneè®¾å¤‡ç±»å‹</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">typedef NS_ENUM(char, iPhoneModel)&#123;//0~3</span><br><span class="line">    iPhone4,//320*480</span><br><span class="line">    iPhone5,//320*568</span><br><span class="line">    iPhone6,//375*667</span><br><span class="line">    iPhone6Plus,//414*736</span><br><span class="line">    UnKnown</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  return current running iPhone model</span><br><span class="line"> *</span><br><span class="line"> *  @return iPhone model</span><br><span class="line"> */</span><br><span class="line">+ (iPhoneModel)iPhonesModel &#123;</span><br><span class="line">    //bounds method gets the points not the pixels!!!</span><br><span class="line">    CGRect rect = [[UIScreen mainScreen] bounds];</span><br><span class="line"></span><br><span class="line">    CGFloat width = rect.size.width;</span><br><span class="line">    CGFloat height = rect.size.height;</span><br><span class="line"></span><br><span class="line">    //get current interface Orientation</span><br><span class="line">    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];</span><br><span class="line">    //unknown</span><br><span class="line">    if (UIInterfaceOrientationUnknown == orientation) &#123;</span><br><span class="line">        return UnKnown;</span><br><span class="line">    &#125;</span><br><span class="line">    /**</span><br><span class="line">     //    portrait   width * height</span><br><span class="line">     //    iPhone4:320*480</span><br><span class="line">     //    iPhone5:320*568</span><br><span class="line">     //    iPhone6:375*667</span><br><span class="line">     //    iPhone6Plus:414*736</span><br><span class="line">     */</span><br><span class="line"></span><br><span class="line">    //portrait</span><br><span class="line">    if (UIInterfaceOrientationPortrait == orientation) &#123;</span><br><span class="line">        if (width ==  320.0f) &#123;</span><br><span class="line">            if (height == 480.0f) &#123;</span><br><span class="line">                return iPhone4;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                return iPhone5;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else if (width == 375.0f) &#123;</span><br><span class="line">            return iPhone6;</span><br><span class="line">        &#125; else if (width == 414.0f) &#123;</span><br><span class="line">            return iPhone6Plus;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; else if (UIInterfaceOrientationLandscapeLeft == orientation || UIInterfaceOrientationLandscapeRight == orientation) &#123;//landscape</span><br><span class="line">        if (height == 320.0) &#123;</span><br><span class="line">            if (width == 480.0f) &#123;</span><br><span class="line">                return iPhone4;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                return iPhone5;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else if (height == 375.0f) &#123;</span><br><span class="line">            return iPhone6;</span><br><span class="line">        &#125; else if (height == 414.0f) &#123;</span><br><span class="line">            return iPhone6Plus;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return UnKnown;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="12ï¼šiPhoneç³»ç»Ÿç‰ˆæœ¬"><a href="#12ï¼šiPhoneç³»ç»Ÿç‰ˆæœ¬" class="headerlink" title="12ï¼šiPhoneç³»ç»Ÿç‰ˆæœ¬"></a>12ï¼šiPhoneç³»ç»Ÿç‰ˆæœ¬</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//è·å–å½“å‰ç³»ç»Ÿç‰ˆæœ¬</span><br><span class="line">#define __ios10_0__ ([[UIDevice currentDevice].systemVersion floatValue] &gt;= 10.0)</span><br><span class="line">#define __ios9_0__ ([[UIDevice currentDevice].systemVersion floatValue] &gt;= 9.0)</span><br><span class="line">#define __ios8_0__ ([[UIDevice currentDevice].systemVersion floatValue] &gt;= 8.0)</span><br></pre></td></tr></table></figure>
<h2 id="13ï¼šæ—¥å¿—"><a href="#13ï¼šæ—¥å¿—" class="headerlink" title="13ï¼šæ—¥å¿—"></a>13ï¼šæ—¥å¿—</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// æ—¥å¿—è¾“å‡º</span><br><span class="line">#ifdef DEBUG // å¼€å‘é˜¶æ®µ-DEBUGé˜¶æ®µ:ä½¿ç”¨Log</span><br><span class="line">#define iCocosLog(...) NSLog(__VA_ARGS__)</span><br><span class="line">#else // å‘å¸ƒé˜¶æ®µ-ä¸Šçº¿é˜¶æ®µ:ç§»é™¤Log</span><br><span class="line">#define iCocosLog(...)</span><br><span class="line">#endif</span><br></pre></td></tr></table></figure>
<p>è¯¦ç»†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#ifdef DEBUG</span><br><span class="line">#define iCocosLog(format, ...) printf(&quot;\n[%s] %s [ç¬¬%dè¡Œ] %s\n&quot;, __TIME__, __FUNCTION__, __LINE__, [[NSString stringWithFormat:format, ## __VA_ARGS__] UTF8String]);</span><br><span class="line">#else</span><br><span class="line">#define iCocosLog(format, ...)</span><br><span class="line">#endif</span><br></pre></td></tr></table></figure>
<h2 id="14ï¼šé¢œè‰²"><a href="#14ï¼šé¢œè‰²" class="headerlink" title="14ï¼šé¢œè‰²"></a>14ï¼šé¢œè‰²</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// é¢œè‰²</span><br><span class="line">#define iCocosARGBColor(r, g, b, a) [UIColor colorWithRed:(r)/255.0 green:(g)/255.0 blue:(b)/255.0 alpha:a]</span><br><span class="line">#define iCocosColor(r, g, b) iCocosARGBColor((r), (g), (b), 255)</span><br><span class="line"></span><br><span class="line">#define random(r, g, b, a) [UIColor colorWithRed:(r)/255.0 green:(g)/255.0 blue:(b)/255.0 alpha:(a)/255.0]</span><br><span class="line">#define iCocosRandomColor (random(arc4random_uniform(256), arc4random_uniform(256), arc4random_uniform(256), arc4random_uniform(256)))</span><br></pre></td></tr></table></figure>
<h2 id="15ï¼šå¼±å¼•ç”¨"><a href="#15ï¼šå¼±å¼•ç”¨" class="headerlink" title="15ï¼šå¼±å¼•ç”¨"></a>15ï¼šå¼±å¼•ç”¨</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// å¼±å¼•ç”¨</span><br><span class="line">#define iCocosWeakSelf __weak typeof(self) weakSelf = self;</span><br></pre></td></tr></table></figure>
<h2 id="16ï¼šå±å¹•å°ºå¯¸"><a href="#16ï¼šå±å¹•å°ºå¯¸" class="headerlink" title="16ï¼šå±å¹•å°ºå¯¸"></a>16ï¼šå±å¹•å°ºå¯¸</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// å±å¹•å°ºå¯¸</span><br><span class="line">#define iCocosScreenH [UIScreen mainScreen].bounds.size.height</span><br><span class="line">#define iCocosScreenW [UIScreen mainScreen].bounds.size.width</span><br></pre></td></tr></table></figure>
<h2 id="17ï¼šè·å–viewçš„æ§åˆ¶"><a href="#17ï¼šè·å–viewçš„æ§åˆ¶" class="headerlink" title="17ï¼šè·å–viewçš„æ§åˆ¶"></a>17ï¼šè·å–viewçš„æ§åˆ¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/** è·å–å½“å‰Viewçš„æ§åˆ¶å™¨å¯¹è±¡ */</span><br><span class="line">-(UIViewController *)getCurrentViewController&#123;</span><br><span class="line">    UIResponder *next = [self nextResponder];</span><br><span class="line">    do &#123;</span><br><span class="line">        if ([next isKindOfClass:[UIViewController class]]) &#123;</span><br><span class="line">            return (UIViewController *)next;</span><br><span class="line">        &#125;</span><br><span class="line">        next = [next nextResponder];</span><br><span class="line">    &#125; while (next != nil);</span><br><span class="line">    return nil;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="18ï¼šå­—å…¸é˜²è¹¦"><a href="#18ï¼šå­—å…¸é˜²è¹¦" class="headerlink" title="18ï¼šå­—å…¸é˜²è¹¦"></a>18ï¼šå­—å…¸é˜²è¹¦</h2><h4 id="ä¸å¯å˜"><a href="#ä¸å¯å˜" class="headerlink" title="ä¸å¯å˜"></a>ä¸å¯å˜</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/*!</span><br><span class="line"> @method objectAtIndexCheck:</span><br><span class="line"> @abstract æ£€æŸ¥æ˜¯å¦è¶Šç•Œå’ŒNSNullå¦‚æœæ˜¯è¿”å›nil</span><br><span class="line"> @result è¿”å›å¯¹è±¡</span><br><span class="line"> */</span><br><span class="line">- (id)objectStringForKey:(NSString *)key</span><br><span class="line">&#123;</span><br><span class="line">    if ([self objectForKey:key] == nil) &#123;</span><br><span class="line">//        iCocosLog(@&quot;é”®å€¼å¯¹ä¸å­˜åœ¨&quot;);</span><br><span class="line">        return nil;</span><br><span class="line">    &#125;</span><br><span class="line">    id value = [self objectForKey:key];</span><br><span class="line"></span><br><span class="line">    return value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¯å˜"><a href="#å¯å˜" class="headerlink" title="å¯å˜"></a>å¯å˜</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/*!</span><br><span class="line"> @method objectAtIndexCheck:</span><br><span class="line"> @abstract æ£€æŸ¥æ˜¯å¦è¶Šç•Œå’ŒNSNullå¦‚æœæ˜¯è¿”å›nil</span><br><span class="line"> @result è¿”å›å¯¹è±¡</span><br><span class="line"> */</span><br><span class="line">- (id)objectStringForKey:(NSString *)key</span><br><span class="line">&#123;</span><br><span class="line">    if ([self objectForKey:key] == nil) &#123;</span><br><span class="line"></span><br><span class="line">//        iCocosLog(@&quot;é”®å€¼å¯¹ä¸å­˜åœ¨&quot;);</span><br><span class="line"></span><br><span class="line">        return nil;</span><br><span class="line">//        return 0;</span><br><span class="line">    &#125;</span><br><span class="line">    id value = [self objectForKey:key];</span><br><span class="line"></span><br><span class="line">    return value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="19ï¼šæ•°ç»„é˜²è¹¦"><a href="#19ï¼šæ•°ç»„é˜²è¹¦" class="headerlink" title="19ï¼šæ•°ç»„é˜²è¹¦"></a>19ï¼šæ•°ç»„é˜²è¹¦</h2><h4 id="ä¸å¯å˜-1"><a href="#ä¸å¯å˜-1" class="headerlink" title="ä¸å¯å˜"></a>ä¸å¯å˜</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/*!</span><br><span class="line"> @method objectAtIndexCheck:</span><br><span class="line"> @abstract æ£€æŸ¥æ˜¯å¦è¶Šç•Œå’ŒNSNullå¦‚æœæ˜¯è¿”å›nil</span><br><span class="line"> @result è¿”å›å¯¹è±¡</span><br><span class="line"> */</span><br><span class="line">- (id)objectAtIndexCheck:(NSUInteger)index  &#123;</span><br><span class="line"></span><br><span class="line">    if (index &gt;= [self count]) &#123;</span><br><span class="line">        iCocosLog(@&quot;æ•°ç»„è¶Šç•Œ&quot;);</span><br><span class="line">        return nil;</span><br><span class="line">    &#125;</span><br><span class="line">    id value = [self objectAtIndex:index];</span><br><span class="line">    if (value == [NSNull null]) &#123;</span><br><span class="line">        iCocosLog(@&quot;æ•°ç»„ä¸ºç©º&quot;);</span><br><span class="line">        return nil;</span><br><span class="line">    &#125;</span><br><span class="line">    return value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¯å˜-1"><a href="#å¯å˜-1" class="headerlink" title="å¯å˜"></a>å¯å˜</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">/*!</span><br><span class="line"> @method objectAtIndexCheck:</span><br><span class="line"> @abstract æ£€æŸ¥æ˜¯å¦è¶Šç•Œå’ŒNSNullå¦‚æœæ˜¯è¿”å›nil</span><br><span class="line"> @result è¿”å›å¯¹è±¡</span><br><span class="line"> */</span><br><span class="line">- (id)objectAtIndexCheck:(NSUInteger)index  &#123;</span><br><span class="line"></span><br><span class="line">    if (index &gt;= [self count]) &#123;</span><br><span class="line">        iCocosLog(@&quot;æ•°ç»„è¶Šç•Œ&quot;);</span><br><span class="line">        return nil;</span><br><span class="line">    &#125;</span><br><span class="line">    id value = [self objectAtIndex:index];</span><br><span class="line">    if (value == [NSNull null]) &#123;</span><br><span class="line">        iCocosLog(@&quot;æ•°ç»„ä¸ºç©º&quot;);</span><br><span class="line">        return nil;</span><br><span class="line">    &#125;</span><br><span class="line">    return value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)removeObjectAtCheckIndex:(NSInteger)index</span><br><span class="line">&#123;</span><br><span class="line">    if (index &gt;= [self count]) &#123;</span><br><span class="line">        iCocosLog(@&quot;æ•°ç»„è¶Šç•Œ&quot;);</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    id value = [self objectAtIndex:index];</span><br><span class="line">    if (value == [NSNull null]) &#123;</span><br><span class="line">        iCocosLog(@&quot;æ•°ç»„ä¸ºç©º&quot;);</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [self removeObjectAtIndex:index];</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="20ï¼šæœ¬æ–‡è¾“å…¥é”™è¯¯æç¤º"><a href="#20ï¼šæœ¬æ–‡è¾“å…¥é”™è¯¯æç¤º" class="headerlink" title="20ï¼šæœ¬æ–‡è¾“å…¥é”™è¯¯æç¤º"></a>20ï¼šæœ¬æ–‡è¾“å…¥é”™è¯¯æç¤º</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (void)shake &#123;</span><br><span class="line">    CAKeyframeAnimation *keyFrame = [CAKeyframeAnimation animationWithKeyPath:@&quot;position.x&quot;];</span><br><span class="line">    keyFrame.duration = 0.3;</span><br><span class="line">    CGFloat x = self.layer.position.x;</span><br><span class="line">    keyFrame.values = @[@(x - 30), @(x - 30), @(x + 20), @(x - 20), @(x + 10), @(x - 10), @(x + 5), @(x - 5)];</span><br><span class="line">    [self.layer addAnimation:keyFrame forKey:@&quot;shake&quot;];</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="21ï¼šå½“å‰æ—¶é—´"><a href="#21ï¼šå½“å‰æ—¶é—´" class="headerlink" title="21ï¼šå½“å‰æ—¶é—´"></a>21ï¼šå½“å‰æ—¶é—´</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+ (NSString *)nowTimes&#123;</span><br><span class="line">    NSDate* dat = [NSDate dateWithTimeIntervalSinceNow:0];</span><br><span class="line">    int a=(int)([dat timeIntervalSince1970] + 0.5);</span><br><span class="line">    NSString *timeString = [NSString stringWithFormat:@&quot;%d&quot;, a];//è½¬ä¸ºå­—ç¬¦å‹</span><br><span class="line">    return timeString;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="22-å½“å‰ç‰ˆæœ¬"><a href="#22-å½“å‰ç‰ˆæœ¬" class="headerlink" title="22:å½“å‰ç‰ˆæœ¬"></a>22:å½“å‰ç‰ˆæœ¬</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> *  å½“å‰ç¨‹åºçš„ç‰ˆæœ¬å·</span><br><span class="line"> */</span><br><span class="line">-(NSString *)version&#123;</span><br><span class="line">    //ç³»ç»Ÿç›´æ¥è¯»å–çš„ç‰ˆæœ¬å·</span><br><span class="line">    NSString *versionValueStringForSystemNow=[[NSBundle mainBundle].infoDictionary valueForKey:(NSString *)kCFBundleVersionKey];</span><br><span class="line">    return versionValueStringForSystemNow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="23-tabBarçº¢ç‚¹"><a href="#23-tabBarçº¢ç‚¹" class="headerlink" title="23:tabBarçº¢ç‚¹"></a>23:tabBarçº¢ç‚¹</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">- (void)showBadgeOnItemIndex:(int)index&#123;</span><br><span class="line"></span><br><span class="line">    //ç§»é™¤ä¹‹å‰çš„å°çº¢ç‚¹</span><br><span class="line">    [self removeBadgeOnItemIndex:index];</span><br><span class="line"></span><br><span class="line">    //æ–°å»ºå°çº¢ç‚¹</span><br><span class="line">    UIView *badgeView = [[UIView alloc]init];</span><br><span class="line">    badgeView.tag = 888 + index;</span><br><span class="line">    badgeView.backgroundColor = [UIColor redColor];</span><br><span class="line">    CGRect tabFrame = self.frame;</span><br><span class="line"></span><br><span class="line">    //ç¡®å®šå°çº¢ç‚¹çš„ä½ç½®</span><br><span class="line">    float percentX = (index +0.6) / TabbarItemNums;</span><br><span class="line">    CGFloat x = ceilf(percentX * tabFrame.size.width);</span><br><span class="line">    CGFloat y = ceilf(0.1 * tabFrame.size.height);</span><br><span class="line">    badgeView.frame = CGRectMake(x, y, 8, 8);</span><br><span class="line">    badgeView.layer.cornerRadius = badgeView.frame.size.width/2;</span><br><span class="line"></span><br><span class="line">    [self addSubview:badgeView];</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)hideBadgeOnItemIndex:(int)index&#123;</span><br><span class="line"></span><br><span class="line">    //ç§»é™¤å°çº¢ç‚¹</span><br><span class="line">    [self removeBadgeOnItemIndex:index];</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)removeBadgeOnItemIndex:(int)index&#123;</span><br><span class="line"></span><br><span class="line">    //æŒ‰ç…§tagå€¼è¿›è¡Œç§»é™¤</span><br><span class="line">    for (UIView *subView in self.subviews) &#123;</span><br><span class="line">        if (subView.tag == 888+index) &#123;</span><br><span class="line">            [subView removeFromSuperview];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="24-Logæ—¥å¿—-m"><a href="#24-Logæ—¥å¿—-m" class="headerlink" title="24:Logæ—¥å¿—.m"></a>24:Logæ—¥å¿—.m</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">@implementation UIView(Log)</span><br><span class="line">+ (NSString *)searchAllSubviews:(UIView *)superview</span><br><span class="line">&#123;</span><br><span class="line">    NSMutableString *xml = [NSMutableString string];</span><br><span class="line"></span><br><span class="line">    NSString *class = NSStringFromClass(superview.class);</span><br><span class="line">    class = [class stringByReplacingOccurrencesOfString:@&quot;_&quot; withString:@&quot;&quot;];</span><br><span class="line">    [xml appendFormat:@&quot;&lt;%@ frame=\&quot;%@\&quot;&gt;\n&quot;, class, NSStringFromCGRect(superview.frame)];</span><br><span class="line">    for (UIView *childView in superview.subviews) &#123;</span><br><span class="line">        NSString *subviewXml = [self searchAllSubviews:childView];</span><br><span class="line">        [xml appendString:subviewXml];</span><br><span class="line">    &#125;</span><br><span class="line">    [xml appendFormat:@&quot;&lt;/%@&gt;\n&quot;, class];</span><br><span class="line">    return xml;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (NSString *)description</span><br><span class="line">&#123;</span><br><span class="line">    return [UIView searchAllSubviews:self];</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation NSDictionary (Log)</span><br><span class="line">- (NSString *)descriptionWithLocale:(id)locale</span><br><span class="line">&#123;</span><br><span class="line">    NSMutableString *str = [NSMutableString string];</span><br><span class="line"></span><br><span class="line">    [str appendString:@&quot;&#123;\n&quot;];</span><br><span class="line"></span><br><span class="line">    // éå†å­—å…¸çš„æ‰€æœ‰é”®å€¼å¯¹</span><br><span class="line">    [self enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) &#123;</span><br><span class="line">        [str appendFormat:@&quot;\t%@ = %@,\n&quot;, key, obj];</span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">    [str appendString:@&quot;&#125;&quot;];</span><br><span class="line"></span><br><span class="line">    // æŸ¥å‡ºæœ€åä¸€ä¸ª,çš„èŒƒå›´</span><br><span class="line">    NSRange range = [str rangeOfString:@&quot;,&quot; options:NSBackwardsSearch];</span><br><span class="line">    if (range.length) &#123;</span><br><span class="line">        // åˆ æ‰æœ€åä¸€ä¸ª,</span><br><span class="line">        [str deleteCharactersInRange:range];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return str;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation NSArray (Log)</span><br><span class="line">- (NSString *)descriptionWithLocale:(id)locale</span><br><span class="line">&#123;</span><br><span class="line">    NSMutableString *str = [NSMutableString string];</span><br><span class="line"></span><br><span class="line">    [str appendString:@&quot;[\n&quot;];</span><br><span class="line"></span><br><span class="line">    // éå†æ•°ç»„çš„æ‰€æœ‰å…ƒç´ </span><br><span class="line">    [self enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) &#123;</span><br><span class="line">        [str appendFormat:@&quot;%@,\n&quot;, obj];</span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">    [str appendString:@&quot;]&quot;];</span><br><span class="line"></span><br><span class="line">    // æŸ¥å‡ºæœ€åä¸€ä¸ª,çš„èŒƒå›´</span><br><span class="line">    NSRange range = [str rangeOfString:@&quot;,&quot; options:NSBackwardsSearch];</span><br><span class="line">    if (range.length) &#123;</span><br><span class="line">        // åˆ æ‰æœ€åä¸€ä¸ª,</span><br><span class="line">        [str deleteCharactersInRange:range];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return str;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<h2 id="25-MD5"><a href="#25-MD5" class="headerlink" title="25:MD5"></a>25:MD5</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//16ä½MD5åŠ å¯†æ–¹å¼</span><br><span class="line">- (NSString *)getMd5_16Bit_String:(NSString *)srcString&#123;</span><br><span class="line">    //æå–32ä½MD5æ•£åˆ—çš„ä¸­é—´16ä½</span><br><span class="line">    NSString *md5_32Bit_String=[self getMd5_32Bit_String:srcString];</span><br><span class="line">    NSString *result = [[md5_32Bit_String substringToIndex:24] substringFromIndex:8];//å³9ï½25ä½</span><br><span class="line"></span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//32ä½MD5åŠ å¯†æ–¹å¼</span><br><span class="line">- (NSString *)getMd5_32Bit_String:(NSString *)srcString&#123;</span><br><span class="line">    const char *cStr = [srcString UTF8String];</span><br><span class="line">    unsigned char digest[CC_MD5_DIGEST_LENGTH];</span><br><span class="line">    CC_MD5( cStr, strlen(cStr), digest );</span><br><span class="line">    NSMutableString *result = [NSMutableString stringWithCapacity:CC_MD5_DIGEST_LENGTH * 2];</span><br><span class="line">    for(int i = 0; i &lt; CC_MD5_DIGEST_LENGTH; i++)</span><br><span class="line">        [result appendFormat:@&quot;%02x&quot;, digest[i]];</span><br><span class="line"></span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="26-æŒ‰é’®èƒŒæ™¯é¢œè‰²"><a href="#26-æŒ‰é’®èƒŒæ™¯é¢œè‰²" class="headerlink" title="26:æŒ‰é’®èƒŒæ™¯é¢œè‰²"></a>26:æŒ‰é’®èƒŒæ™¯é¢œè‰²</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> *  ä½¿ç”¨èƒŒæ™¯é¢œè‰²è®¾ç½®æŒ‰é’®ä¸åŒçŠ¶æ€çš„å›¾ç‰‡</span><br><span class="line"> *</span><br><span class="line"> *  @param color é¢œè‰²</span><br><span class="line"> *</span><br><span class="line"> *  @return èƒŒæ™¯å›¾ç‰‡</span><br><span class="line"> */</span><br><span class="line">+ (UIImage *)imageWithColor:(UIColor *)color &#123;</span><br><span class="line">    CGRect rect = CGRectMake(0.0f, 0.0f, 1.0f, 1.0f);</span><br><span class="line">    UIGraphicsBeginImageContext(rect.size);</span><br><span class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</span><br><span class="line"></span><br><span class="line">    CGContextSetFillColorWithColor(context, [color CGColor]);</span><br><span class="line">    CGContextFillRect(context, rect);</span><br><span class="line"></span><br><span class="line">    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">    UIGraphicsEndImageContext();</span><br><span class="line"></span><br><span class="line">    return image;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="27ï¼šå¯¹è±¡æ˜¯å¦ä¸ºç©º"><a href="#27ï¼šå¯¹è±¡æ˜¯å¦ä¸ºç©º" class="headerlink" title="27ï¼šå¯¹è±¡æ˜¯å¦ä¸ºç©º"></a>27ï¼šå¯¹è±¡æ˜¯å¦ä¸ºç©º</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©º</span><br><span class="line">- (BOOL)isBlanceObject:(id)object&#123;</span><br><span class="line">    if (object == nil || object == NULL) &#123;</span><br><span class="line">        return YES;</span><br><span class="line">    &#125;</span><br><span class="line">    if ([object isKindOfClass:[NSNull class]]) &#123;</span><br><span class="line">        return YES;</span><br><span class="line">    &#125;</span><br><span class="line">    return NO;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="28ï¼šé”®ç›˜é€€å‡ºä¸éšè—"><a href="#28ï¼šé”®ç›˜é€€å‡ºä¸éšè—" class="headerlink" title="28ï¼šé”®ç›˜é€€å‡ºä¸éšè—"></a>28ï¼šé”®ç›˜é€€å‡ºä¸éšè—</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];</span><br><span class="line">[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil];</span><br></pre></td></tr></table></figure>
<p>}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">- (void)keyboardWillShow:(NSNotification *)notification &#123;</span><br><span class="line"></span><br><span class="line">    // è·å–é€šçŸ¥çš„ä¿¡æ¯å­—å…¸</span><br><span class="line">    NSDictionary *userInfo = [notification userInfo];</span><br><span class="line"></span><br><span class="line">    // è·å–é”®ç›˜å¼¹å‡ºåçš„rect</span><br><span class="line">    NSValue* aValue = [userInfo objectForKey:UIKeyboardFrameEndUserInfoKey];</span><br><span class="line">    CGRect keyboardRect = [aValue CGRectValue];</span><br><span class="line"></span><br><span class="line">    // è·å–é”®ç›˜å¼¹å‡ºåŠ¨ç”»æ—¶é—´</span><br><span class="line">    NSValue *animationDurationValue = [userInfo objectForKey:UIKeyboardAnimationDurationUserInfoKey];</span><br><span class="line">    NSTimeInterval animationDuration;</span><br><span class="line">    [animationDurationValue getValue:&amp;animationDuration];</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)keyboardWillHide:(NSNotification *)notification &#123;</span><br><span class="line"></span><br><span class="line">    // è·å–é€šçŸ¥ä¿¡æ¯å­—å…¸</span><br><span class="line">    NSDictionary* userInfo = [notification userInfo];</span><br><span class="line"></span><br><span class="line">    // è·å–é”®ç›˜éšè—åŠ¨ç”»æ—¶é—´</span><br><span class="line">    NSValue *animationDurationValue = [userInfo objectForKey:UIKeyboardAnimationDurationUserInfoKey];</span><br><span class="line">    NSTimeInterval animationDuration;</span><br><span class="line">    [animationDurationValue getValue:&amp;animationDuration];</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="29ï¼šè·å–è®¾å¤‡å”¯ä¸€ID"><a href="#29ï¼šè·å–è®¾å¤‡å”¯ä¸€ID" class="headerlink" title="29ï¼šè·å–è®¾å¤‡å”¯ä¸€ID"></a>29ï¼šè·å–è®¾å¤‡å”¯ä¸€ID</h2><p>-(NSString <em>)getUniqueDeviceIdentifierAsString { NSString</em> appName=[[[NSBundle mainBundle] infoDictionary] objectForKey:(NSString*)kCFBundleNameKey];</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">NSString *strApplicationUUID =  [SAMKeychain passwordForService:appName account:@&quot;incoding&quot;];</span><br><span class="line">if (strApplicationUUID == nil)</span><br><span class="line">&#123;</span><br><span class="line">    strApplicationUUID  = [[[UIDevice currentDevice] identifierForVendor] UUIDString];</span><br><span class="line"></span><br><span class="line">    NSError *error = nil;</span><br><span class="line">    SAMKeychainQuery *query = [[SAMKeychainQuery alloc] init];</span><br><span class="line">    query.service = appName;</span><br><span class="line">    query.account = @&quot;incoding&quot;;</span><br><span class="line">    query.password = strApplicationUUID;</span><br><span class="line">    query.synchronizationMode = SAMKeychainQuerySynchronizationModeNo;</span><br><span class="line">    [query save:&amp;error];</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return strApplicationUUID;</span><br></pre></td></tr></table></figure>
<p>}</p>
<h2 id="30ï¼šMOVè½¬Mp4"><a href="#30ï¼šMOVè½¬Mp4" class="headerlink" title="30ï¼šMOVè½¬Mp4"></a>30ï¼šMOVè½¬Mp4</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">- (void)movFileTransformToMP4WithSourceUrl:(NSURL *)sourceUrl completion:(void(^)(NSString *Mp4FilePath))comepleteBlock</span><br><span class="line">&#123;</span><br><span class="line">    /**</span><br><span class="line">     *  movæ ¼å¼è½¬mp4æ ¼å¼</span><br><span class="line">     */</span><br><span class="line">    AVURLAsset *avAsset = [AVURLAsset URLAssetWithURL:sourceUrl options:nil];</span><br><span class="line"></span><br><span class="line">    NSArray *compatiblePresets = [AVAssetExportSession exportPresetsCompatibleWithAsset:avAsset];</span><br><span class="line"></span><br><span class="line">    NSLog(@&quot;%@&quot;,compatiblePresets);</span><br><span class="line"></span><br><span class="line">    if ([compatiblePresets containsObject:AVAssetExportPresetHighestQuality]) &#123;</span><br><span class="line"></span><br><span class="line">        AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:avAsset presetName:AVAssetExportPresetMediumQuality];</span><br><span class="line"></span><br><span class="line">        NSDate *date = [NSDate date];</span><br><span class="line">        NSDateFormatter *formatter = [[NSDateFormatter alloc] init];</span><br><span class="line">        [formatter setDateFormat:@&quot;yyyyMMddHHmmss&quot;];</span><br><span class="line">        NSString *uniqueName = [NSString stringWithFormat:@&quot;%@.mp4&quot;,[formatter stringFromDate:date]];</span><br><span class="line">        NSString * resultPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0] stringByAppendingPathComponent:uniqueName];//PATH_OF_DOCUMENTä¸ºdocumentsè·¯å¾„</span><br><span class="line"></span><br><span class="line">        NSLog(@&quot;output File Path : %@&quot;,resultPath);</span><br><span class="line"></span><br><span class="line">        exportSession.outputURL = [NSURL fileURLWithPath:resultPath];</span><br><span class="line"></span><br><span class="line">        exportSession.outputFileType = AVFileTypeMPEG4;//å¯ä»¥é…ç½®å¤šç§è¾“å‡ºæ–‡ä»¶æ ¼å¼</span><br><span class="line"></span><br><span class="line">        exportSession.shouldOptimizeForNetworkUse = YES;</span><br><span class="line"></span><br><span class="line">        [exportSession exportAsynchronouslyWithCompletionHandler:^(void)</span><br><span class="line">         &#123;</span><br><span class="line">             switch (exportSession.status) &#123;</span><br><span class="line"></span><br><span class="line">                 case AVAssetExportSessionStatusUnknown:</span><br><span class="line"></span><br><span class="line">                     break;</span><br><span class="line"></span><br><span class="line">                 case AVAssetExportSessionStatusWaiting:</span><br><span class="line"></span><br><span class="line">                     break;</span><br><span class="line"></span><br><span class="line">                 case AVAssetExportSessionStatusExporting:</span><br><span class="line"></span><br><span class="line">                     break;</span><br><span class="line"></span><br><span class="line">                 case AVAssetExportSessionStatusCompleted:</span><br><span class="line">                 &#123;</span><br><span class="line">                     comepleteBlock(resultPath);</span><br><span class="line"></span><br><span class="line">                     NSLog(@&quot;mp4 file size:%lf MB&quot;,[NSData dataWithContentsOfURL:exportSession.outputURL].length/1024.f/1024.f);</span><br><span class="line">                 &#125;</span><br><span class="line">                     break;</span><br><span class="line"></span><br><span class="line">                 case AVAssetExportSessionStatusFailed:</span><br><span class="line"></span><br><span class="line">                     break;</span><br><span class="line"></span><br><span class="line">                 case AVAssetExportSessionStatusCancelled:</span><br><span class="line"></span><br><span class="line">                     break;</span><br><span class="line"></span><br><span class="line">             &#125;  </span><br><span class="line"></span><br><span class="line">         &#125;];</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="31-ä¸Šä¼ å›¾ç‰‡"><a href="#31-ä¸Šä¼ å›¾ç‰‡" class="headerlink" title="31:ä¸Šä¼ å›¾ç‰‡"></a>31:ä¸Šä¼ å›¾ç‰‡</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">+ (void)uploadImage:(UIImage *)imageIcon successUpload:(void (^)(id responseObject))successUpload failureUpload:(void (^)(NSError *error))failureUpload;</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    //    æ‹¿åˆ°æ–‡ä»¶</span><br><span class="line">    NSString *NSDocmentsPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject;</span><br><span class="line">    NSString *iconPath       = [NSDocmentsPath stringByAppendingPathComponent:[NSString stringWithFormat:@&quot;faceUrl.png&quot;]];</span><br><span class="line">    //NSURL *url = [NSURL fileURLWithPath:iconPath];</span><br><span class="line"></span><br><span class="line">    long long size = [iCocosGetSize fileSizeAtPath:iconPath];</span><br><span class="line"></span><br><span class="line">    if (size &gt;= 7000000) &#123;</span><br><span class="line">        [SVProgressHUD showInfoWithStatus:@&quot;å›¾ç‰‡è¿‡å¤§ï¼Œè¯·é‡æ–°ä¸Šä¼  \n è¯·ä¸è¦ä¸Šä¼ è¶…è¿‡7Mbæ–‡ä»¶&quot;];</span><br><span class="line">        NSDictionary *errDict = [NSDictionary dictionaryWithObject:@&quot;big&quot; forKey:@&quot;state&quot;];</span><br><span class="line">        failureUpload((NSError *)errDict);</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //1:æ–‡ä»¶çš„32ä½MD5å€¼</span><br><span class="line">    NSString *strForEight = [iCocosFormatFileGetEight getStringWithEight:iconPath];</span><br><span class="line">    //2:æ–‡ä»¶çš„å‰8ä¸ªå­—èŠ‚çš„16ä½+æ–‡ä»¶çš„å8ä¸ªå­—èŠ‚çš„16ä½</span><br><span class="line">    NSString *str32MD5    = [NSString getMd5_32Bit_String:iconPath];</span><br><span class="line"></span><br><span class="line">    NSString *str64       = [NSString stringWithFormat:@&quot;%@%@&quot;, str32MD5,strForEight];</span><br><span class="line"></span><br><span class="line">    //å­˜å›¾ç‰‡</span><br><span class="line">    //    NSData *imageData = UIImageJPEGRepresentation(imageIcon, 1.0);//å°†UIImageè½¬ä¸ºNSDataï¼Œ1.0è¡¨ç¤ºä¸å‹ç¼©å›¾ç‰‡è´¨é‡ã€‚</span><br><span class="line">    NSData *imageData = [iCocosFileCondenseTools resetSizeOfImageData:imageIcon maxSize:50];</span><br><span class="line"></span><br><span class="line">    [imageData writeToFile:iconPath atomically:YES];</span><br><span class="line"></span><br><span class="line">    AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];</span><br><span class="line">    manager.responseSerializer.acceptableContentTypes = [NSSet setWithObjects:@&quot;text/html&quot;, nil];</span><br><span class="line"></span><br><span class="line">    //    NSString *urlStrIF        = [NSString stringWithFormat:@&quot;%@file/exist%@&quot;, [iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileUrl, [iCocosURLRequestExtension getURLRequestExtension]];</span><br><span class="line">    NSMutableDictionary *dict = [NSMutableDictionary dictionary];</span><br><span class="line">    //æ–‡ä»¶çš„32ä½MD5+å‰8ä¸ªå­—èŠ‚çš„16ä½+å8ä¸ªå­—èŠ‚çš„16ä½</span><br><span class="line">    dict[@&quot;file_md5&quot;] = str64;</span><br><span class="line">    dict[@&quot;is_blur&quot;] = @(1);</span><br><span class="line">    dict[@&quot;file_size&quot;] = @([iCocosGetSize fileSizeAtPath:iconPath]);</span><br><span class="line">    dict[@&quot;ext&quot;] = @&quot;png&quot;;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     *  è¶…æ—¶æ—¶é—´</span><br><span class="line">     */</span><br><span class="line">    [manager.requestSerializer willChangeValueForKey:@&quot;timeoutInterval&quot;];</span><br><span class="line">    manager.requestSerializer.timeoutInterval = 10.f;</span><br><span class="line">    [manager.requestSerializer didChangeValueForKey:@&quot;timeoutInterval&quot;];</span><br><span class="line"></span><br><span class="line">    //    [manager POST:urlStrIF parameters:dict progress:nil success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) &#123;</span><br><span class="line"></span><br><span class="line">    [iCocosAFNPOSTRequestData iCocos_POST_HostSecurity:@&quot;file/exist&quot; hostHeaderValue:[iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileHost firstRequestWithUrl:[iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileUrl secondRequestWithIp:[iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileIp params:dict success:^(id response) &#123;</span><br><span class="line"></span><br><span class="line">        NSString *state = [NSString stringWithFormat:@&quot;%@&quot;, [response objectStringForKey:@&quot;state&quot;]];</span><br><span class="line">        NSString *msg= [NSString stringWithFormat:@&quot;%@&quot;, [response objectStringForKey:@&quot;msg&quot;]];</span><br><span class="line">        if ([state isEqualToString:@&quot;0&quot;]) &#123;</span><br><span class="line">            NSString *exist = [NSString stringWithFormat:@&quot;%@&quot;, [[response objectStringForKey:@&quot;data&quot;] objectStringForKey:@&quot;exist&quot;]];</span><br><span class="line">            /**</span><br><span class="line">             *  æ³¨æ„è¿™é‡Œéœ€è¦æ¢æˆçœŸå®æœåŠ¡å™¨åœ°å€</span><br><span class="line">             */</span><br><span class="line">            if ([exist isEqualToString:@&quot;0&quot;]) &#123; //ä¸å­˜åœ¨å°±éœ€è¦å‘é€è¯·æ±‚</span><br><span class="line">                NSString *imageUrl          = [NSString stringWithFormat:@&quot;%@file/up%@&quot;, [iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileUrl,[iCocosURLRequestExtension getURLRequestExtension]];</span><br><span class="line">                NSMutableDictionary *params = [NSMutableDictionary dictionary];</span><br><span class="line">                params[@&quot;blur&quot;]          = @(1);</span><br><span class="line"></span><br><span class="line">                AFHTTPSessionManager *mger = [AFHTTPSessionManager manager];</span><br><span class="line"></span><br><span class="line">                AFJSONResponseSerializer *response = [AFJSONResponseSerializer serializer];</span><br><span class="line">                response.removesKeysWithNullValues = YES;</span><br><span class="line">                manager.responseSerializer = response;</span><br><span class="line"></span><br><span class="line">                manager.requestSerializer = [AFHTTPRequestSerializer serializer];//å“åº”</span><br><span class="line"></span><br><span class="line">                mger.responseSerializer.acceptableContentTypes = [NSSet setWithObjects:@&quot;image/png&quot;, @&quot;text/html&quot;, nil];</span><br><span class="line"></span><br><span class="line">                /**</span><br><span class="line">                 *  è¶…æ—¶æ—¶é—´</span><br><span class="line">                 */</span><br><span class="line">                [manager.requestSerializer willChangeValueForKey:@&quot;timeoutInterval&quot;];</span><br><span class="line">                manager.requestSerializer.timeoutInterval = 10.f;</span><br><span class="line">                [manager.requestSerializer didChangeValueForKey:@&quot;timeoutInterval&quot;];</span><br><span class="line"></span><br><span class="line">                [mger POST:imageUrl parameters:params constructingBodyWithBlock:^(id&lt;AFMultipartFormData&gt; formData) &#123;</span><br><span class="line">                    // ä¸Šä¼ æ–‡ä»¶</span><br><span class="line">                    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];</span><br><span class="line">                    formatter.dateFormat       = @&quot;yyyyMMddHHmmss&quot;;</span><br><span class="line">                    NSString *str              = [formatter stringFromDate:[NSDate date]];</span><br><span class="line">                    NSString *fileName         = [NSString stringWithFormat:@&quot;%@.png&quot;, str];</span><br><span class="line"></span><br><span class="line">                    [formData appendPartWithFileData:imageData name:@&quot;file&quot; fileName:fileName mimeType:@&quot;image/png&quot;];</span><br><span class="line"></span><br><span class="line">                &#125; progress:^(NSProgress * _Nonnull uploadProgress) &#123;</span><br><span class="line"></span><br><span class="line">                    iCocosLog(@&quot;å°é¢å›¾ç‰‡================%@&quot;, uploadProgress);</span><br><span class="line"></span><br><span class="line">                &#125; success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) &#123;</span><br><span class="line"></span><br><span class="line">                    NSDictionary *dataDic    = [responseObject objectStringForKey:@&quot;data&quot;]; </span><br><span class="line"></span><br><span class="line">                    successUpload(dataDic);</span><br><span class="line"></span><br><span class="line">                    iCocosLog(@&quot;%@&quot;, responseObject);</span><br><span class="line">                &#125; failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) &#123;</span><br><span class="line">                    iCocosLog(@&quot;ä¸Šä¼ é”™è¯¯:%@&quot;, error);</span><br><span class="line"></span><br><span class="line">                    failureUpload(error);</span><br><span class="line">                &#125;];</span><br><span class="line"></span><br><span class="line">            &#125; else &#123;</span><br><span class="line"></span><br><span class="line">                NSDictionary *dataDic    = [response objectStringForKey:@&quot;data&quot;];</span><br><span class="line"></span><br><span class="line">                successUpload(dataDic);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            successUpload(response);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; failure:^(NSError *error) &#123;</span><br><span class="line">        failureUpload(error);</span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="32ï¼šä¸Šä¼ è§†é¢‘"><a href="#32ï¼šä¸Šä¼ è§†é¢‘" class="headerlink" title="32ï¼šä¸Šä¼ è§†é¢‘"></a>32ï¼šä¸Šä¼ è§†é¢‘</h2><h4 id="ä¸Šä¼ MOV"><a href="#ä¸Šä¼ MOV" class="headerlink" title="ä¸Šä¼ MOV"></a>ä¸Šä¼ MOV</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">+ (void)updateMOVVideo:(NSURL *)url successUpload:(void (^)(id responseObject))successUpload failureUpload:(void (^)(NSError *error))failureUpload;</span><br><span class="line">&#123;</span><br><span class="line">    //ä¿å­˜æ•°æ®</span><br><span class="line">    //    NSUserDefaults *defaults =[NSUserDefaults standardUserDefaults];</span><br><span class="line">    //    NSURL *url = [defaults URLForKey:@&quot;RecordVideoUrl&quot;];</span><br><span class="line"></span><br><span class="line">    NSData *videoData = [NSData dataWithContentsOfURL:url];</span><br><span class="line"></span><br><span class="line">    //   NSString *videoUrl = [iCocosUpLoadVideoTools upLoadVideoGetVideoUrlWithFileUrlInSandbox:url];</span><br><span class="line"></span><br><span class="line">    //    NSString *strUrl = [NSString stringWithContentsOfURL:url usedEncoding:0 error:nil];</span><br><span class="line"></span><br><span class="line">    //    //1:æ–‡ä»¶çš„32ä½MD5å€¼</span><br><span class="line">    //    NSString *strForEight = [iCocosFormatFileGetEight getStringWithEight:strUrl];</span><br><span class="line">    //</span><br><span class="line">    //    //2:æ–‡ä»¶çš„å‰8ä¸ªå­—èŠ‚çš„16ä½+æ–‡ä»¶çš„å8ä¸ªå­—èŠ‚çš„16ä½</span><br><span class="line">    //    NSString *str32MD5 = [NSString getMd5_32Bit_String:strUrl];</span><br><span class="line"></span><br><span class="line">    NSString *str32MD5 = [iCocosRandomSix getSixRandom];</span><br><span class="line"></span><br><span class="line">    NSString *str64 = [NSString stringWithFormat:@&quot;%@%@&quot;, str32MD5,str32MD5];</span><br><span class="line"></span><br><span class="line">    AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];</span><br><span class="line">    manager.responseSerializer.acceptableContentTypes = [NSSet setWithObjects:@&quot;text/html&quot;, nil];</span><br><span class="line"></span><br><span class="line">    //    NSString *urlStrIF = [NSString stringWithFormat:@&quot;%@file/exist%@&quot;, [iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileUrl, [iCocosURLRequestExtension getURLRequestExtension]];</span><br><span class="line">    NSMutableDictionary *dict = [NSMutableDictionary dictionary];</span><br><span class="line">    dict[@&quot;file_md5&quot;] = str64;</span><br><span class="line">    dict[@&quot;is_blur&quot;] = 0;</span><br><span class="line">    dict[@&quot;file_size&quot;] = @([iCocosGetSize fileSizeAtPath:[url absoluteString]]);</span><br><span class="line">    dict[@&quot;ext&quot;] = @&quot;MOV&quot;;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     *  è¶…æ—¶æ—¶é—´</span><br><span class="line">     */</span><br><span class="line">    [manager.requestSerializer willChangeValueForKey:@&quot;timeoutInterval&quot;];</span><br><span class="line">    manager.requestSerializer.timeoutInterval = 10.f;</span><br><span class="line">    [manager.requestSerializer didChangeValueForKey:@&quot;timeoutInterval&quot;];</span><br><span class="line"></span><br><span class="line">    /** è·å–è§†é¢‘æ˜¯å¦ä¸Šä¼  */</span><br><span class="line">    //    [manager POST:urlStrIF parameters:dict progress:nil success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) &#123;</span><br><span class="line"></span><br><span class="line">    [iCocosAFNPOSTRequestData iCocos_POST_HostSecurity:@&quot;file/exist&quot; hostHeaderValue:[iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileHost firstRequestWithUrl:[iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileUrl secondRequestWithIp:[iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileIp params:dict success:^(id response) &#123;</span><br><span class="line"></span><br><span class="line">        NSString *state = [NSString stringWithFormat:@&quot;%@&quot;, [response objectStringForKey:@&quot;state&quot;]];</span><br><span class="line">        if ([state isEqualToString:@&quot;0&quot;]) &#123;</span><br><span class="line">            NSString *exist = [response objectStringForKey:@&quot;exist&quot;];</span><br><span class="line">            /**</span><br><span class="line">             *  æ³¨æ„è¿™é‡Œéœ€è¦æ¢æˆçœŸå®æœåŠ¡å™¨åœ°å€</span><br><span class="line">             */</span><br><span class="line">            if (exist == 0) &#123; //ä¸å­˜åœ¨å°±éœ€è¦å‘é€è¯·æ±‚</span><br><span class="line">                NSString *vidUrl = [NSString stringWithFormat:@&quot;%@file/up%@&quot;, [iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileUrl, [iCocosURLRequestExtension getURLRequestExtension]];</span><br><span class="line">                NSMutableDictionary *params = [NSMutableDictionary dictionary];</span><br><span class="line">                //            params[@&quot;name:file&quot;] = @&quot;&quot;; //Content-Disposition: form-data; name=&quot;file&quot;; filename=&quot;1.txt&quot;</span><br><span class="line">                params[@&quot;is_blur&quot;] = @0;</span><br><span class="line">                params[@&quot;need_mp4&quot;] = @1;</span><br><span class="line">                AFHTTPSessionManager *mger = [AFHTTPSessionManager manager];</span><br><span class="line"></span><br><span class="line">                AFJSONResponseSerializer *response = [AFJSONResponseSerializer serializer];</span><br><span class="line">                response.removesKeysWithNullValues = YES;</span><br><span class="line">                manager.responseSerializer = response;</span><br><span class="line"></span><br><span class="line">                manager.requestSerializer = [AFHTTPRequestSerializer serializer];//å“åº”</span><br><span class="line"></span><br><span class="line">                [mger.securityPolicy setAllowInvalidCertificates:YES];</span><br><span class="line"></span><br><span class="line">                /** ä¸Šä¼ è§†é¢‘ */</span><br><span class="line">                [mger POST:vidUrl parameters:params constructingBodyWithBlock:^(id&lt;AFMultipartFormData&gt; formData) &#123;</span><br><span class="line"></span><br><span class="line">                    // ä¸Šä¼ æ–‡ä»¶</span><br><span class="line">                    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];</span><br><span class="line">                    formatter.dateFormat = @&quot;yyyyMMddHHmmss&quot;;</span><br><span class="line">                    NSString *str = [formatter stringFromDate:[NSDate date]];</span><br><span class="line">                    NSString *fileName = [NSString stringWithFormat:@&quot;%@.mov&quot;, str];</span><br><span class="line"></span><br><span class="line">                    if (videoData != nil) &#123;</span><br><span class="line">                        [formData appendPartWithFileData:videoData name:@&quot;file&quot; fileName:fileName mimeType:@&quot;video/quicktime&quot;];</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125; progress:^(NSProgress * _Nonnull uploadProgress) &#123;</span><br><span class="line"></span><br><span class="line">//                    iCocosLog(@&quot;%@&quot;, uploadProgress);</span><br><span class="line"></span><br><span class="line">                &#125; success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) &#123;</span><br><span class="line"></span><br><span class="line">                    NSString *state = [NSString stringWithFormat:@&quot;%@&quot;, [responseObject objectStringForKey:@&quot;state&quot;]];</span><br><span class="line">                    if ([state isEqualToString:@&quot;0&quot;]) &#123;</span><br><span class="line"></span><br><span class="line">                        NSDictionary *dataDic = [responseObject objectStringForKey:@&quot;data&quot;];</span><br><span class="line"></span><br><span class="line">                        successUpload(dataDic);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125; failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) &#123;</span><br><span class="line">                    iCocosLog(@&quot;ä¸Šä¼ é”™è¯¯:%@&quot;, error);</span><br><span class="line">                    failureUpload(error);</span><br><span class="line">                &#125;];</span><br><span class="line"></span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                /**</span><br><span class="line">                 *  å·²ç»ä¸Šä¼ </span><br><span class="line">                 */</span><br><span class="line">                NSDictionary *dataDic    = [response objectStringForKey:@&quot;data&quot;];</span><br><span class="line">                NSString *file_url       = [NSString stringWithFormat:@&quot;%@&quot;, [dataDic objectStringForKey:@&quot;file_url&quot;]];</span><br><span class="line">                NSString *mp4_file_url       = [NSString stringWithFormat:@&quot;%@&quot;, [dataDic objectStringForKey:@&quot;mp4_file_url&quot;]];</span><br><span class="line"></span><br><span class="line">                NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];</span><br><span class="line">                [defaults setValue:file_url forKey:@&quot;video_url&quot;];</span><br><span class="line">                [defaults setValue:mp4_file_url forKey:@&quot;mp4_file_url&quot;];</span><br><span class="line">                [defaults synchronize];</span><br><span class="line"></span><br><span class="line">                successUpload(dataDic);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            successUpload(response);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; failure:^(NSError *error) &#123; //ä¸Šä¼ é”™è¯¯</span><br><span class="line">        failureUpload(error);</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä¸Šä¼ MP4"><a href="#ä¸Šä¼ MP4" class="headerlink" title="ä¸Šä¼ MP4"></a>ä¸Šä¼ MP4</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line">+ (void)updateMP4Video:(NSURL *)url successUpload:(void (^)(id responseObject))successUpload failureUpload:(void (^)(NSError *error))failureUpload</span><br><span class="line">&#123;</span><br><span class="line">    //ä¿å­˜æ•°æ®</span><br><span class="line">    //    NSUserDefaults *defaults =[NSUserDefaults standardUserDefaults];</span><br><span class="line">    //    NSURL *url = [defaults URLForKey:@&quot;RecordVideoUrl&quot;];</span><br><span class="line"></span><br><span class="line">    NSData *videoData = [NSData dataWithContentsOfURL:url];</span><br><span class="line"></span><br><span class="line">    //   NSString *videoUrl = [iCocosUpLoadVideoTools upLoadVideoGetVideoUrlWithFileUrlInSandbox:url];</span><br><span class="line"></span><br><span class="line">    //    NSString *strUrl = [NSString stringWithContentsOfURL:url usedEncoding:0 error:nil];</span><br><span class="line"></span><br><span class="line">    //    //1:æ–‡ä»¶çš„32ä½MD5å€¼</span><br><span class="line">    //    NSString *strForEight = [iCocosFormatFileGetEight getStringWithEight:strUrl];</span><br><span class="line">    //</span><br><span class="line">    //    //2:æ–‡ä»¶çš„å‰8ä¸ªå­—èŠ‚çš„16ä½+æ–‡ä»¶çš„å8ä¸ªå­—èŠ‚çš„16ä½</span><br><span class="line">    //    NSString *str32MD5 = [NSString getMd5_32Bit_String:strUrl];</span><br><span class="line"></span><br><span class="line">    NSString *str32MD5 = [iCocosRandomSix getSixRandom];</span><br><span class="line"></span><br><span class="line">    NSString *str64 = [NSString stringWithFormat:@&quot;%@%@&quot;, str32MD5,str32MD5];</span><br><span class="line"></span><br><span class="line">    AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];</span><br><span class="line">    manager.responseSerializer.acceptableContentTypes = [NSSet setWithObjects:@&quot;text/html&quot;, nil];</span><br><span class="line"></span><br><span class="line">    //    NSString *urlStrIF = [NSString stringWithFormat:@&quot;%@file/exist%@&quot;, [iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileUrl, [iCocosURLRequestExtension getURLRequestExtension]];</span><br><span class="line">    NSMutableDictionary *dict = [NSMutableDictionary dictionary];</span><br><span class="line">    dict[@&quot;file_md5&quot;] = str64;</span><br><span class="line">    dict[@&quot;is_blur&quot;] = 0;</span><br><span class="line">    dict[@&quot;file_size&quot;] = @([iCocosGetSize fileSizeAtPath:[url absoluteString]]);</span><br><span class="line">    dict[@&quot;ext&quot;] = @&quot;mp4&quot;;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     *  è¶…æ—¶æ—¶é—´</span><br><span class="line">     */</span><br><span class="line">    [manager.requestSerializer willChangeValueForKey:@&quot;timeoutInterval&quot;];</span><br><span class="line">    manager.requestSerializer.timeoutInterval = 10.f;</span><br><span class="line">    [manager.requestSerializer didChangeValueForKey:@&quot;timeoutInterval&quot;];</span><br><span class="line"></span><br><span class="line">    /** è·å–è§†é¢‘æ˜¯å¦ä¸Šä¼  */</span><br><span class="line">    //    [manager POST:urlStrIF parameters:dict progress:nil success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) &#123;</span><br><span class="line"></span><br><span class="line">    [iCocosAFNPOSTRequestData iCocos_POST_HostSecurity:@&quot;file/exist&quot; hostHeaderValue:[iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileHost firstRequestWithUrl:[iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileUrl secondRequestWithIp:[iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileIp params:dict success:^(id response) &#123;</span><br><span class="line"></span><br><span class="line">        NSString *state = [NSString stringWithFormat:@&quot;%@&quot;, [response objectStringForKey:@&quot;state&quot;]];</span><br><span class="line">        if ([state isEqualToString:@&quot;0&quot;]) &#123;</span><br><span class="line">            NSString *exist = [response objectStringForKey:@&quot;exist&quot;];</span><br><span class="line">            /**</span><br><span class="line">             *  æ³¨æ„è¿™é‡Œéœ€è¦æ¢æˆçœŸå®æœåŠ¡å™¨åœ°å€</span><br><span class="line">             */</span><br><span class="line">            if (exist == 0) &#123; //ä¸å­˜åœ¨å°±éœ€è¦å‘é€è¯·æ±‚</span><br><span class="line">                NSString *vidUrl = [NSString stringWithFormat:@&quot;%@file/up%@&quot;, [iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileUrl, [iCocosURLRequestExtension getURLRequestExtension]];</span><br><span class="line">                NSMutableDictionary *params = [NSMutableDictionary dictionary];</span><br><span class="line">                //            params[@&quot;name:file&quot;] = @&quot;&quot;; //Content-Disposition: form-data; name=&quot;file&quot;; filename=&quot;1.txt&quot;</span><br><span class="line">                params[@&quot;is_blur&quot;] = @0;</span><br><span class="line">                params[@&quot;need_mp4&quot;] = @1;</span><br><span class="line">                AFHTTPSessionManager *mger = [AFHTTPSessionManager manager];</span><br><span class="line"></span><br><span class="line">                AFJSONResponseSerializer *response = [AFJSONResponseSerializer serializer];</span><br><span class="line">                response.removesKeysWithNullValues = YES;</span><br><span class="line">                manager.responseSerializer = response;</span><br><span class="line"></span><br><span class="line">                manager.requestSerializer = [AFHTTPRequestSerializer serializer];//å“åº”</span><br><span class="line"></span><br><span class="line">                [mger.securityPolicy setAllowInvalidCertificates:YES];</span><br><span class="line"></span><br><span class="line">                /** ä¸Šä¼ è§†é¢‘ */</span><br><span class="line">                [mger POST:vidUrl parameters:params constructingBodyWithBlock:^(id&lt;AFMultipartFormData&gt; formData) &#123;</span><br><span class="line"></span><br><span class="line">                    // ä¸Šä¼ æ–‡ä»¶</span><br><span class="line">                    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];</span><br><span class="line">                    formatter.dateFormat = @&quot;yyyyMMddHHmmss&quot;;</span><br><span class="line">                    NSString *str = [formatter stringFromDate:[NSDate date]];</span><br><span class="line">                    NSString *fileName = [NSString stringWithFormat:@&quot;%@.mp4&quot;, str];</span><br><span class="line"></span><br><span class="line">                    if (videoData != nil) &#123;</span><br><span class="line">                        [formData appendPartWithFileData:videoData name:@&quot;file&quot; fileName:fileName mimeType:@&quot;video/mp4&quot;];</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125; progress:^(NSProgress * _Nonnull uploadProgress) &#123;</span><br><span class="line"></span><br><span class="line">//                    iCocosLog(@&quot;%@&quot;, uploadProgress);</span><br><span class="line"></span><br><span class="line">                &#125; success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) &#123;</span><br><span class="line"></span><br><span class="line">                    NSString *state = [NSString stringWithFormat:@&quot;%@&quot;, [responseObject objectStringForKey:@&quot;state&quot;]];</span><br><span class="line">                    if ([state isEqualToString:@&quot;0&quot;]) &#123;</span><br><span class="line"></span><br><span class="line">                        NSDictionary *dataDic = [responseObject objectStringForKey:@&quot;data&quot;];</span><br><span class="line"></span><br><span class="line">                        successUpload(dataDic);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125; failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) &#123;</span><br><span class="line">                    iCocosLog(@&quot;ä¸Šä¼ é”™è¯¯:%@&quot;, error);</span><br><span class="line">                    failureUpload(error);</span><br><span class="line">                &#125;];</span><br><span class="line"></span><br><span class="line">            &#125; else &#123;</span><br><span class="line"></span><br><span class="line">                /**</span><br><span class="line">                 *  å·²ç»ä¸Šä¼ </span><br><span class="line">                 */</span><br><span class="line">                NSDictionary *dataDic    = [response objectStringForKey:@&quot;data&quot;];</span><br><span class="line">                NSString *file_url       = [NSString stringWithFormat:@&quot;%@&quot;, [dataDic objectStringForKey:@&quot;file_url&quot;]];</span><br><span class="line">                NSString *mp4_file_url       = [NSString stringWithFormat:@&quot;%@&quot;, [dataDic objectStringForKey:@&quot;mp4_file_url&quot;]];</span><br><span class="line"></span><br><span class="line">                NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];</span><br><span class="line">                [defaults setValue:file_url forKey:@&quot;video_url&quot;];</span><br><span class="line">                [defaults setValue:mp4_file_url forKey:@&quot;mp4_file_url&quot;];</span><br><span class="line">                [defaults synchronize];</span><br><span class="line"></span><br><span class="line">                successUpload(dataDic);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            successUpload(response);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; failure:^(NSError *error) &#123; //ä¸Šä¼ é”™è¯¯</span><br><span class="line">        failureUpload(error);</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="33-è·å–è§†é¢‘å¸§å›¾"><a href="#33-è·å–è§†é¢‘å¸§å›¾" class="headerlink" title="33:è·å–è§†é¢‘å¸§å›¾"></a>33:è·å–è§†é¢‘å¸§å›¾</h2><h4 id="åŒæ­¥è·å–å¸§å›¾"><a href="#åŒæ­¥è·å–å¸§å›¾" class="headerlink" title="åŒæ­¥è·å–å¸§å›¾"></a>åŒæ­¥è·å–å¸§å›¾</h4><p>åŒæ­¥è·å–ä¸­é—´å¸§ï¼Œéœ€è¦æŒ‡å®šå“ªä¸ªæ—¶é—´ç‚¹çš„å¸§ï¼Œå½“è·å–åˆ°ä»¥åï¼Œè¿”å›æ¥çš„å›¾ç‰‡å¯¹è±¡æ˜¯CFRetainedè¿‡çš„ï¼Œéœ€è¦å¤–é¢æ‰‹åŠ¨CGImageReleaseä¸€ä¸‹ï¼Œé‡Šæ”¾å†…å­˜ã€‚é€šè¿‡AVAssetæ¥è®¿é—®å…·ä½“çš„è§†é¢‘èµ„æºï¼Œç„¶åé€šè¿‡AVAssetImageGeneratorå›¾ç‰‡ç”Ÿæˆå™¨æ¥ç”ŸæˆæŸä¸ªå¸§å›¾ç‰‡ï¼š // Get the videoâ€™s center frame as video poster image - (UIImage <em>)frameImageFromVideoURL:(NSURL</em> )videoURL { // result UIImage *image = nil;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">  // AVAssetImageGenerator</span><br><span class="line">  AVAsset *asset = [AVAsset assetWithURL:videoURL];</span><br><span class="line">  AVAssetImageGenerator *imageGenerator = [[AVAssetImageGenerator alloc] initWithAsset:asset];</span><br><span class="line">  imageGenerator.appliesPreferredTrackTransform = YES;</span><br><span class="line"></span><br><span class="line">  // calculate the midpoint time of video</span><br><span class="line">  Float64 duration = CMTimeGetSeconds([asset duration]);</span><br><span class="line">  // å–æŸä¸ªå¸§çš„æ—¶é—´ï¼Œå‚æ•°ä¸€è¡¨ç¤ºå“ªä¸ªæ—¶é—´ï¼ˆç§’ï¼‰ï¼Œå‚æ•°äºŒè¡¨ç¤ºæ¯ç§’å¤šå°‘å¸§</span><br><span class="line">  // é€šå¸¸æ¥è¯´ï¼Œ600æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„å…¬å…±å‚æ•°ï¼Œè‹¹æœæœ‰è¯´æ˜:</span><br><span class="line">  // 24 frames per second (fps) for film, 30 fps for NTSC (used for TV in North America and</span><br><span class="line">  // Japan), and 25 fps for PAL (used for TV in Europe).</span><br><span class="line">  // Using a timescale of 600, you can exactly represent any number of frames in these systems</span><br><span class="line">  CMTime midpoint = CMTimeMakeWithSeconds(duration / 2.0, 600);</span><br><span class="line"></span><br><span class="line">  // get the image from</span><br><span class="line">  NSError *error = nil;</span><br><span class="line">  CMTime actualTime;</span><br><span class="line">  // Returns a CFRetained CGImageRef for an asset at or near the specified time.</span><br><span class="line">  // So we should mannully release it</span><br><span class="line">  CGImageRef centerFrameImage = [imageGenerator copyCGImageAtTime:midpoint</span><br><span class="line">                                                       actualTime:&amp;actualTime</span><br><span class="line">                                                            error:&amp;error];</span><br><span class="line"></span><br><span class="line">  if (centerFrameImage != NULL) &#123;</span><br><span class="line">    image = [[UIImage alloc] initWithCGImage:centerFrameImage];</span><br><span class="line">    // Release the CFRetained image</span><br><span class="line">    CGImageRelease(centerFrameImage);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return image;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¼‚æ­¥è·å–å¸§å›¾"><a href="#å¼‚æ­¥è·å–å¸§å›¾" class="headerlink" title="å¼‚æ­¥è·å–å¸§å›¾"></a>å¼‚æ­¥è·å–å¸§å›¾</h4><p>å¼‚æ­¥è·å–æŸä¸ªå¸§çš„å›¾ç‰‡ï¼Œä¸åŒæ­¥ç›¸æ¯”ï¼Œåªæ˜¯è°ƒç”¨APIä¸åŒï¼Œå¯ä»¥ä¼ å¤šä¸ªæ—¶é—´ç‚¹ï¼Œç„¶åè®¡ç®—å‡ºå®é™…çš„æ—¶é—´å¹¶è¿”å›å›¾ç‰‡ï¼Œä½†æ˜¯è¿”å›çš„å›¾ç‰‡ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å†releaseäº†ã€‚æœ‰å¯èƒ½å–ä¸åˆ°å›¾ç‰‡ï¼Œæ‰€ä»¥è¿˜éœ€è¦åˆ¤æ–­æ˜¯å¦æ˜¯AVAssetImageGeneratorSucceededï¼Œæ˜¯æ‰è½¬æ¢å›¾ç‰‡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">// å¼‚æ­¥è·å–å¸§å›¾ç‰‡ï¼Œå¯ä»¥ä¸€æ¬¡è·å–å¤šå¸§å›¾ç‰‡</span><br><span class="line">- (void)centerFrameImageWithVideoURL:(NSURL *)videoURL completion:(void (^)(UIImage *image))completion &#123;</span><br><span class="line">  // AVAssetImageGenerator</span><br><span class="line">  AVAsset *asset = [AVAsset assetWithURL:videoURL];</span><br><span class="line">  AVAssetImageGenerator *imageGenerator = [[AVAssetImageGenerator alloc] initWithAsset:asset];</span><br><span class="line">  imageGenerator.appliesPreferredTrackTransform = YES;</span><br><span class="line"></span><br><span class="line">  // calculate the midpoint time of video</span><br><span class="line">  Float64 duration = CMTimeGetSeconds([asset duration]);</span><br><span class="line">  // å–æŸä¸ªå¸§çš„æ—¶é—´ï¼Œå‚æ•°ä¸€è¡¨ç¤ºå“ªä¸ªæ—¶é—´ï¼ˆç§’ï¼‰ï¼Œå‚æ•°äºŒè¡¨ç¤ºæ¯ç§’å¤šå°‘å¸§</span><br><span class="line">  // é€šå¸¸æ¥è¯´ï¼Œ600æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„å…¬å…±å‚æ•°ï¼Œè‹¹æœæœ‰è¯´æ˜:</span><br><span class="line">  // 24 frames per second (fps) for film, 30 fps for NTSC (used for TV in North America and</span><br><span class="line">  // Japan), and 25 fps for PAL (used for TV in Europe).</span><br><span class="line">  // Using a timescale of 600, you can exactly represent any number of frames in these systems</span><br><span class="line">  CMTime midpoint = CMTimeMakeWithSeconds(duration / 2.0, 600);</span><br><span class="line"></span><br><span class="line">  // å¼‚æ­¥è·å–å¤šå¸§å›¾ç‰‡</span><br><span class="line">  NSValue *midTime = [NSValue valueWithCMTime:midpoint];</span><br><span class="line">  [imageGenerator generateCGImagesAsynchronouslyForTimes:@[midTime] completionHandler:^(CMTime requestedTime, CGImageRef  _Nullable image, CMTime actualTime, AVAssetImageGeneratorResult result, NSError * _Nullable error) &#123;</span><br><span class="line">    if (result == AVAssetImageGeneratorSucceeded &amp;&amp; image != NULL) &#123;</span><br><span class="line">      UIImage *centerFrameImage = [[UIImage alloc] initWithCGImage:image];</span><br><span class="line">      dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        if (completion) &#123;</span><br><span class="line">          completion(centerFrameImage);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        if (completion) &#123;</span><br><span class="line">          completion(nil);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="34-å‹ç¼©å¹¶å¯¼å‡ºè§†é¢‘"><a href="#34-å‹ç¼©å¹¶å¯¼å‡ºè§†é¢‘" class="headerlink" title="34:å‹ç¼©å¹¶å¯¼å‡ºè§†é¢‘"></a>34:å‹ç¼©å¹¶å¯¼å‡ºè§†é¢‘</h2><p>å‹ç¼©è§†é¢‘æ˜¯å› ä¸ºè§†é¢‘åˆ†è¾¨ç‡è¿‡é«˜æ‰€ç”Ÿæˆçš„è§†é¢‘çš„å¤§å°å¤ªå¤§äº†ï¼Œå¯¹äºç§»åŠ¨è®¾å¤‡æ¥è¯´ï¼Œå†…å­˜æ˜¯ä¸èƒ½å¤ªå¤§çš„ï¼Œå¦‚æœä¸æ”¯æŒåˆ†ç‰‡ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæˆ–è€…ä¸æ”¯æŒæµä¸Šä¼ ã€æ–‡ä»¶ä¸Šä¼ ï¼Œè€Œåªèƒ½æ”¯æŒè¡¨å•ä¸Šä¼ ï¼Œé‚£ä¹ˆå¿…é¡»è¦é™åˆ¶å¤§å°ï¼Œå‹ç¼©è§†é¢‘ã€‚</p>
<p>å°±åƒæˆ‘ä»¬åœ¨ä½¿ç”¨æŸå¹³å°çš„è§†é¢‘çš„ä¸Šä¼ çš„æ—¶å€™ï¼Œåˆ°ç°åœ¨è¿˜æ²¡æœ‰æ”¯æŒæµä¸Šä¼ ï¼Œä¹Ÿä¸æ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼Œåªæ”¯æŒè¡¨å•ä¸Šä¼ ï¼Œå¯¼è‡´è§†é¢‘å¤§ä¸€ç‚¹å°±ä¼šé—ªé€€ã€‚æµä¸Šä¼ æ˜¯ä¸Šä¼ æˆåŠŸäº†ï¼Œä½†æ˜¯äººå®¶åå°ä¸è¯†åˆ«ï¼Œè¿™ä¸€æ¬¡è®©æŸå¹³å°å‘åäº†ã€‚ç›´æ¥ç”¨fileä¸Šä¼ ï¼Œä¹Ÿä¼ è¿‡å»äº†ï¼Œä¸Šä¼ è¿›åº¦100%äº†ï¼Œä½†æ˜¯äººå®¶é‚£è¾¹è¿˜æ˜¯ä½œä¸ºå¤±è´¥å¤„ç†ï¼Œæ— å¥ˆï¼</p>
<blockquote>
<p>è¨€å½’æ­£ä¼ ï¼Œå‹ç¼©ã€å¯¼å‡ºè§†é¢‘ï¼Œéœ€è¦é€šè¿‡AVAssetExportSessionæ¥å®ç°ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šä¸€ä¸ªpresetï¼Œå¹¶åˆ¤æ–­æ˜¯å¦æ”¯æŒè¿™ä¸ªpresetï¼Œåªæœ‰æ”¯æŒæ‰èƒ½ä½¿ç”¨ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬è¿™é‡Œè®¾ç½®çš„presetä¸ºAVAssetExportPreset640x480ï¼Œå±äºå‹ç¼©å¾—æ¯”è¾ƒå‰å®³çš„äº†ï¼Œè¿™éœ€è¦æ ¹æ®æœåŠ¡å™¨è§†é¢‘ä¸Šä¼ çš„æ”¯æŒç¨‹åº¦è€Œé€‰æ‹©çš„ã€‚ç„¶åé€šè¿‡è°ƒç”¨å¼‚æ­¥å‹ç¼©å¹¶å¯¼å‡ºè§†é¢‘ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">- (void)compressVideoWithVideoURL:(NSURL *)videoURL</span><br><span class="line">                        savedName:(NSString *)savedName</span><br><span class="line">                       completion:(void (^)(NSString *savedPath))completion &#123;</span><br><span class="line">  // Accessing video by URL</span><br><span class="line">  AVURLAsset *videoAsset = [[AVURLAsset alloc] initWithURL:videoURL options:nil];</span><br><span class="line"></span><br><span class="line">  // Find compatible presets by video asset.</span><br><span class="line">  NSArray *presets = [AVAssetExportSession exportPresetsCompatibleWithAsset:videoAsset];</span><br><span class="line"></span><br><span class="line">  // Begin to compress video</span><br><span class="line">  // Now we just compress to low resolution if it supports</span><br><span class="line">  // If you need to upload to the server, but server does&apos;t support to upload by streaming,</span><br><span class="line">  // You can compress the resolution to lower. Or you can support more higher resolution.</span><br><span class="line">  if ([presets containsObject:AVAssetExportPreset640x480]) &#123;</span><br><span class="line">    AVAssetExportSession *session = [[AVAssetExportSession alloc] initWithAsset:videoAsset  presetName:AVAssetExportPreset640x480];</span><br><span class="line"></span><br><span class="line">    NSString *doc = [NSHomeDirectory() stringByAppendingPathComponent:@&quot;Documents&quot;];</span><br><span class="line">    NSString *folder = [doc stringByAppendingPathComponent:@&quot;HYBVideos&quot;];</span><br><span class="line">    BOOL isDir = NO;</span><br><span class="line">    BOOL isExist = [[NSFileManager defaultManager] fileExistsAtPath:folder isDirectory:&amp;isDir];</span><br><span class="line">    if (!isExist || (isExist &amp;&amp; !isDir)) &#123;</span><br><span class="line">      NSError *error = nil;</span><br><span class="line">      [[NSFileManager defaultManager] createDirectoryAtPath:folder</span><br><span class="line">                                withIntermediateDirectories:YES</span><br><span class="line">                                                 attributes:nil</span><br><span class="line">                                                      error:&amp;error];</span><br><span class="line">      if (error == nil) &#123;</span><br><span class="line">        NSLog(@&quot;ç›®å½•åˆ›å»ºæˆåŠŸ&quot;);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        NSLog(@&quot;ç›®å½•åˆ›å»ºå¤±è´¥&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    NSString *outPutPath = [folder stringByAppendingPathComponent:savedName];</span><br><span class="line">    session.outputURL = [NSURL fileURLWithPath:outPutPath];</span><br><span class="line"></span><br><span class="line">    // Optimize for network use.</span><br><span class="line">    session.shouldOptimizeForNetworkUse = true;</span><br><span class="line"></span><br><span class="line">    NSArray *supportedTypeArray = session.supportedFileTypes;</span><br><span class="line">    if ([supportedTypeArray containsObject:AVFileTypeMPEG4]) &#123;</span><br><span class="line">      session.outputFileType = AVFileTypeMPEG4;</span><br><span class="line">    &#125; else if (supportedTypeArray.count == 0) &#123;</span><br><span class="line">      NSLog(@&quot;No supported file types&quot;);</span><br><span class="line">      return;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      session.outputFileType = [supportedTypeArray objectAtIndex:0];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Begin to export video to the output path asynchronously.</span><br><span class="line">    [session exportAsynchronouslyWithCompletionHandler:^&#123;</span><br><span class="line">      if ([session status] == AVAssetExportSessionStatusCompleted) &#123;</span><br><span class="line">        dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">          if (completion) &#123;</span><br><span class="line">            completion([session.outputURL path]);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">          if (completion) &#123;</span><br><span class="line">            completion(nil);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="35-ä¿å­˜è§†é¢‘åˆ°ç›¸å†Œ"><a href="#35-ä¿å­˜è§†é¢‘åˆ°ç›¸å†Œ" class="headerlink" title="35:ä¿å­˜è§†é¢‘åˆ°ç›¸å†Œ"></a>35:ä¿å­˜è§†é¢‘åˆ°ç›¸å†Œ</h2><p>å†™å…¥ç›¸å†Œå¯ä»¥é€šè¿‡ALAssetsLibraryç±»æ¥å®ç°ï¼Œå®ƒæä¾›äº†å†™å…¥ç›¸å†Œçš„APIï¼Œå¼‚æ­¥å†™å…¥ï¼Œå®Œæˆæ˜¯è¦å›åˆ°ä¸»çº¿ç¨‹æ›´æ–°UIï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];</span><br><span class="line">ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];</span><br><span class="line">dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;</span><br><span class="line">  // åˆ¤æ–­ç›¸å†Œæ˜¯å¦å…¼å®¹è§†é¢‘ï¼Œå…¼å®¹æ‰èƒ½ä¿å­˜åˆ°ç›¸å†Œ</span><br><span class="line">  if ([library videoAtPathIsCompatibleWithSavedPhotosAlbum:videoURL]) &#123;</span><br><span class="line">    [library writeVideoAtPathToSavedPhotosAlbum:videoURL completionBlock:^(NSURL *assetURL, NSError *error) &#123;</span><br><span class="line">      dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        // å†™å…¥ç›¸å†Œ</span><br><span class="line">        if (error == nil) &#123;</span><br><span class="line">            NSLog(@&quot;å†™å…¥ç›¸å†ŒæˆåŠŸ&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">           NSLog(@&quot;å†™å…¥ç›¸å†Œå¤±è´¥&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="36-è·å–å½“å‰æœ€é¡¶å±‚çš„ViewController"><a href="#36-è·å–å½“å‰æœ€é¡¶å±‚çš„ViewController" class="headerlink" title="36:è·å–å½“å‰æœ€é¡¶å±‚çš„ViewController"></a>36:è·å–å½“å‰æœ€é¡¶å±‚çš„ViewController</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    - (UIViewController *)topViewController &#123;</span><br><span class="line">    UIViewController *resultVC;</span><br><span class="line">    resultVC = [self _topViewController:[[UIApplication sharedApplication].keyWindow rootViewController]];</span><br><span class="line">    while (resultVC.presentedViewController) &#123;</span><br><span class="line">        resultVC = [self _topViewController:resultVC.presentedViewController];</span><br><span class="line">    &#125;</span><br><span class="line">    return resultVC;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (UIViewController *)_topViewController:(UIViewController *)vc &#123;</span><br><span class="line">    if ([vc isKindOfClass:[UINavigationController class]]) &#123;</span><br><span class="line">        return [self _topViewController:[(UINavigationController *)vc topViewController]];</span><br><span class="line">    &#125; else if ([vc isKindOfClass:[UITabBarController class]]) &#123;</span><br><span class="line">        return [self _topViewController:[(UITabBarController *)vc selectedViewController]];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        return vc;</span><br><span class="line">    &#125;</span><br><span class="line">    return nil;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UIViewController *topmostVC = [self topViewController];</span><br></pre></td></tr></table></figure>
<h2 id="37-æ•°ç»„æ‹†åˆ†"><a href="#37-æ•°ç»„æ‹†åˆ†" class="headerlink" title="37:æ•°ç»„æ‹†åˆ†"></a>37:æ•°ç»„æ‹†åˆ†</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> *  æ•°ç»„æ‹†åˆ†</span><br><span class="line"> *</span><br><span class="line"> *  @param array   æ•°ç»„</span><br><span class="line"> *  @param subSize å¤§å°</span><br><span class="line"> *</span><br><span class="line"> *  @return å¤šä¸ªæ•°ç»„</span><br><span class="line"> */</span><br><span class="line">- (NSMutableArray *)splitArray: (NSArray *)array withSubSize : (int)subSize&#123;</span><br><span class="line">    //  æ•°ç»„å°†è¢«æ‹†åˆ†æˆæŒ‡å®šé•¿åº¦æ•°ç»„çš„ä¸ªæ•°</span><br><span class="line">    unsigned long count = array.count % subSize == 0 ? (array.count / subSize) : (array.count / subSize + 1);</span><br><span class="line">    //  ç”¨æ¥ä¿å­˜æŒ‡å®šé•¿åº¦æ•°ç»„çš„å¯å˜æ•°ç»„å¯¹è±¡</span><br><span class="line">    NSMutableArray *arr = [[NSMutableArray alloc] init];</span><br><span class="line"></span><br><span class="line">    //åˆ©ç”¨æ€»ä¸ªæ•°è¿›è¡Œå¾ªç¯ï¼Œå°†æŒ‡å®šé•¿åº¦çš„å…ƒç´ åŠ å…¥æ•°ç»„</span><br><span class="line">    for (int i = 0; i &lt; count; i ++) &#123;</span><br><span class="line">        //æ•°ç»„ä¸‹æ ‡</span><br><span class="line">        int index = i * subSize;</span><br><span class="line">        //ä¿å­˜æ‹†åˆ†çš„å›ºå®šé•¿åº¦çš„æ•°ç»„å…ƒç´ çš„å¯å˜æ•°ç»„</span><br><span class="line">        NSMutableArray *arr1 = [[NSMutableArray alloc] init];</span><br><span class="line">        //ç§»é™¤å­æ•°ç»„çš„æ‰€æœ‰å…ƒç´ </span><br><span class="line">        [arr1 removeAllObjects];</span><br><span class="line"></span><br><span class="line">        int j = index;</span><br><span class="line">        //å°†æ•°ç»„ä¸‹æ ‡ä¹˜ä»¥1ã€2ã€3ï¼Œå¾—åˆ°æ‹†åˆ†æ—¶æ•°ç»„çš„æœ€å¤§ä¸‹æ ‡å€¼ï¼Œä½†æœ€å¤§ä¸èƒ½è¶…è¿‡æ•°ç»„çš„æ€»å¤§å°</span><br><span class="line">        while (j &lt; subSize*(i + 1) &amp;&amp; j &lt; array.count) &#123;</span><br><span class="line">            [arr1 addObject:[array objectAtIndexCheck:j]];</span><br><span class="line">            j += 1;</span><br><span class="line">        &#125;</span><br><span class="line">        //å°†å­æ•°ç»„æ·»åŠ åˆ°ä¿å­˜å­æ•°ç»„çš„æ•°ç»„ä¸­</span><br><span class="line">        [arr addObject:[arr1 copy]];  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    return arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="38-å›¾ç‰‡å‹ç¼©"><a href="#38-å›¾ç‰‡å‹ç¼©" class="headerlink" title="38.å›¾ç‰‡å‹ç¼©"></a>38.å›¾ç‰‡å‹ç¼©</h2><p>ç”¨æ³•ï¼šUIImage *yourImage= [self imageWithImageSimple:image scaledToSize:CGSizeMake(210.0, 210.0)];</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">//å‹ç¼©å›¾ç‰‡</span><br><span class="line">- (UIImage*)imageWithImageSimple:(UIImage*)image scaledToSize:(CGSize)newSize</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">// Create a graphics image context</span><br><span class="line"></span><br><span class="line">UIGraphicsBeginImageContext(newSize);</span><br><span class="line"></span><br><span class="line">// Tell the old image to draw in this newcontext, with the desired</span><br><span class="line"></span><br><span class="line">// new size</span><br><span class="line"></span><br><span class="line">[image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];</span><br><span class="line"></span><br><span class="line">// Get the new image from the context</span><br><span class="line"></span><br><span class="line">UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line"></span><br><span class="line">// End the context</span><br><span class="line"></span><br><span class="line">UIGraphicsEndImageContext();</span><br><span class="line"></span><br><span class="line">// Return the new image.</span><br><span class="line"></span><br><span class="line">return newImage;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="39-é‡Šæ”¾Timerå®"><a href="#39-é‡Šæ”¾Timerå®" class="headerlink" title="39.é‡Šæ”¾Timerå®"></a>39.é‡Šæ”¾Timerå®</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * åˆ¤æ–­è¿™ä¸ªTimerä¸ä¸ºnilåˆ™åœæ­¢å¹¶é‡Šæ”¾</span><br><span class="line"> * å¦‚æœä¸å…ˆåœæ­¢å¯èƒ½ä¼šå¯¼è‡´crash</span><br><span class="line"> */</span><br><span class="line">#define WVSAFA_DELETE_TIMER(timer) &#123; \</span><br><span class="line">    if (timer != nil) &#123; \</span><br><span class="line">        [timer invalidate]; \</span><br><span class="line">        [timer release]; \</span><br><span class="line">        timer = nil; \</span><br><span class="line">    &#125; \</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è·å–æŸä¸ªviewæ‰€åœ¨çš„æ§åˆ¶å™¨"><a href="#è·å–æŸä¸ªviewæ‰€åœ¨çš„æ§åˆ¶å™¨" class="headerlink" title="è·å–æŸä¸ªviewæ‰€åœ¨çš„æ§åˆ¶å™¨"></a>è·å–æŸä¸ªviewæ‰€åœ¨çš„æ§åˆ¶å™¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- (UIViewController *)viewController</span><br><span class="line">&#123;</span><br><span class="line">  UIViewController *viewController = nil;  </span><br><span class="line">  UIResponder *next = self.nextResponder;</span><br><span class="line">  while (next)</span><br><span class="line">  &#123;</span><br><span class="line">    if ([next isKindOfClass:[UIViewController class]])</span><br><span class="line">    &#123;</span><br><span class="line">      viewController = (UIViewController *)next;      </span><br><span class="line">      break;    </span><br><span class="line">    &#125;    </span><br><span class="line">    next = next.nextResponder;  </span><br><span class="line">  &#125; </span><br><span class="line">    return viewController;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸¤ç§æ–¹æ³•åˆ é™¤NSUserDefaultsæ‰€æœ‰è®°å½•"><a href="#ä¸¤ç§æ–¹æ³•åˆ é™¤NSUserDefaultsæ‰€æœ‰è®°å½•" class="headerlink" title="ä¸¤ç§æ–¹æ³•åˆ é™¤NSUserDefaultsæ‰€æœ‰è®°å½•"></a>ä¸¤ç§æ–¹æ³•åˆ é™¤NSUserDefaultsæ‰€æœ‰è®°å½•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//æ–¹æ³•ä¸€</span><br><span class="line">NSString *appDomain = [[NSBundle mainBundle] bundleIdentifier];</span><br><span class="line">[[NSUserDefaults standardUserDefaults] removePersistentDomainForName:appDomain];</span><br><span class="line"></span><br><span class="line">//æ–¹æ³•äºŒ</span><br><span class="line">- (void)resetDefaults</span><br><span class="line">&#123;</span><br><span class="line">    NSUserDefaults * defs = [NSUserDefaults standardUserDefaults];</span><br><span class="line">    NSDictionary * dict = [defs dictionaryRepresentation];</span><br><span class="line">    for (id key in dict)</span><br><span class="line">    &#123;</span><br><span class="line">        [defs removeObjectForKey:key];</span><br><span class="line">    &#125;</span><br><span class="line">    [defs synchronize];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ‰“å°ç³»ç»Ÿæ‰€æœ‰å·²æ³¨å†Œçš„å­—ä½“åç§°"><a href="#æ‰“å°ç³»ç»Ÿæ‰€æœ‰å·²æ³¨å†Œçš„å­—ä½“åç§°" class="headerlink" title="æ‰“å°ç³»ç»Ÿæ‰€æœ‰å·²æ³¨å†Œçš„å­—ä½“åç§°"></a>æ‰“å°ç³»ç»Ÿæ‰€æœ‰å·²æ³¨å†Œçš„å­—ä½“åç§°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark - æ‰“å°ç³»ç»Ÿæ‰€æœ‰å·²æ³¨å†Œçš„å­—ä½“åç§°</span><br><span class="line">void enumerateFonts()</span><br><span class="line">&#123;</span><br><span class="line">    for(NSString *familyName in [UIFont familyNames])</span><br><span class="line">   &#123;</span><br><span class="line">        NSLog(@&quot;%@&quot;,familyName);               </span><br><span class="line">        NSArray *fontNames = [UIFont fontNamesForFamilyName:familyName];       </span><br><span class="line">        for(NSString *fontName in fontNames)</span><br><span class="line">       &#123;</span><br><span class="line">            NSLog(@&quot;\t|- %@&quot;,fontName);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è·å–å›¾ç‰‡æŸä¸€ç‚¹çš„é¢œè‰²"><a href="#è·å–å›¾ç‰‡æŸä¸€ç‚¹çš„é¢œè‰²" class="headerlink" title="è·å–å›¾ç‰‡æŸä¸€ç‚¹çš„é¢œè‰²"></a>è·å–å›¾ç‰‡æŸä¸€ç‚¹çš„é¢œè‰²</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">- (UIColor*) getPixelColorAtLocation:(CGPoint)point inImage:(UIImage *)image</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    UIColor* color = nil;</span><br><span class="line">    CGImageRef inImage = image.CGImage;</span><br><span class="line">    CGContextRef cgctx = [self createARGBBitmapContextFromImage:inImage];</span><br><span class="line"></span><br><span class="line">    if (cgctx == NULL) &#123;</span><br><span class="line">        return nil; /* error */</span><br><span class="line">    &#125;</span><br><span class="line">    size_t w = CGImageGetWidth(inImage);</span><br><span class="line">    size_t h = CGImageGetHeight(inImage);</span><br><span class="line">    CGRect rect = &#123;0,0,w,&#125;&#125;;</span><br><span class="line"></span><br><span class="line">    CGContextDrawImage(cgctx, rect, inImage);</span><br><span class="line">    unsigned char* data = CGBitmapContextGetData (cgctx);</span><br><span class="line">    if (data != NULL) &#123;</span><br><span class="line">        int offset = 4*((w*round(point.y))+round(point.x));</span><br><span class="line">        int alpha =  data[offset];</span><br><span class="line">        int red = data[offset+1];</span><br><span class="line">        int green = data[offset+2];</span><br><span class="line">        int blue = data[offset+3];</span><br><span class="line">        color = [UIColor colorWithRed:(red/255.0f) green:(green/255.0f) blue:</span><br><span class="line">                 (blue/255.0f) alpha:(alpha/255.0f)];</span><br><span class="line">    &#125;</span><br><span class="line">    CGContextRelease(cgctx);</span><br><span class="line">    if (data) &#123;</span><br><span class="line">        free(data);</span><br><span class="line">    &#125;</span><br><span class="line">    return color;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å­—ç¬¦ä¸²åè½¬"><a href="#å­—ç¬¦ä¸²åè½¬" class="headerlink" title="å­—ç¬¦ä¸²åè½¬"></a>å­—ç¬¦ä¸²åè½¬</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ç¬¬ä¸€ç§ï¼š</span><br><span class="line">- (NSString *)reverseWordsInString:(NSString *)str</span><br><span class="line">&#123;    </span><br><span class="line">    NSMutableString *newString = [[NSMutableString alloc] initWithCapacity:str.length];</span><br><span class="line">    for (NSInteger i = str.length - 1; i &gt;= 0 ; i --)</span><br><span class="line">    &#123;</span><br><span class="line">        unichar ch = [str characterAtIndex:i];       </span><br><span class="line">        [newString appendFormat:@&quot;%c&quot;, ch];    </span><br><span class="line">    &#125;    </span><br><span class="line">     return newString;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ç¬¬äºŒç§ï¼š</span><br><span class="line">- (NSString*)reverseWordsInString:(NSString*)str</span><br><span class="line">&#123;    </span><br><span class="line">     NSMutableString *reverString = [NSMutableString stringWithCapacity:str.length];    </span><br><span class="line">     [str enumerateSubstringsInRange:NSMakeRange(0, str.length) options:NSStringEnumerationReverse | NSStringEnumerationByComposedCharacterSequences  usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) &#123; </span><br><span class="line">          [reverString appendString:substring];                         </span><br><span class="line">      &#125;];    </span><br><span class="line">     return reverString;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¦æ­¢é”å±ï¼Œ"><a href="#ç¦æ­¢é”å±ï¼Œ" class="headerlink" title="ç¦æ­¢é”å±ï¼Œ"></a>ç¦æ­¢é”å±ï¼Œ</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“è®¾å¤‡ä¸€æ®µæ—¶é—´æ²¡æœ‰è§¦æ§åŠ¨ä½œæ—¶ï¼ŒiOSä¼šé”ä½å±å¹•ã€‚ä½†æœ‰ä¸€äº›åº”ç”¨æ˜¯ä¸éœ€è¦é”å±çš„ï¼Œæ¯”å¦‚è§†é¢‘æ’­æ”¾å™¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[UIApplication sharedApplication].idleTimerDisabled = YES;</span><br><span class="line">æˆ–</span><br><span class="line">[[UIApplication sharedApplication] setIdleTimerDisabled:YES];</span><br></pre></td></tr></table></figure>
<h3 id="æ¨¡æ€æ¨å‡ºé€æ˜ç•Œé¢"><a href="#æ¨¡æ€æ¨å‡ºé€æ˜ç•Œé¢" class="headerlink" title="æ¨¡æ€æ¨å‡ºé€æ˜ç•Œé¢"></a>æ¨¡æ€æ¨å‡ºé€æ˜ç•Œé¢</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">UIViewController *vc = [[UIViewController alloc] init];</span><br><span class="line">UINavigationController *na = [[UINavigationController alloc] initWithRootViewController:vc];</span><br><span class="line"></span><br><span class="line">if ([[[UIDevice currentDevice] systemVersion] floatValue] &gt;= 8.0)</span><br><span class="line">&#123;</span><br><span class="line">     na.modalPresentationStyle = UIModalPresentationOverCurrentContext;</span><br><span class="line">&#125;</span><br><span class="line">else</span><br><span class="line">&#123;</span><br><span class="line">     self.modalPresentationStyle=UIModalPresentationCurrentContext;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[self presentViewController:na animated:YES completion:nil];</span><br></pre></td></tr></table></figure>
<h3 id="Xcodeè°ƒè¯•ä¸æ˜¾ç¤ºå†…å­˜å ç”¨"><a href="#Xcodeè°ƒè¯•ä¸æ˜¾ç¤ºå†…å­˜å ç”¨" class="headerlink" title="Xcodeè°ƒè¯•ä¸æ˜¾ç¤ºå†…å­˜å ç”¨"></a>Xcodeè°ƒè¯•ä¸æ˜¾ç¤ºå†…å­˜å ç”¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">editSCheme  é‡Œé¢æœ‰ä¸ªé€‰é¡¹å«å«åšenable zoombie Objects  å–æ¶ˆé€‰ä¸­</span><br></pre></td></tr></table></figure>
<h3 id="æ˜¾ç¤ºéšè—æ–‡ä»¶"><a href="#æ˜¾ç¤ºéšè—æ–‡ä»¶" class="headerlink" title="æ˜¾ç¤ºéšè—æ–‡ä»¶"></a>æ˜¾ç¤ºéšè—æ–‡ä»¶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//æ˜¾ç¤º</span><br><span class="line">defaults write com.apple.finder AppleShowAllFiles -bool true</span><br><span class="line">killall Finder</span><br><span class="line"></span><br><span class="line">//éšè—</span><br><span class="line">defaults write com.apple.finder AppleShowAllFiles -bool false</span><br><span class="line">killall Finder</span><br></pre></td></tr></table></figure>
<h3 id="iOSè·³è½¬åˆ°App-Storeä¸‹è½½åº”ç”¨è¯„åˆ†"><a href="#iOSè·³è½¬åˆ°App-Storeä¸‹è½½åº”ç”¨è¯„åˆ†" class="headerlink" title="iOSè·³è½¬åˆ°App Storeä¸‹è½½åº”ç”¨è¯„åˆ†"></a>iOSè·³è½¬åˆ°App Storeä¸‹è½½åº”ç”¨è¯„åˆ†</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@&quot;itms-apps://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&amp;id=APPID&quot;]];</span><br></pre></td></tr></table></figure>
<h3 id="iOS-è·å–æ±‰å­—çš„æ‹¼éŸ³"><a href="#iOS-è·å–æ±‰å­—çš„æ‹¼éŸ³" class="headerlink" title="iOS è·å–æ±‰å­—çš„æ‹¼éŸ³"></a>iOS è·å–æ±‰å­—çš„æ‹¼éŸ³</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">+ (NSString *)transform:(NSString *)chinese</span><br><span class="line">&#123;    </span><br><span class="line">    //å°†NSStringè£…æ¢æˆNSMutableString </span><br><span class="line">    NSMutableString *pinyin = [chinese mutableCopy];    </span><br><span class="line">    //å°†æ±‰å­—è½¬æ¢ä¸ºæ‹¼éŸ³(å¸¦éŸ³æ ‡)    </span><br><span class="line">    CFStringTransform((__bridge CFMutableStringRef)pinyin, NULL, kCFStringTransformMandarinLatin, NO);    </span><br><span class="line">    NSLog(@&quot;%@&quot;, pinyin);    </span><br><span class="line">    //å»æ‰æ‹¼éŸ³çš„éŸ³æ ‡    </span><br><span class="line">    CFStringTransform((__bridge CFMutableStringRef)pinyin, NULL, kCFStringTransformStripCombiningMarks, NO);    </span><br><span class="line">    NSLog(@&quot;%@&quot;, pinyin);    </span><br><span class="line">    //è¿”å›æœ€è¿‘ç»“æœ    </span><br><span class="line">    return pinyin;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ‰‹åŠ¨æ›´æ”¹iOSçŠ¶æ€æ çš„é¢œè‰²"><a href="#æ‰‹åŠ¨æ›´æ”¹iOSçŠ¶æ€æ çš„é¢œè‰²" class="headerlink" title="æ‰‹åŠ¨æ›´æ”¹iOSçŠ¶æ€æ çš„é¢œè‰²"></a>æ‰‹åŠ¨æ›´æ”¹iOSçŠ¶æ€æ çš„é¢œè‰²</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (void)setStatusBarBackgroundColor:(UIColor *)color</span><br><span class="line">&#123;</span><br><span class="line">    UIView *statusBar = [[[UIApplication sharedApplication] valueForKey:@&quot;statusBarWindow&quot;] valueForKey:@&quot;statusBar&quot;];</span><br><span class="line"></span><br><span class="line">    if ([statusBar respondsToSelector:@selector(setBackgroundColor:)])</span><br><span class="line">    &#123;</span><br><span class="line">        statusBar.backgroundColor = color;    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ¤æ–­å½“å‰ViewControlleræ˜¯pushè¿˜æ˜¯presentçš„æ–¹å¼æ˜¾ç¤ºçš„"><a href="#åˆ¤æ–­å½“å‰ViewControlleræ˜¯pushè¿˜æ˜¯presentçš„æ–¹å¼æ˜¾ç¤ºçš„" class="headerlink" title="åˆ¤æ–­å½“å‰ViewControlleræ˜¯pushè¿˜æ˜¯presentçš„æ–¹å¼æ˜¾ç¤ºçš„"></a>åˆ¤æ–­å½“å‰ViewControlleræ˜¯pushè¿˜æ˜¯presentçš„æ–¹å¼æ˜¾ç¤ºçš„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">NSArray *viewcontrollers=self.navigationController.viewControllers;</span><br><span class="line"></span><br><span class="line">if (viewcontrollers.count &gt; 1)</span><br><span class="line">&#123;</span><br><span class="line">    if ([viewcontrollers objectAtIndex:viewcontrollers.count - 1] == self)</span><br><span class="line">    &#123;</span><br><span class="line">        //pushæ–¹å¼</span><br><span class="line">       [self.navigationController popViewControllerAnimated:YES];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">else</span><br><span class="line">&#123;</span><br><span class="line">    //presentæ–¹å¼</span><br><span class="line">    [self dismissViewControllerAnimated:YES completion:nil];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è·å–å®é™…ä½¿ç”¨çš„LaunchImageå›¾ç‰‡"><a href="#è·å–å®é™…ä½¿ç”¨çš„LaunchImageå›¾ç‰‡" class="headerlink" title="è·å–å®é™…ä½¿ç”¨çš„LaunchImageå›¾ç‰‡"></a>è·å–å®é™…ä½¿ç”¨çš„LaunchImageå›¾ç‰‡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">- (NSString *)getLaunchImageName</span><br><span class="line">&#123;</span><br><span class="line">    CGSize viewSize = self.window.bounds.size;</span><br><span class="line">    // ç«–å±    </span><br><span class="line">    NSString *viewOrientation = @&quot;Portrait&quot;;  </span><br><span class="line">    NSString *launchImageName = nil;    </span><br><span class="line">    NSArray* imagesDict = [[[NSBundle mainBundle] infoDictionary] valueForKey:@&quot;UILaunchImages&quot;];</span><br><span class="line">    for (NSDictionary* dict in imagesDict)</span><br><span class="line">    &#123;</span><br><span class="line">        CGSize imageSize = CGSizeFromString(dict[@&quot;UILaunchImageSize&quot;]);</span><br><span class="line">        if (CGSizeEqualToSize(imageSize, viewSize) &amp;&amp; [viewOrientation isEqualToString:dict[@&quot;UILaunchImageOrientation&quot;]])</span><br><span class="line">        &#123;</span><br><span class="line">            launchImageName = dict[@&quot;UILaunchImageName&quot;];        </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;    </span><br><span class="line">    return launchImageName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="iOSåœ¨å½“å‰å±å¹•è·å–ç¬¬ä¸€å“åº”"><a href="#iOSåœ¨å½“å‰å±å¹•è·å–ç¬¬ä¸€å“åº”" class="headerlink" title="iOSåœ¨å½“å‰å±å¹•è·å–ç¬¬ä¸€å“åº”"></a>iOSåœ¨å½“å‰å±å¹•è·å–ç¬¬ä¸€å“åº”</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UIWindow * keyWindow = [[UIApplication sharedApplication] keyWindow];</span><br><span class="line">UIView * firstResponder = [keyWindow performSelector:@selector(firstResponder)];</span><br></pre></td></tr></table></figure>
<h3 id="åˆ¤æ–­å¯¹è±¡æ˜¯å¦éµå¾ªäº†æŸåè®®"><a href="#åˆ¤æ–­å¯¹è±¡æ˜¯å¦éµå¾ªäº†æŸåè®®" class="headerlink" title="åˆ¤æ–­å¯¹è±¡æ˜¯å¦éµå¾ªäº†æŸåè®®"></a>åˆ¤æ–­å¯¹è±¡æ˜¯å¦éµå¾ªäº†æŸåè®®</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if ([self.selectedController conformsToProtocol:@protocol(RefreshPtotocol)])</span><br><span class="line">&#123;</span><br><span class="line">     [self.selectedController performSelector:@selector(onTriggerRefresh)];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ¤æ–­viewæ˜¯ä¸æ˜¯æŒ‡å®šè§†å›¾çš„å­è§†å›¾"><a href="#åˆ¤æ–­viewæ˜¯ä¸æ˜¯æŒ‡å®šè§†å›¾çš„å­è§†å›¾" class="headerlink" title="åˆ¤æ–­viewæ˜¯ä¸æ˜¯æŒ‡å®šè§†å›¾çš„å­è§†å›¾"></a>åˆ¤æ–­viewæ˜¯ä¸æ˜¯æŒ‡å®šè§†å›¾çš„å­è§†å›¾</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BOOL isView = [textView isDescendantOfView:self.view];</span><br></pre></td></tr></table></figure>
<h3 id="NSArray-å¿«é€Ÿæ±‚æ€»å’Œ-æœ€å¤§å€¼-æœ€å°å€¼-å’Œ-å¹³å‡å€¼"><a href="#NSArray-å¿«é€Ÿæ±‚æ€»å’Œ-æœ€å¤§å€¼-æœ€å°å€¼-å’Œ-å¹³å‡å€¼" class="headerlink" title="NSArray å¿«é€Ÿæ±‚æ€»å’Œ æœ€å¤§å€¼ æœ€å°å€¼ å’Œ å¹³å‡å€¼"></a>NSArray å¿«é€Ÿæ±‚æ€»å’Œ æœ€å¤§å€¼ æœ€å°å€¼ å’Œ å¹³å‡å€¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NSArray *array = [NSArray arrayWithObjects:@&quot;2.0&quot;, @&quot;2.3&quot;, @&quot;3.0&quot;, @&quot;4.0&quot;, @&quot;10&quot;, nil];</span><br><span class="line">CGFloat sum = [[array valueForKeyPath:@&quot;@sum.floatValue&quot;] floatValue];</span><br><span class="line">CGFloat avg = [[array valueForKeyPath:@&quot;@avg.floatValue&quot;] floatValue];</span><br><span class="line">CGFloat max =[[array valueForKeyPath:@&quot;@max.floatValue&quot;] floatValue];</span><br><span class="line">CGFloat min =[[array valueForKeyPath:@&quot;@min.floatValue&quot;] floatValue];</span><br><span class="line">NSLog(@&quot;%f\n%f\n%f\n%f&quot;,sum,avg,max,min);</span><br></pre></td></tr></table></figure>
<h3 id="ä¿®æ”¹UITextFieldä¸­Placeholderçš„æ–‡å­—é¢œè‰²"><a href="#ä¿®æ”¹UITextFieldä¸­Placeholderçš„æ–‡å­—é¢œè‰²" class="headerlink" title="ä¿®æ”¹UITextFieldä¸­Placeholderçš„æ–‡å­—é¢œè‰²"></a>ä¿®æ”¹UITextFieldä¸­Placeholderçš„æ–‡å­—é¢œè‰²</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[textField setValue:[UIColor redColor] forKeyPath:@&quot;_placeholderLabel.textColor&quot;];</span><br></pre></td></tr></table></figure>
<h3 id="å…³äºNSDateFormatterçš„æ ¼å¼"><a href="#å…³äºNSDateFormatterçš„æ ¼å¼" class="headerlink" title="å…³äºNSDateFormatterçš„æ ¼å¼"></a>å…³äºNSDateFormatterçš„æ ¼å¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">G: å…¬å…ƒæ—¶ä»£ï¼Œä¾‹å¦‚ADå…¬å…ƒ</span><br><span class="line">yy: å¹´çš„å2ä½</span><br><span class="line">yyyy: å®Œæ•´å¹´</span><br><span class="line">MM: æœˆï¼Œæ˜¾ç¤ºä¸º1-12</span><br><span class="line">MMM: æœˆï¼Œæ˜¾ç¤ºä¸ºè‹±æ–‡æœˆä»½ç®€å†™,å¦‚ Jan</span><br><span class="line">MMMM: æœˆï¼Œæ˜¾ç¤ºä¸ºè‹±æ–‡æœˆä»½å…¨ç§°ï¼Œå¦‚ Janualy</span><br><span class="line">dd: æ—¥ï¼Œ2ä½æ•°è¡¨ç¤ºï¼Œå¦‚02</span><br><span class="line">d: æ—¥ï¼Œ1-2ä½æ˜¾ç¤ºï¼Œå¦‚ 2</span><br><span class="line">EEE: ç®€å†™æ˜ŸæœŸå‡ ï¼Œå¦‚Sun</span><br><span class="line">EEEE: å…¨å†™æ˜ŸæœŸå‡ ï¼Œå¦‚Sunday</span><br><span class="line">aa: ä¸Šä¸‹åˆï¼ŒAM/PM</span><br><span class="line">H: æ—¶ï¼Œ24å°æ—¶åˆ¶ï¼Œ0-23</span><br><span class="line">Kï¼šæ—¶ï¼Œ12å°æ—¶åˆ¶ï¼Œ0-11</span><br><span class="line">m: åˆ†ï¼Œ1-2ä½</span><br><span class="line">mm: åˆ†ï¼Œ2ä½</span><br><span class="line">s: ç§’ï¼Œ1-2ä½</span><br><span class="line">ss: ç§’ï¼Œ2ä½</span><br><span class="line">S: æ¯«ç§’</span><br></pre></td></tr></table></figure>
<h3 id="è·å–ä¸€ä¸ªç±»çš„æ‰€æœ‰å­ç±»"><a href="#è·å–ä¸€ä¸ªç±»çš„æ‰€æœ‰å­ç±»" class="headerlink" title="è·å–ä¸€ä¸ªç±»çš„æ‰€æœ‰å­ç±»"></a>è·å–ä¸€ä¸ªç±»çš„æ‰€æœ‰å­ç±»</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+ (NSArray *) allSubclasses</span><br><span class="line">&#123;</span><br><span class="line">    Class myClass = [self class];</span><br><span class="line">    NSMutableArray *mySubclasses = [NSMutableArray array];</span><br><span class="line">    unsigned int numOfClasses;</span><br><span class="line">    Class *classes = objc_copyClassList(&amp;numOfClasses;);</span><br><span class="line">    for (unsigned int ci = 0; ci </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç›‘æµ‹IOSè®¾å¤‡æ˜¯å¦è®¾ç½®äº†ä»£ç†ï¼Œéœ€è¦CFNetwork-framework"><a href="#ç›‘æµ‹IOSè®¾å¤‡æ˜¯å¦è®¾ç½®äº†ä»£ç†ï¼Œéœ€è¦CFNetwork-framework" class="headerlink" title="ç›‘æµ‹IOSè®¾å¤‡æ˜¯å¦è®¾ç½®äº†ä»£ç†ï¼Œéœ€è¦CFNetwork.framework"></a>ç›‘æµ‹IOSè®¾å¤‡æ˜¯å¦è®¾ç½®äº†ä»£ç†ï¼Œéœ€è¦CFNetwork.framework</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">NSDictionary *proxySettings = (__bridge NSDictionary *)(CFNetworkCopySystemProxySettings());</span><br><span class="line">NSArray *proxies = (__bridge NSArray *)(CFNetworkCopyProxiesForURL((__bridge CFURLRef _Nonnull)([NSURL URLWithString:@&quot;http://www.baidu.com&quot;]), (__bridge CFDictionaryRef _Nonnull)(proxySettings)));</span><br><span class="line">NSLog(@&quot;\n%@&quot;,proxies);</span><br><span class="line"></span><br><span class="line">NSDictionary *settings = proxies[0];</span><br><span class="line">NSLog(@&quot;%@&quot;,[settings objectForKey:(NSString *)kCFProxyHostNameKey]);</span><br><span class="line">NSLog(@&quot;%@&quot;,[settings objectForKey:(NSString *)kCFProxyPortNumberKey]);</span><br><span class="line">NSLog(@&quot;%@&quot;,[settings objectForKey:(NSString *)kCFProxyTypeKey]);</span><br><span class="line"></span><br><span class="line">if ([[settings objectForKey:(NSString *)kCFProxyTypeKey] isEqualToString:@&quot;kCFProxyTypeNone&quot;])</span><br><span class="line">&#123;</span><br><span class="line">     NSLog(@&quot;æ²¡ä»£ç†&quot;);</span><br><span class="line">&#125;</span><br><span class="line">else</span><br><span class="line">&#123;</span><br><span class="line">     NSLog(@&quot;è®¾ç½®äº†ä»£ç†&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é˜¿æ‹‰ä¼¯æ•°å­—è½¬ä¸­æ–‡æ ¼å¼"><a href="#é˜¿æ‹‰ä¼¯æ•°å­—è½¬ä¸­æ–‡æ ¼å¼" class="headerlink" title="é˜¿æ‹‰ä¼¯æ•°å­—è½¬ä¸­æ–‡æ ¼å¼"></a>é˜¿æ‹‰ä¼¯æ•°å­—è½¬ä¸­æ–‡æ ¼å¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">+(NSString *)translation:(NSString *)arebic</span><br><span class="line">&#123;  </span><br><span class="line">    NSString *str = arebic;</span><br><span class="line">    NSArray *arabic_numerals = @[@&quot;1&quot;,@&quot;2&quot;,@&quot;3&quot;,@&quot;4&quot;,@&quot;5&quot;,@&quot;6&quot;,@&quot;7&quot;,@&quot;8&quot;,@&quot;9&quot;,@&quot;0&quot;];</span><br><span class="line">    NSArray *chinese_numerals = @[@&quot;ä¸€&quot;,@&quot;äºŒ&quot;,@&quot;ä¸‰&quot;,@&quot;å››&quot;,@&quot;äº”&quot;,@&quot;å…­&quot;,@&quot;ä¸ƒ&quot;,@&quot;å…«&quot;,@&quot;ä¹&quot;,@&quot;é›¶&quot;];</span><br><span class="line">    NSArray *digits = @[@&quot;ä¸ª&quot;,@&quot;å&quot;,@&quot;ç™¾&quot;,@&quot;åƒ&quot;,@&quot;ä¸‡&quot;,@&quot;å&quot;,@&quot;ç™¾&quot;,@&quot;åƒ&quot;,@&quot;äº¿&quot;,@&quot;å&quot;,@&quot;ç™¾&quot;,@&quot;åƒ&quot;,@&quot;å…†&quot;];</span><br><span class="line">    NSDictionary *dictionary = [NSDictionary dictionaryWithObjects:chinese_numerals forKeys:arabic_numerals];</span><br><span class="line"></span><br><span class="line">    NSMutableArray *sums = [NSMutableArray array];</span><br><span class="line">    for (int i = 0; i </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Base64ç¼–ç ä¸NSStringå¯¹è±¡æˆ–NSDataå¯¹è±¡çš„è½¬æ¢"><a href="#Base64ç¼–ç ä¸NSStringå¯¹è±¡æˆ–NSDataå¯¹è±¡çš„è½¬æ¢" class="headerlink" title="Base64ç¼–ç ä¸NSStringå¯¹è±¡æˆ–NSDataå¯¹è±¡çš„è½¬æ¢"></a>Base64ç¼–ç ä¸NSStringå¯¹è±¡æˆ–NSDataå¯¹è±¡çš„è½¬æ¢</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// Create NSData object</span><br><span class="line">NSData *nsdata = [@&quot;iOS Developer Tips encoded in Base64&quot;</span><br><span class="line">  dataUsingEncoding:NSUTF8StringEncoding];</span><br><span class="line"></span><br><span class="line">// Get NSString from NSData object in Base64</span><br><span class="line">NSString *base64Encoded = [nsdata base64EncodedStringWithOptions:0];</span><br><span class="line"></span><br><span class="line">// Print the Base64 encoded string</span><br><span class="line">NSLog(@&quot;Encoded: %@&quot;, base64Encoded);</span><br><span class="line"></span><br><span class="line">// Let&apos;s go the other way...</span><br><span class="line"></span><br><span class="line">// NSData from the Base64 encoded str</span><br><span class="line">NSData *nsdataFromBase64String = [[NSData alloc]</span><br><span class="line">  initWithBase64EncodedString:base64Encoded options:0];</span><br><span class="line"></span><br><span class="line">// Decoded NSString from the NSData</span><br><span class="line">NSString *base64Decoded = [[NSString alloc]</span><br><span class="line">  initWithData:nsdataFromBase64String encoding:NSUTF8StringEncoding];</span><br><span class="line">NSLog(@&quot;Decoded: %@&quot;, base64Decoded);</span><br></pre></td></tr></table></figure>
<h3 id="å–æ¶ˆUICollectionViewçš„éšå¼åŠ¨ç”»"><a href="#å–æ¶ˆUICollectionViewçš„éšå¼åŠ¨ç”»" class="headerlink" title="å–æ¶ˆUICollectionViewçš„éšå¼åŠ¨ç”»"></a>å–æ¶ˆUICollectionViewçš„éšå¼åŠ¨ç”»</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UICollectionViewåœ¨reloadItemsçš„æ—¶å€™ï¼Œé»˜è®¤ä¼šé™„åŠ ä¸€ä¸ªéšå¼çš„fadeåŠ¨ç”»ï¼Œæœ‰æ—¶å€™å¾ˆè®¨åŒï¼Œå°¤å…¶æ˜¯å½“ä½ çš„cellæ˜¯å¤åˆcellçš„æƒ…å†µä¸‹(æ¯”å¦‚cellä½¿ç”¨åˆ°äº†UIStackView)ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="ä¸‹é¢å‡ ç§æ–¹æ³•éƒ½å¯ä»¥å¸®ä½ å»é™¤è¿™äº›åŠ¨ç”»"><a href="#ä¸‹é¢å‡ ç§æ–¹æ³•éƒ½å¯ä»¥å¸®ä½ å»é™¤è¿™äº›åŠ¨ç”»" class="headerlink" title="ä¸‹é¢å‡ ç§æ–¹æ³•éƒ½å¯ä»¥å¸®ä½ å»é™¤è¿™äº›åŠ¨ç”»"></a>ä¸‹é¢å‡ ç§æ–¹æ³•éƒ½å¯ä»¥å¸®ä½ å»é™¤è¿™äº›åŠ¨ç”»</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//æ–¹æ³•ä¸€</span><br><span class="line">[UIView performWithoutAnimation:^&#123;</span><br><span class="line">    [collectionView reloadItemsAtIndexPaths:@[[NSIndexPath indexPathForItem:index inSection:0]]];</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">//æ–¹æ³•äºŒ</span><br><span class="line">[UIView animateWithDuration:0 animations:^&#123;</span><br><span class="line">    [collectionView performBatchUpdates:^&#123;</span><br><span class="line">        [collectionView reloadItemsAtIndexPaths:@[[NSIndexPath indexPathForItem:index inSection:0]]];</span><br><span class="line">    &#125; completion:nil];</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">//æ–¹æ³•ä¸‰</span><br><span class="line">[UIView setAnimationsEnabled:NO];</span><br><span class="line">[self.trackPanel performBatchUpdates:^&#123;</span><br><span class="line">    [collectionView reloadItemsAtIndexPaths:@[[NSIndexPath indexPathForItem:index inSection:0]]];</span><br><span class="line">&#125; completion:^(BOOL finished) &#123;</span><br><span class="line">    [UIView setAnimationsEnabled:YES];</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<h3 id="è®©Xcodeçš„æ§åˆ¶å°æ”¯æŒLLDBç±»å‹çš„æ‰“å°"><a href="#è®©Xcodeçš„æ§åˆ¶å°æ”¯æŒLLDBç±»å‹çš„æ‰“å°" class="headerlink" title="è®©Xcodeçš„æ§åˆ¶å°æ”¯æŒLLDBç±»å‹çš„æ‰“å°"></a>è®©Xcodeçš„æ§åˆ¶å°æ”¯æŒLLDBç±»å‹çš„æ‰“å°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ‰“å¼€ç»ˆç«¯è¾“å…¥ä¸‰æ¡å‘½ä»¤:</span><br><span class="line">touch ~/.lldbinit</span><br><span class="line">echo display @import UIKit &gt;&gt; ~/.lldbinit</span><br><span class="line">echo target stop-hook add -o \&quot;target stop-hook disable\&quot; &gt;&gt; ~/.lldbinit</span><br></pre></td></tr></table></figure>
<h3 id="CocoaPods-pod-install-pod-updateæ›´æ–°æ…¢çš„é—®é¢˜"><a href="#CocoaPods-pod-install-pod-updateæ›´æ–°æ…¢çš„é—®é¢˜" class="headerlink" title="CocoaPods pod install/pod updateæ›´æ–°æ…¢çš„é—®é¢˜"></a>CocoaPods pod install/pod updateæ›´æ–°æ…¢çš„é—®é¢˜</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pod install --verbose --no-repo-update </span><br><span class="line">pod update --verbose --no-repo-update</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸åŠ åé¢çš„å‚æ•°ï¼Œé»˜è®¤ä¼šå‡çº§CocoaPodsçš„specä»“åº“ï¼ŒåŠ ä¸€ä¸ªå‚æ•°å¯ä»¥çœç•¥è¿™ä¸€æ­¥ï¼Œç„¶åé€Ÿåº¦å°±ä¼šæå‡ä¸å°‘</p>
<h3 id="UIImage-å ç”¨å†…å­˜å¤§å°"><a href="#UIImage-å ç”¨å†…å­˜å¤§å°" class="headerlink" title="UIImage å ç”¨å†…å­˜å¤§å°"></a>UIImage å ç”¨å†…å­˜å¤§å°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UIImage *image = [UIImage imageNamed:@&quot;aa&quot;];</span><br><span class="line">NSUInteger size  = CGImageGetHeight(image.CGImage) * CGImageGetBytesPerRow(image.CGImage);</span><br></pre></td></tr></table></figure>
<h3 id="GCD-timerå®šæ—¶å™¨"><a href="#GCD-timerå®šæ—¶å™¨" class="headerlink" title="GCD timerå®šæ—¶å™¨"></a>GCD timerå®šæ—¶å™¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);</span><br><span class="line">dispatch_source_t timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0,queue);</span><br><span class="line">dispatch_source_set_timer(timer,dispatch_walltime(NULL, 0),1.0*NSEC_PER_SEC, 0); //æ¯ç§’æ‰§è¡Œ</span><br><span class="line">dispatch_source_set_event_handler(timer, ^&#123;</span><br><span class="line">    //@&quot;å€’è®¡æ—¶ç»“æŸï¼Œå…³é—­&quot;</span><br><span class="line">    dispatch_source_cancel(timer); </span><br><span class="line">    dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">dispatch_resume(timer);</span><br></pre></td></tr></table></figure>
<h3 id="å›¾ç‰‡ä¸Šç»˜åˆ¶æ–‡å­—-å†™ä¸€ä¸ªUIImageçš„category"><a href="#å›¾ç‰‡ä¸Šç»˜åˆ¶æ–‡å­—-å†™ä¸€ä¸ªUIImageçš„category" class="headerlink" title="å›¾ç‰‡ä¸Šç»˜åˆ¶æ–‡å­— å†™ä¸€ä¸ªUIImageçš„category"></a>å›¾ç‰‡ä¸Šç»˜åˆ¶æ–‡å­— å†™ä¸€ä¸ªUIImageçš„category</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">- (UIImage *)imageWithTitle:(NSString *)title fontSize:(CGFloat)fontSize</span><br><span class="line">&#123;</span><br><span class="line">    //ç”»å¸ƒå¤§å°</span><br><span class="line">    CGSize size=CGSizeMake(self.size.width,self.size.height);</span><br><span class="line">    //åˆ›å»ºä¸€ä¸ªåŸºäºä½å›¾çš„ä¸Šä¸‹æ–‡</span><br><span class="line">    UIGraphicsBeginImageContextWithOptions(size,NO,0.0);//opaque:NO  scale:0.0</span><br><span class="line"></span><br><span class="line">    [self drawAtPoint:CGPointMake(0.0,0.0)];</span><br><span class="line"></span><br><span class="line">    //æ–‡å­—å±…ä¸­æ˜¾ç¤ºåœ¨ç”»å¸ƒä¸Š</span><br><span class="line">    NSMutableParagraphStyle* paragraphStyle = [[NSParagraphStyle defaultParagraphStyle] mutableCopy];</span><br><span class="line">    paragraphStyle.lineBreakMode = NSLineBreakByCharWrapping;</span><br><span class="line">    paragraphStyle.alignment=NSTextAlignmentCenter;//æ–‡å­—å±…ä¸­</span><br><span class="line"></span><br><span class="line">    //è®¡ç®—æ–‡å­—æ‰€å çš„size,æ–‡å­—å±…ä¸­æ˜¾ç¤ºåœ¨ç”»å¸ƒä¸Š</span><br><span class="line">    CGSize sizeText=[title boundingRectWithSize:self.size options:NSStringDrawingUsesLineFragmentOrigin</span><br><span class="line">                                     attributes:@&#123;NSFontAttributeName:[UIFont systemFontOfSize:fontSize]&#125;context:nil].size;</span><br><span class="line">    CGFloat width = self.size.width;</span><br><span class="line">    CGFloat height = self.size.height;</span><br><span class="line"></span><br><span class="line">    CGRect rect = CGRectMake((width-sizeText.width)/2, (height-sizeText.height)/2, sizeText.width, sizeText.height);</span><br><span class="line">    //ç»˜åˆ¶æ–‡å­—</span><br><span class="line">    [title drawInRect:rect withAttributes:@&#123; NSFontAttributeName:[UIFont systemFontOfSize:fontSize],NSForegroundColorAttributeName:[ UIColor whiteColor],NSParagraphStyleAttributeName:paragraphStyle&#125;];</span><br><span class="line"></span><br><span class="line">    //è¿”å›ç»˜åˆ¶çš„æ–°å›¾å½¢</span><br><span class="line">    UIImage *newImage= UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">    UIGraphicsEndImageContext();</span><br><span class="line">    return newImage;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥æ‰¾ä¸€ä¸ªè§†å›¾çš„æ‰€æœ‰å­è§†å›¾"><a href="#æŸ¥æ‰¾ä¸€ä¸ªè§†å›¾çš„æ‰€æœ‰å­è§†å›¾" class="headerlink" title="æŸ¥æ‰¾ä¸€ä¸ªè§†å›¾çš„æ‰€æœ‰å­è§†å›¾"></a>æŸ¥æ‰¾ä¸€ä¸ªè§†å›¾çš„æ‰€æœ‰å­è§†å›¾</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- (NSMutableArray *)allSubViewsForView:(UIView *)view</span><br><span class="line">&#123;</span><br><span class="line">    NSMutableArray *array = [NSMutableArray arrayWithCapacity:0];</span><br><span class="line">    for (UIView *subView in view.subviews)</span><br><span class="line">    &#123;</span><br><span class="line">        [array addObject:subView];</span><br><span class="line">        if (subView.subviews.count &gt; 0)</span><br><span class="line">        &#123;</span><br><span class="line">            [array addObjectsFromArray:[self allSubViewsForView:subView]];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return array;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è®¡ç®—æ–‡ä»¶å¤§å°"><a href="#è®¡ç®—æ–‡ä»¶å¤§å°" class="headerlink" title="è®¡ç®—æ–‡ä»¶å¤§å°"></a>è®¡ç®—æ–‡ä»¶å¤§å°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">//æ–‡ä»¶å¤§å°</span><br><span class="line">- (long long)fileSizeAtPath:(NSString *)path</span><br><span class="line">&#123;</span><br><span class="line">    NSFileManager *fileManager = [NSFileManager defaultManager];</span><br><span class="line"></span><br><span class="line">    if ([fileManager fileExistsAtPath:path])</span><br><span class="line">    &#123;</span><br><span class="line">        long long size = [fileManager attributesOfItemAtPath:path error:nil].fileSize;</span><br><span class="line">        return size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//æ–‡ä»¶å¤¹å¤§å°</span><br><span class="line">- (long long)folderSizeAtPath:(NSString *)path</span><br><span class="line">&#123;</span><br><span class="line">    NSFileManager *fileManager = [NSFileManager defaultManager];</span><br><span class="line"></span><br><span class="line">    long long folderSize = 0;</span><br><span class="line"></span><br><span class="line">    if ([fileManager fileExistsAtPath:path])</span><br><span class="line">    &#123;</span><br><span class="line">        NSArray *childerFiles = [fileManager subpathsAtPath:path];</span><br><span class="line">        for (NSString *fileName in childerFiles)</span><br><span class="line">        &#123;</span><br><span class="line">            NSString *fileAbsolutePath = [path stringByAppendingPathComponent:fileName];</span><br><span class="line">            if ([fileManager fileExistsAtPath:fileAbsolutePath])</span><br><span class="line">            &#123;</span><br><span class="line">                long long size = [fileManager attributesOfItemAtPath:fileAbsolutePath error:nil].fileSize;</span><br><span class="line">                folderSize += size;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return folderSize;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="UIViewè®¾ç½®éƒ¨åˆ†åœ†è§’"><a href="#UIViewè®¾ç½®éƒ¨åˆ†åœ†è§’" class="headerlink" title="UIViewè®¾ç½®éƒ¨åˆ†åœ†è§’"></a>UIViewè®¾ç½®éƒ¨åˆ†åœ†è§’</h3><p>ä½ æ˜¯ä¸æ˜¯ä¹Ÿé‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜ï¼Œä¸€ä¸ªbuttonæˆ–è€…labelï¼Œåªè¦å³è¾¹çš„ä¸¤ä¸ªè§’åœ†è§’ï¼Œæˆ–è€…åªè¦ä¸€ä¸ªåœ†è§’ã€‚è¯¥æ€ä¹ˆåŠå‘¢ã€‚è¿™å°±éœ€è¦å›¾å±‚è’™ç‰ˆæ¥å¸®åŠ©æˆ‘ä»¬äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CGRect rect = view.bounds;</span><br><span class="line">CGSize radio = CGSizeMake(30, 30);//åœ†è§’å°ºå¯¸</span><br><span class="line">UIRectCorner corner = UIRectCornerTopLeft|UIRectCornerTopRight;//è¿™åªåœ†è§’ä½ç½®</span><br><span class="line">UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:rect byRoundingCorners:corner cornerRadii:radio];</span><br><span class="line">CAShapeLayer *masklayer = [[CAShapeLayer alloc]init];//åˆ›å»ºshapelayer</span><br><span class="line">masklayer.frame = view.bounds;</span><br><span class="line">masklayer.path = path.CGPath;//è®¾ç½®è·¯å¾„</span><br><span class="line">view.layer.mask = masklayer;</span><br></pre></td></tr></table></figure>
<h3 id="å–ä¸Šæ•´ä¸å–ä¸‹æ•´"><a href="#å–ä¸Šæ•´ä¸å–ä¸‹æ•´" class="headerlink" title="å–ä¸Šæ•´ä¸å–ä¸‹æ•´"></a>å–ä¸Šæ•´ä¸å–ä¸‹æ•´</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">floor(x),æœ‰æ—¶å€™ä¹Ÿå†™åšFloor(x)ï¼Œå…¶åŠŸèƒ½æ˜¯â€œä¸‹å–æ•´â€ï¼Œå³å–ä¸å¤§äºxçš„æœ€å¤§æ•´æ•° ä¾‹å¦‚ï¼š</span><br><span class="line">x=3.14ï¼Œfloor(x)=3</span><br><span class="line">y=9.99999ï¼Œfloor(y)=9</span><br><span class="line"></span><br><span class="line">ä¸floorå‡½æ•°å¯¹åº”çš„æ˜¯ceilå‡½æ•°ï¼Œå³ä¸Šå–æ•´å‡½æ•°ã€‚</span><br><span class="line"></span><br><span class="line">ceilå‡½æ•°çš„ä½œç”¨æ˜¯æ±‚ä¸å°äºç»™å®šå®æ•°çš„æœ€å°æ•´æ•°ã€‚</span><br><span class="line">ceil(2)=ceil(1.2)=cei(1.5)=2.00</span><br><span class="line"></span><br><span class="line">floorå‡½æ•°ä¸ceilå‡½æ•°çš„è¿”å›å€¼å‡ä¸ºdoubleå‹</span><br></pre></td></tr></table></figure>
<h3 id="è®¡ç®—å­—ç¬¦ä¸²å­—ç¬¦é•¿åº¦ï¼Œä¸€ä¸ªæ±‰å­—ç®—ä¸¤ä¸ªå­—ç¬¦"><a href="#è®¡ç®—å­—ç¬¦ä¸²å­—ç¬¦é•¿åº¦ï¼Œä¸€ä¸ªæ±‰å­—ç®—ä¸¤ä¸ªå­—ç¬¦" class="headerlink" title="è®¡ç®—å­—ç¬¦ä¸²å­—ç¬¦é•¿åº¦ï¼Œä¸€ä¸ªæ±‰å­—ç®—ä¸¤ä¸ªå­—ç¬¦"></a>è®¡ç®—å­—ç¬¦ä¸²å­—ç¬¦é•¿åº¦ï¼Œä¸€ä¸ªæ±‰å­—ç®—ä¸¤ä¸ªå­—ç¬¦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//æ–¹æ³•ä¸€ï¼š</span><br><span class="line">- (int)convertToInt:(NSString*)strtemp</span><br><span class="line">&#123;</span><br><span class="line">    int strlength = 0;</span><br><span class="line">    char* p = (char*)[strtemp cStringUsingEncoding:NSUnicodeStringEncoding];</span><br><span class="line">    for (int i=0 ; i</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»™UIViewè®¾ç½®å›¾ç‰‡"><a href="#ç»™UIViewè®¾ç½®å›¾ç‰‡" class="headerlink" title="ç»™UIViewè®¾ç½®å›¾ç‰‡"></a>ç»™UIViewè®¾ç½®å›¾ç‰‡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UIImage *image = [UIImage imageNamed:@&quot;image&quot;];</span><br><span class="line">self.MYView.layer.contents = (__bridge id _Nullable)(image.CGImage);</span><br><span class="line">self.MYView.layer.contentsRect = CGRectMake(0, 0, 0.5, 0.5);</span><br></pre></td></tr></table></figure>
<h3 id="é˜²æ­¢scrollViewæ‰‹åŠ¿è¦†ç›–ä¾§æ»‘æ‰‹åŠ¿"><a href="#é˜²æ­¢scrollViewæ‰‹åŠ¿è¦†ç›–ä¾§æ»‘æ‰‹åŠ¿" class="headerlink" title="é˜²æ­¢scrollViewæ‰‹åŠ¿è¦†ç›–ä¾§æ»‘æ‰‹åŠ¿"></a>é˜²æ­¢scrollViewæ‰‹åŠ¿è¦†ç›–ä¾§æ»‘æ‰‹åŠ¿</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[scrollView.panGestureRecognizerrequireGestureRecognizerToFail:self.navigationController.interactivePopGestureRecognizer];</span><br></pre></td></tr></table></figure>
<h3 id="å»æ‰å¯¼èˆªæ è¿”å›çš„backæ ‡é¢˜"><a href="#å»æ‰å¯¼èˆªæ è¿”å›çš„backæ ‡é¢˜" class="headerlink" title="å»æ‰å¯¼èˆªæ è¿”å›çš„backæ ‡é¢˜"></a>å»æ‰å¯¼èˆªæ è¿”å›çš„backæ ‡é¢˜</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[UIBarButtonItemappearance]setBackButtonTitlePositionAdjustment:UIOffsetMake(0, -60)forBarMetrics:UIBarMetricsDefault];</span><br></pre></td></tr></table></figure>
<h3 id="å­—ç¬¦ä¸²ä¸­æ˜¯å¦å«æœ‰ä¸­æ–‡"><a href="#å­—ç¬¦ä¸²ä¸­æ˜¯å¦å«æœ‰ä¸­æ–‡" class="headerlink" title="å­—ç¬¦ä¸²ä¸­æ˜¯å¦å«æœ‰ä¸­æ–‡"></a>å­—ç¬¦ä¸²ä¸­æ˜¯å¦å«æœ‰ä¸­æ–‡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">+ (BOOL)checkIsChinese:(NSString *)string</span><br><span class="line">&#123;</span><br><span class="line">    for (int i=0; i</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="dispatch-groupçš„ä½¿ç”¨"><a href="#dispatch-groupçš„ä½¿ç”¨" class="headerlink" title="dispatch_groupçš„ä½¿ç”¨"></a>dispatch_groupçš„ä½¿ç”¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">dispatch_group_t dispatchGroup = dispatch_group_create();</span><br><span class="line">   dispatch_group_enter(dispatchGroup);</span><br><span class="line">   dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</span><br><span class="line">       NSLog(@&quot;ç¬¬ä¸€ä¸ªè¯·æ±‚å®Œæˆ&quot;);</span><br><span class="line">       dispatch_group_leave(dispatchGroup);</span><br><span class="line">   &#125;);</span><br><span class="line"></span><br><span class="line">   dispatch_group_enter(dispatchGroup);</span><br><span class="line"></span><br><span class="line">   dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(10 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</span><br><span class="line">       NSLog(@&quot;ç¬¬äºŒä¸ªè¯·æ±‚å®Œæˆ&quot;);</span><br><span class="line">       dispatch_group_leave(dispatchGroup);</span><br><span class="line">   &#125;);</span><br><span class="line"></span><br><span class="line">   dispatch_group_notify(dispatchGroup, dispatch_get_main_queue(), ^()&#123;</span><br><span class="line">       NSLog(@&quot;è¯·æ±‚å®Œæˆ&quot;);</span><br><span class="line">   &#125;);</span><br></pre></td></tr></table></figure>
<h3 id="UITextFieldæ¯å››ä½åŠ ä¸€ä¸ªç©ºæ ¼-å®ç°ä»£ç†"><a href="#UITextFieldæ¯å››ä½åŠ ä¸€ä¸ªç©ºæ ¼-å®ç°ä»£ç†" class="headerlink" title="UITextFieldæ¯å››ä½åŠ ä¸€ä¸ªç©ºæ ¼,å®ç°ä»£ç†"></a>UITextFieldæ¯å››ä½åŠ ä¸€ä¸ªç©ºæ ¼,å®ç°ä»£ç†</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string</span><br><span class="line">&#123;</span><br><span class="line">    // å››ä½åŠ ä¸€ä¸ªç©ºæ ¼</span><br><span class="line">    if ([string isEqualToString:@&quot;&quot;])</span><br><span class="line">    &#123;</span><br><span class="line">        // åˆ é™¤å­—ç¬¦</span><br><span class="line">        if ((textField.text.length - 2) % 5 == 0)</span><br><span class="line">        &#123;</span><br><span class="line">            textField.text = [textField.text substringToIndex:textField.text.length - 1];</span><br><span class="line">        &#125;</span><br><span class="line">        return YES;</span><br><span class="line">    &#125;</span><br><span class="line">    else</span><br><span class="line">    &#123;</span><br><span class="line">        if (textField.text.length % 5 == 0)</span><br><span class="line">        &#123;</span><br><span class="line">            textField.text = [NSString stringWithFormat:@&quot;%@ &quot;, textField.text];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è·å–ç§æœ‰å±æ€§å’Œæˆå‘˜å˜é‡-import"><a href="#è·å–ç§æœ‰å±æ€§å’Œæˆå‘˜å˜é‡-import" class="headerlink" title="è·å–ç§æœ‰å±æ€§å’Œæˆå‘˜å˜é‡ #import"></a>è·å–ç§æœ‰å±æ€§å’Œæˆå‘˜å˜é‡ #import</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//è·å–ç§æœ‰å±æ€§ æ¯”å¦‚è®¾ç½®UIDatePickerçš„å­—ä½“é¢œè‰²</span><br><span class="line">- (void)setTextColor</span><br><span class="line">&#123;</span><br><span class="line">    //è·å–æ‰€æœ‰çš„å±æ€§ï¼Œå»æŸ¥çœ‹æœ‰æ²¡æœ‰å¯¹åº”çš„å±æ€§</span><br><span class="line">    unsigned int count = 0;</span><br><span class="line">    objc_property_t *propertys = class_copyPropertyList([UIDatePicker class], &amp;count);</span><br><span class="line">    for(int i = 0;i </span><br><span class="line"></span><br><span class="line">//è·å¾—æˆå‘˜å˜é‡ æ¯”å¦‚ä¿®æ”¹UIAlertActionçš„æŒ‰é’®å­—ä½“é¢œè‰²</span><br><span class="line">    unsigned int count = 0;</span><br><span class="line">    Ivar *ivars = class_copyIvarList([UIAlertAction class], &amp;count);</span><br><span class="line">    for(int i =0;i</span><br></pre></td></tr></table></figure>
<h3 id="è·å–æ‰‹æœºå®‰è£…çš„åº”ç”¨"><a href="#è·å–æ‰‹æœºå®‰è£…çš„åº”ç”¨" class="headerlink" title="è·å–æ‰‹æœºå®‰è£…çš„åº”ç”¨"></a>è·å–æ‰‹æœºå®‰è£…çš„åº”ç”¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Class c =NSClassFromString(@&quot;LSApplicationWorkspace&quot;);</span><br><span class="line">id s = [(id)c performSelector:NSSelectorFromString(@&quot;defaultWorkspace&quot;)];</span><br><span class="line">NSArray *array = [s performSelector:NSSelectorFromString(@&quot;allInstalledApplications&quot;)];</span><br><span class="line">for (id item in array)</span><br><span class="line">&#123;</span><br><span class="line">    NSLog(@&quot;%@&quot;,[item performSelector:NSSelectorFromString(@&quot;applicationIdentifier&quot;)]);</span><br><span class="line">    //NSLog(@&quot;%@&quot;,[item performSelector:NSSelectorFromString(@&quot;bundleIdentifier&quot;)]);</span><br><span class="line">    NSLog(@&quot;%@&quot;,[item performSelector:NSSelectorFromString(@&quot;bundleVersion&quot;)]);</span><br><span class="line">    NSLog(@&quot;%@&quot;,[item performSelector:NSSelectorFromString(@&quot;shortVersionString&quot;)]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦åœ¨åŒä¸€å‘¨-å†™åœ¨NSDateçš„categoryé‡Œé¢"><a href="#åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦åœ¨åŒä¸€å‘¨-å†™åœ¨NSDateçš„categoryé‡Œé¢" class="headerlink" title="åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦åœ¨åŒä¸€å‘¨ å†™åœ¨NSDateçš„categoryé‡Œé¢"></a>åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦åœ¨åŒä¸€å‘¨ å†™åœ¨NSDateçš„categoryé‡Œé¢</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)isSameDateWithDate:(NSDate *)date</span><br><span class="line">&#123;</span><br><span class="line">    //æ—¥æœŸé—´éš”å¤§äºä¸ƒå¤©ä¹‹é—´è¿”å›NO</span><br><span class="line">    if (fabs([self timeIntervalSinceDate:date]) &gt;= 7 * 24 *3600)</span><br><span class="line">    &#123;</span><br><span class="line">        return NO;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    NSCalendar *calender = [NSCalendar currentCalendar];</span><br><span class="line">    calender.firstWeekday = 2;//è®¾ç½®æ¯å‘¨ç¬¬ä¸€å¤©ä»å‘¨ä¸€å¼€å§‹</span><br><span class="line">    //è®¡ç®—ä¸¤ä¸ªæ—¥æœŸåˆ†åˆ«ä¸ºè¿™å¹´ç¬¬å‡ å‘¨</span><br><span class="line">    NSUInteger countSelf = [calender ordinalityOfUnit:NSCalendarUnitWeekday inUnit:NSCalendarUnitYear forDate:self];</span><br><span class="line">    NSUInteger countDate = [calender ordinalityOfUnit:NSCalendarUnitWeekday inUnit:NSCalendarUnitYear forDate:date];</span><br><span class="line"></span><br><span class="line">    //ç›¸ç­‰å°±åœ¨åŒä¸€å‘¨ï¼Œä¸ç›¸ç­‰å°±ä¸åœ¨åŒä¸€å‘¨</span><br><span class="line">    return countSelf == countDate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åº”ç”¨å†…æ‰“å¼€ç³»ç»Ÿè®¾ç½®ç•Œé¢"><a href="#åº”ç”¨å†…æ‰“å¼€ç³»ç»Ÿè®¾ç½®ç•Œé¢" class="headerlink" title="åº”ç”¨å†…æ‰“å¼€ç³»ç»Ÿè®¾ç½®ç•Œé¢"></a>åº”ç”¨å†…æ‰“å¼€ç³»ç»Ÿè®¾ç½®ç•Œé¢</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//iOS8ä¹‹å</span><br><span class="line">[[UIApplication sharedApplication] openURL:[NSURL URLWithString:UIApplicationOpenSettingsURLString]];</span><br><span class="line">//å¦‚æœAppæ²¡æœ‰æ·»åŠ æƒé™ï¼Œæ˜¾ç¤ºçš„æ˜¯è®¾å®šç•Œé¢ã€‚å¦‚æœAppæœ‰æ·»åŠ æƒé™ï¼ˆä¾‹å¦‚é€šçŸ¥ï¼‰ï¼Œæ˜¾ç¤ºçš„æ˜¯Appçš„è®¾å®šç•Œé¢ã€‚</span><br><span class="line"></span><br><span class="line">//iOS8ä¹‹å‰</span><br><span class="line">//å…ˆæ·»åŠ ä¸€ä¸ªurl typeå¦‚ä¸‹å›¾ï¼Œåœ¨ä»£ç ä¸­è°ƒç”¨å¦‚ä¸‹ä»£ç ,å³å¯è·³è½¬åˆ°è®¾ç½®é¡µé¢çš„å¯¹åº”é¡¹</span><br><span class="line">[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@&quot;prefs:root=WIFI&quot;]];</span><br></pre></td></tr></table></figure>
<h3 id="å¯é€‰å€¼å¦‚ä¸‹ï¼š"><a href="#å¯é€‰å€¼å¦‚ä¸‹ï¼š" class="headerlink" title="å¯é€‰å€¼å¦‚ä¸‹ï¼š"></a>å¯é€‰å€¼å¦‚ä¸‹ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">About â€” prefs:root=General&amp;path=About</span><br><span class="line">Accessibility â€” prefs:root=General&amp;path=ACCESSIBILITY</span><br><span class="line">Airplane Mode On â€” prefs:root=AIRPLANE_MODE</span><br><span class="line">Auto-Lock â€” prefs:root=General&amp;path=AUTOLOCK</span><br><span class="line">Brightness â€” prefs:root=Brightness</span><br><span class="line">Bluetooth â€” prefs:root=General&amp;path=Bluetooth</span><br><span class="line">Date &amp; Time â€” prefs:root=General&amp;path=DATE_AND_TIME</span><br><span class="line">FaceTime â€” prefs:root=FACETIME</span><br><span class="line">General â€” prefs:root=General</span><br><span class="line">Keyboard â€” prefs:root=General&amp;path=Keyboard</span><br><span class="line">iCloud â€” prefs:root=CASTLE</span><br><span class="line">iCloud Storage &amp; Backup â€” prefs:root=CASTLE&amp;path=STORAGE_AND_BACKUP</span><br><span class="line">International â€” prefs:root=General&amp;path=INTERNATIONAL</span><br><span class="line">Location Services â€” prefs:root=LOCATION_SERVICES</span><br><span class="line">Music â€” prefs:root=MUSIC</span><br><span class="line">Music Equalizer â€” prefs:root=MUSIC&amp;path=EQ</span><br><span class="line">Music Volume Limit â€” prefs:root=MUSIC&amp;path=VolumeLimit</span><br><span class="line">Network â€” prefs:root=General&amp;path=Network</span><br><span class="line">Nike + iPod â€” prefs:root=NIKE_PLUS_IPOD</span><br><span class="line">Notes â€” prefs:root=NOTES</span><br><span class="line">Notification â€” prefs:root=NOTIFICATI*****_ID</span><br><span class="line">Phone â€” prefs:root=Phone</span><br><span class="line">Photos â€” prefs:root=Photos</span><br><span class="line">Profile â€” prefs:root=General&amp;path=ManagedConfigurationList</span><br><span class="line">Reset â€” prefs:root=General&amp;path=Reset</span><br><span class="line">Safari â€” prefs:root=Safari</span><br><span class="line">Siri â€” prefs:root=General&amp;path=Assistant</span><br><span class="line">Sounds â€” prefs:root=Sounds</span><br><span class="line">Software Update â€” prefs:root=General&amp;path=SOFTWARE_UPDATE_LINK</span><br><span class="line">Store â€” prefs:root=STORE</span><br><span class="line">Twitter â€” prefs:root=TWITTER</span><br><span class="line">Usage â€” prefs:root=General&amp;path=USAGE</span><br><span class="line">VPN â€” prefs:root=General&amp;path=Network/VPN</span><br><span class="line">Wallpaper â€” prefs:root=Wallpaper</span><br><span class="line">Wi-Fi â€” prefs:root=WIFI</span><br></pre></td></tr></table></figure>
<h3 id="å±è”½è§¦å‘äº‹ä»¶ï¼Œ2ç§’åå–æ¶ˆå±è”½"><a href="#å±è”½è§¦å‘äº‹ä»¶ï¼Œ2ç§’åå–æ¶ˆå±è”½" class="headerlink" title="å±è”½è§¦å‘äº‹ä»¶ï¼Œ2ç§’åå–æ¶ˆå±è”½"></a>å±è”½è§¦å‘äº‹ä»¶ï¼Œ2ç§’åå–æ¶ˆå±è”½</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[[UIApplication sharedApplication] beginIgnoringInteractionEvents];</span><br><span class="line">dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</span><br><span class="line">    [[UIApplication sharedApplication] endIgnoringInteractionEvents]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="åŠ¨ç”»æš‚åœå†å¼€å§‹"><a href="#åŠ¨ç”»æš‚åœå†å¼€å§‹" class="headerlink" title="åŠ¨ç”»æš‚åœå†å¼€å§‹"></a>åŠ¨ç”»æš‚åœå†å¼€å§‹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-(void)pauseLayer:(CALayer *)layer</span><br><span class="line">&#123;</span><br><span class="line">    CFTimeInterval pausedTime = [layer convertTime:CACurrentMediaTime() fromLayer:nil];</span><br><span class="line">    layer.speed = 0.0;</span><br><span class="line">    layer.timeOffset = pausedTime;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(void)resumeLayer:(CALayer *)layer</span><br><span class="line">&#123;</span><br><span class="line">    CFTimeInterval pausedTime = [layer timeOffset];</span><br><span class="line">    layer.speed = 1.0;</span><br><span class="line">    layer.timeOffset = 0.0;</span><br><span class="line">    layer.beginTime = 0.0;</span><br><span class="line">    CFTimeInterval timeSincePause = [layer convertTime:CACurrentMediaTime() fromLayer:nil] - pausedTime;</span><br><span class="line">    layer.beginTime = timeSincePause;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="iOSä¸­æ•°å­—çš„æ ¼å¼åŒ–"><a href="#iOSä¸­æ•°å­—çš„æ ¼å¼åŒ–" class="headerlink" title="iOSä¸­æ•°å­—çš„æ ¼å¼åŒ–"></a>iOSä¸­æ•°å­—çš„æ ¼å¼åŒ–</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//é€šè¿‡NSNumberFormatterï¼ŒåŒæ ·å¯ä»¥è®¾ç½®NSNumberè¾“å‡ºçš„æ ¼å¼ã€‚ä¾‹å¦‚å¦‚ä¸‹ä»£ç ï¼š</span><br><span class="line">NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];</span><br><span class="line">formatter.numberStyle = NSNumberFormatterDecimalStyle;</span><br><span class="line">NSString *string = [formatter stringFromNumber:[NSNumber numberWithInt:123456789]];</span><br><span class="line">NSLog(@&quot;Formatted number string:%@&quot;,string);</span><br><span class="line">//è¾“å‡ºç»“æœä¸ºï¼š[1223:403] Formatted number string:123,456,789</span><br><span class="line"></span><br><span class="line">//å…¶ä¸­NSNumberFormatterç±»æœ‰ä¸ªå±æ€§numberStyleï¼Œå®ƒæ˜¯ä¸€ä¸ªæšä¸¾å‹ï¼Œè®¾ç½®ä¸åŒçš„å€¼å¯ä»¥è¾“å‡ºä¸åŒçš„æ•°å­—æ ¼å¼ã€‚è¯¥æšä¸¾åŒ…æ‹¬ï¼š</span><br><span class="line">typedef NS_ENUM(NSUInteger, NSNumberFormatterStyle) &#123;</span><br><span class="line">    NSNumberFormatterNoStyle = kCFNumberFormatterNoStyle,</span><br><span class="line">    NSNumberFormatterDecimalStyle = kCFNumberFormatterDecimalStyle,</span><br><span class="line">    NSNumberFormatterCurrencyStyle = kCFNumberFormatterCurrencyStyle,</span><br><span class="line">    NSNumberFormatterPercentStyle = kCFNumberFormatterPercentStyle,</span><br><span class="line">    NSNumberFormatterScientificStyle = kCFNumberFormatterScientificStyle,</span><br><span class="line">    NSNumberFormatterSpellOutStyle = kCFNumberFormatterSpellOutStyle</span><br><span class="line">&#125;;</span><br><span class="line">//å„ä¸ªæšä¸¾å¯¹åº”è¾“å‡ºæ•°å­—æ ¼å¼çš„æ•ˆæœå¦‚ä¸‹ï¼šå…¶ä¸­ç¬¬ä¸‰é¡¹å’Œæœ€åä¸€é¡¹çš„è¾“å‡ºä¼šæ ¹æ®ç³»ç»Ÿè®¾ç½®çš„è¯­è¨€åŒºåŸŸçš„ä¸åŒè€Œä¸åŒã€‚</span><br><span class="line">[1243:403] Formatted number string:123456789</span><br><span class="line">[1243:403] Formatted number string:123,456,789</span><br><span class="line">[1243:403] Formatted number string:ï¿¥123,456,789.00</span><br><span class="line">[1243:403] Formatted number string:-539,222,988%</span><br><span class="line">[1243:403] Formatted number string:1.23456789E8</span><br><span class="line">[1243:403] Formatted number string:ä¸€äº¿äºŒåƒä¸‰ç™¾å››åäº”ä¸‡å…­åƒä¸ƒç™¾å…«åä¹</span><br></pre></td></tr></table></figure>
<h3 id="å¦‚ä½•è·å–WebViewæ‰€æœ‰çš„å›¾ç‰‡åœ°å€ï¼Œ"><a href="#å¦‚ä½•è·å–WebViewæ‰€æœ‰çš„å›¾ç‰‡åœ°å€ï¼Œ" class="headerlink" title="å¦‚ä½•è·å–WebViewæ‰€æœ‰çš„å›¾ç‰‡åœ°å€ï¼Œ"></a>å¦‚ä½•è·å–WebViewæ‰€æœ‰çš„å›¾ç‰‡åœ°å€ï¼Œ</h3><p>åœ¨ç½‘é¡µåŠ è½½å®Œæˆæ—¶ï¼Œé€šè¿‡jsè·å–å›¾ç‰‡å’Œæ·»åŠ ç‚¹å‡»çš„è¯†åˆ«æ–¹å¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//UIWebView</span><br><span class="line">- (void)webViewDidFinishLoad:(UIWebView *)webView</span><br><span class="line">&#123;</span><br><span class="line">    //è¿™é‡Œæ˜¯jsï¼Œä¸»è¦ç›®çš„å®ç°å¯¹urlçš„è·å–</span><br><span class="line">    static  NSString * const jsGetImages =</span><br><span class="line">    @&quot;function getImages()&#123;\</span><br><span class="line">    var objs = document.getElementsByTagName(\&quot;img\&quot;);\</span><br><span class="line">    var imgScr = &apos;&apos;;\</span><br><span class="line">    for(var i=0;i</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//WKWebView</span><br><span class="line">- (void)webView:(WKWebView *)webView didFinishNavigation:(null_unspecified WKNavigation *)navigation</span><br><span class="line">&#123;</span><br><span class="line">    static  NSString * const jsGetImages =</span><br><span class="line">    @&quot;function getImages()&#123;\</span><br><span class="line">    var objs = document.getElementsByTagName(\&quot;img\&quot;);\</span><br><span class="line">    var imgScr = &apos;&apos;;\</span><br><span class="line">    for(var i=0;i</span><br></pre></td></tr></table></figure>
<h3 id="è·å–åˆ°webviewçš„é«˜åº¦"><a href="#è·å–åˆ°webviewçš„é«˜åº¦" class="headerlink" title="è·å–åˆ°webviewçš„é«˜åº¦"></a>è·å–åˆ°webviewçš„é«˜åº¦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CGFloat height = [[self.webView stringByEvaluatingJavaScriptFromString:@&quot;document.body.offsetHeight&quot;] floatValue];</span><br></pre></td></tr></table></figure>
<h3 id="navigationBarå˜ä¸ºçº¯é€æ˜"><a href="#navigationBarå˜ä¸ºçº¯é€æ˜" class="headerlink" title="navigationBarå˜ä¸ºçº¯é€æ˜"></a>navigationBarå˜ä¸ºçº¯é€æ˜</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//ç¬¬ä¸€ç§æ–¹æ³•</span><br><span class="line">//å¯¼èˆªæ çº¯é€æ˜</span><br><span class="line">[self.navigationBar setBackgroundImage:[UIImage new] forBarMetrics:UIBarMetricsDefault];</span><br><span class="line">//å»æ‰å¯¼èˆªæ åº•éƒ¨çš„é»‘çº¿</span><br><span class="line">self.navigationBar.shadowImage = [UIImage new];</span><br><span class="line"></span><br><span class="line">//ç¬¬äºŒç§æ–¹æ³•</span><br><span class="line">[[self.navigationBar subviews] objectAtIndex:0].alpha = 0;</span><br></pre></td></tr></table></figure>
<h3 id="tabBaråŒç†"><a href="#tabBaråŒç†" class="headerlink" title="tabBaråŒç†"></a>tabBaråŒç†</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[self.tabBar setBackgroundImage:[UIImage new]];</span><br><span class="line">self.tabBar.shadowImage = [UIImage new];</span><br></pre></td></tr></table></figure>
<h3 id="navigationBaræ ¹æ®æ»‘åŠ¨è·ç¦»çš„æ¸å˜è‰²å®ç°"><a href="#navigationBaræ ¹æ®æ»‘åŠ¨è·ç¦»çš„æ¸å˜è‰²å®ç°" class="headerlink" title="navigationBaræ ¹æ®æ»‘åŠ¨è·ç¦»çš„æ¸å˜è‰²å®ç°"></a>navigationBaræ ¹æ®æ»‘åŠ¨è·ç¦»çš„æ¸å˜è‰²å®ç°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">//ç¬¬ä¸€ç§</span><br><span class="line">- (void)scrollViewDidScroll:(UIScrollView *)scrollView</span><br><span class="line">&#123;</span><br><span class="line">    CGFloat offsetToShow = 200.0;//æ»‘åŠ¨å¤šå°‘å°±å®Œå…¨æ˜¾ç¤º</span><br><span class="line">    CGFloat alpha = 1 - (offsetToShow - scrollView.contentOffset.y) / offsetToShow;</span><br><span class="line">    [[self.navigationController.navigationBar subviews] objectAtIndex:0].alpha = alpha;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ç¬¬äºŒç§</span><br><span class="line">- (void)scrollViewDidScroll:(UIScrollView *)scrollView</span><br><span class="line">&#123;</span><br><span class="line">    CGFloat offsetToShow = 200.0;</span><br><span class="line">    CGFloat alpha = 1 - (offsetToShow - scrollView.contentOffset.y) / offsetToShow;</span><br><span class="line"></span><br><span class="line">    [self.navigationController.navigationBar setShadowImage:[UIImage new]];</span><br><span class="line">    [self.navigationController.navigationBar setBackgroundImage:[self imageWithColor:[[UIColor orangeColor]colorWithAlphaComponent:alpha]] forBarMetrics:UIBarMetricsDefault];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ç”Ÿæˆä¸€å¼ çº¯è‰²çš„å›¾ç‰‡</span><br><span class="line">- (UIImage *)imageWithColor:(UIColor *)color</span><br><span class="line">&#123;</span><br><span class="line">    CGRect rect = CGRectMake(0.0f, 0.0f, 1.0f, 1.0f);</span><br><span class="line">    UIGraphicsBeginImageContext(rect.size);</span><br><span class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</span><br><span class="line">    CGContextSetFillColorWithColor(context, [color CGColor]);</span><br><span class="line">    CGContextFillRect(context, rect);</span><br><span class="line">    UIImage *theImage = UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">    UIGraphicsEndImageContext();</span><br><span class="line"></span><br><span class="line">    return theImage;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="iOS-å¼€å‘ä¸­ä¸€äº›ç›¸å…³çš„è·¯å¾„"><a href="#iOS-å¼€å‘ä¸­ä¸€äº›ç›¸å…³çš„è·¯å¾„" class="headerlink" title="iOS å¼€å‘ä¸­ä¸€äº›ç›¸å…³çš„è·¯å¾„"></a>iOS å¼€å‘ä¸­ä¸€äº›ç›¸å…³çš„è·¯å¾„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">æ¨¡æ‹Ÿå™¨çš„ä½ç½®:</span><br><span class="line">/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs </span><br><span class="line"></span><br><span class="line">æ–‡æ¡£å®‰è£…ä½ç½®:</span><br><span class="line">/Applications/Xcode.app/Contents/Developer/Documentation/DocSets</span><br><span class="line"></span><br><span class="line">æ’ä»¶ä¿å­˜è·¯å¾„:</span><br><span class="line">~/Library/ApplicationSupport/Developer/Shared/Xcode/Plug-ins</span><br><span class="line"></span><br><span class="line">è‡ªå®šä¹‰ä»£ç æ®µçš„ä¿å­˜è·¯å¾„:</span><br><span class="line">~/Library/Developer/Xcode/UserData/CodeSnippets/ </span><br><span class="line">å¦‚æœæ‰¾ä¸åˆ°CodeSnippetsæ–‡ä»¶å¤¹ï¼Œå¯ä»¥è‡ªå·±æ–°å»ºä¸€ä¸ªCodeSnippetsæ–‡ä»¶å¤¹ã€‚</span><br><span class="line"></span><br><span class="line">æè¿°æ–‡ä»¶è·¯å¾„</span><br><span class="line">~/Library/MobileDevice/Provisioning Profiles</span><br></pre></td></tr></table></figure>
<h3 id="navigationItemçš„BarButtonItemå¦‚ä½•ç´§é å±å¹•å³è¾¹ç•Œæˆ–è€…å·¦è¾¹ç•Œï¼Ÿ"><a href="#navigationItemçš„BarButtonItemå¦‚ä½•ç´§é å±å¹•å³è¾¹ç•Œæˆ–è€…å·¦è¾¹ç•Œï¼Ÿ" class="headerlink" title="navigationItemçš„BarButtonItemå¦‚ä½•ç´§é å±å¹•å³è¾¹ç•Œæˆ–è€…å·¦è¾¹ç•Œï¼Ÿ"></a>navigationItemçš„BarButtonItemå¦‚ä½•ç´§é å±å¹•å³è¾¹ç•Œæˆ–è€…å·¦è¾¹ç•Œï¼Ÿ</h3><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå³è¾¹çš„itemä¼šå’Œå±å¹•å³ä¾§ä¿æŒä¸€æ®µè·ç¦»ï¼š ä¸‹é¢æ˜¯é€šè¿‡æ·»åŠ ä¸€ä¸ªè´Ÿå€¼å®½åº¦çš„å›ºå®šé—´è·çš„itemæ¥è§£å†³ï¼Œä¹Ÿå¯ä»¥æ”¹å˜å®½åº¦å®ç°ä¸åŒçš„é—´éš”ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">UIImage *img = [[UIImage imageNamed:@&quot;icon_cog&quot;] imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal];</span><br><span class="line">//å®½åº¦ä¸ºè´Ÿæ•°çš„å›ºå®šé—´è·çš„ç³»ç»Ÿitem</span><br><span class="line">UIBarButtonItem *rightNegativeSpacer = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil];</span><br><span class="line">[rightNegativeSpacer setWidth:-15];</span><br><span class="line"></span><br><span class="line">UIBarButtonItem *rightBtnItem1 = [[UIBarButtonItem alloc]initWithImage:img style:UIBarButtonItemStylePlain target:self action:@selector(rightButtonItemClicked:)];</span><br><span class="line">UIBarButtonItem *rightBtnItem2 = [[UIBarButtonItem alloc]initWithImage:img style:UIBarButtonItemStylePlain target:self action:@selector(rightButtonItemClicked:)];</span><br><span class="line">self.navigationItem.rightBarButtonItems = @[rightNegativeSpacer,rightBtnItem1,rightBtnItem2];</span><br></pre></td></tr></table></figure>
<h3 id="NSStringè¿›è¡ŒURLç¼–ç å’Œè§£ç "><a href="#NSStringè¿›è¡ŒURLç¼–ç å’Œè§£ç " class="headerlink" title="NSStringè¿›è¡ŒURLç¼–ç å’Œè§£ç "></a>NSStringè¿›è¡ŒURLç¼–ç å’Œè§£ç </h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">NSString *string = @&quot;http://abc.com?aaa=ä½ å¥½&amp;bbb=tttee&quot;;</span><br><span class="line"></span><br><span class="line">//ç¼–ç  æ‰“å°ï¼šhttp://abc.com?aaa=%E4%BD%A0%E5%A5%BD&amp;bbb=tttee</span><br><span class="line">string = [string stringByAddingPercentEncodingWithAllowedCharacters:[NSCharacterSet URLQueryAllowedCharacterSet]];</span><br><span class="line"></span><br><span class="line">//è§£ç  æ‰“å°ï¼šhttp://abc.com?aaa=ä½ å¥½&amp;bbb=tttee</span><br><span class="line">string = [string stringByRemovingPercentEncoding];</span><br></pre></td></tr></table></figure>
<h3 id="UIWebViewè®¾ç½®User-Agentã€‚"><a href="#UIWebViewè®¾ç½®User-Agentã€‚" class="headerlink" title="UIWebViewè®¾ç½®User-Agentã€‚"></a>UIWebViewè®¾ç½®User-Agentã€‚</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//è®¾ç½®</span><br><span class="line">NSDictionary *dic = @&#123;@&quot;UserAgent&quot;:@&quot;your UserAgent&quot;&#125;;</span><br><span class="line">[[NSUserDefaults standardUserDefaults] registerDefaults:dic];</span><br><span class="line">//è·å–</span><br><span class="line">NSString *agent = [self.WebView stringByEvaluatingJavaScriptFromString:@&quot;navigator.userAgent&quot;];</span><br></pre></td></tr></table></figure>
<h3 id="è·å–ç¡¬ç›˜æ€»å®¹é‡ä¸å¯ç”¨å®¹é‡"><a href="#è·å–ç¡¬ç›˜æ€»å®¹é‡ä¸å¯ç”¨å®¹é‡" class="headerlink" title="è·å–ç¡¬ç›˜æ€»å®¹é‡ä¸å¯ç”¨å®¹é‡:"></a>è·å–ç¡¬ç›˜æ€»å®¹é‡ä¸å¯ç”¨å®¹é‡:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NSFileManager *fileManager = [NSFileManager defaultManager];</span><br><span class="line">NSDictionary *attributes = [fileManager attributesOfFileSystemForPath:NSHomeDirectory() error:nil];</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;å®¹é‡%.2fG&quot;,[attributes[NSFileSystemSize] doubleValue] / (powf(1024, 3)));</span><br><span class="line">NSLog(@&quot;å¯ç”¨%.2fG&quot;,[attributes[NSFileSystemFreeSize] doubleValue] / powf(1024, 3));</span><br></pre></td></tr></table></figure>
<h3 id="è·å–UIColorçš„RGBAå€¼"><a href="#è·å–UIColorçš„RGBAå€¼" class="headerlink" title="è·å–UIColorçš„RGBAå€¼"></a>è·å–UIColorçš„RGBAå€¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">UIColor *color = [UIColor colorWithRed:0.2 green:0.3 blue:0.9 alpha:1.0];</span><br><span class="line">const CGFloat *components = CGColorGetComponents(color.CGColor);</span><br><span class="line">NSLog(@&quot;Red: %.1f&quot;, components[0]);</span><br><span class="line">NSLog(@&quot;Green: %.1f&quot;, components[1]);</span><br><span class="line">NSLog(@&quot;Blue: %.1f&quot;, components[2]);</span><br><span class="line">NSLog(@&quot;Alpha: %.1f&quot;, components[3]);</span><br></pre></td></tr></table></figure>
<h3 id="ä¿®æ”¹textFieldçš„placeholderçš„å­—ä½“é¢œè‰²ã€å¤§å°"><a href="#ä¿®æ”¹textFieldçš„placeholderçš„å­—ä½“é¢œè‰²ã€å¤§å°" class="headerlink" title="ä¿®æ”¹textFieldçš„placeholderçš„å­—ä½“é¢œè‰²ã€å¤§å°"></a>ä¿®æ”¹textFieldçš„placeholderçš„å­—ä½“é¢œè‰²ã€å¤§å°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[self.textField setValue:[UIColor redColor] forKeyPath:@&quot;_placeholderLabel.textColor&quot;];</span><br><span class="line">[self.textField setValue:[UIFont boldSystemFontOfSize:16] forKeyPath:@&quot;_placeholderLabel.font&quot;];</span><br></pre></td></tr></table></figure>
<h3 id="AFNç§»é™¤JSONä¸­çš„NSNull"><a href="#AFNç§»é™¤JSONä¸­çš„NSNull" class="headerlink" title="AFNç§»é™¤JSONä¸­çš„NSNull"></a>AFNç§»é™¤JSONä¸­çš„NSNull</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AFJSONResponseSerializer *response = [AFJSONResponseSerializer serializer];</span><br><span class="line">response.removesKeysWithNullValues = YES;</span><br></pre></td></tr></table></figure>
<h3 id="ceil-å’Œfloor"><a href="#ceil-å’Œfloor" class="headerlink" title="ceil()å’Œfloor()"></a>ceil()å’Œfloor()</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ceil()åŠŸ èƒ½ï¼šè¿”å›å¤§äºæˆ–è€…ç­‰äºæŒ‡å®šè¡¨è¾¾å¼çš„æœ€å°æ•´æ•°</span><br><span class="line">floor()åŠŸ èƒ½ï¼šè¿”å›å°äºæˆ–è€…ç­‰äºæŒ‡å®šè¡¨è¾¾å¼çš„æœ€å¤§æ•´æ•°</span><br><span class="line">UIWebViewé‡Œé¢çš„å›¾ç‰‡è‡ªé€‚åº”å±å¹•</span><br></pre></td></tr></table></figure>
<h3 id="åœ¨webViewåŠ è½½å®Œçš„ä»£ç†æ–¹æ³•é‡Œé¢è¿™æ ·å†™ï¼š"><a href="#åœ¨webViewåŠ è½½å®Œçš„ä»£ç†æ–¹æ³•é‡Œé¢è¿™æ ·å†™ï¼š" class="headerlink" title="åœ¨webViewåŠ è½½å®Œçš„ä»£ç†æ–¹æ³•é‡Œé¢è¿™æ ·å†™ï¼š"></a>åœ¨webViewåŠ è½½å®Œçš„ä»£ç†æ–¹æ³•é‡Œé¢è¿™æ ·å†™ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- (void)webViewDidFinishLoad:(UIWebView *)webView</span><br><span class="line">&#123;</span><br><span class="line">    NSString *js = @&quot;function imgAutoFit() &#123; \</span><br><span class="line">    var imgs = document.getElementsByTagName(&apos;img&apos;); \</span><br><span class="line">    for (var i = 0; i &lt; imgs.length; ++i) &#123; \</span><br><span class="line">    var img = imgs[i]; \</span><br><span class="line">    img.style.maxWidth = %f; \</span><br><span class="line">    &#125; \</span><br><span class="line">    &#125;&quot;;</span><br><span class="line"></span><br><span class="line">    js = [NSString stringWithFormat:js, [UIScreen mainScreen].bounds.size.width - 20];</span><br><span class="line"></span><br><span class="line">    [webView stringByEvaluatingJavaScriptFromString:js];</span><br><span class="line">    [webView stringByEvaluatingJavaScriptFromString:@&quot;imgAutoFit()&quot;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="NSDateFormatæœ€ä½³æ–¹å¼ï¼ˆstrptimeï¼‰"><a href="#NSDateFormatæœ€ä½³æ–¹å¼ï¼ˆstrptimeï¼‰" class="headerlink" title="NSDateFormatæœ€ä½³æ–¹å¼ï¼ˆstrptimeï¼‰"></a>NSDateFormatæœ€ä½³æ–¹å¼ï¼ˆstrptimeï¼‰</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">+ (NSDate *)dateFromISO8601StringDateFormatter:(NSString *)string locale:(NSLocale *)locale&#123;</span><br><span class="line">    if (!string) &#123;</span><br><span class="line">        return nil;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    struct tm tm;</span><br><span class="line">    time_t t;</span><br><span class="line"></span><br><span class="line">    strptime([string cStringUsingEncoding:NSUTF8StringEncoding], &quot;%Y-%m-%d %H:%M:%S&quot;, &amp;tm);</span><br><span class="line">    tm.tm_isdst = -1;</span><br><span class="line">    t = mktime(&amp;tm);</span><br><span class="line"></span><br><span class="line">    return [NSDate dateWithTimeIntervalSince1970:t + [[NSTimeZone localTimeZone] secondsFromGMT]];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (NSString *)ISO8601String:(NSDate*)date &#123;</span><br><span class="line">    struct tm *timeinfo;</span><br><span class="line">    char buffer[80];</span><br><span class="line"></span><br><span class="line">    time_t rawtime = [date timeIntervalSince1970] - [[NSTimeZone localTimeZone] secondsFromGMT];</span><br><span class="line">    timeinfo = localtime(&amp;rawtime);</span><br><span class="line"></span><br><span class="line">    strftime(buffer, 80, &quot;%Y-%m-%d %H:%M:%S&quot;, timeinfo);</span><br><span class="line"></span><br><span class="line">    return [NSString stringWithCString:buffer encoding:NSUTF8StringEncoding];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ¯›ç»ç’ƒ"><a href="#æ¯›ç»ç’ƒ" class="headerlink" title="æ¯›ç»ç’ƒ"></a>æ¯›ç»ç’ƒ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//åˆ›å»º</span><br><span class="line">UIImageView *imageView = [[UIImageView alloc]initWithFrame:self.view.bounds];</span><br><span class="line">//å›¾ç‰‡</span><br><span class="line">imageView.image = [UIImage imageNamed:@&quot;1.jpeg&quot;];</span><br><span class="line">//èƒŒæ™¯é¢œè‰²</span><br><span class="line">imageView.backgroundColor = [UIColor yellowColor];</span><br><span class="line">//è®¾ç½®å›¾ç‰‡å†…å®¹æ¨¡å¼</span><br><span class="line">imageView.contentMode = UIViewContentModeScaleAspectFill;</span><br><span class="line"></span><br><span class="line">[self.view addSubview:imageView];</span><br><span class="line"></span><br><span class="line">//æ¯›ç»ç’ƒ</span><br><span class="line">UIToolbar *toolbar = [[UIToolbar alloc]initWithFrame:imageView.bounds];</span><br><span class="line">//æ ·å¼</span><br><span class="line">toolbar.barStyle = UIBarStyleDefault;</span><br><span class="line">//é€æ˜åº¦</span><br><span class="line">toolbar.alpha = 0.8f;</span><br><span class="line">[imageView addSubview:toolbar];</span><br></pre></td></tr></table></figure>
<h3 id="tableviewä¸‹æ‹‰åˆ·æ–°åœç•™ï¼ˆä¸æ»šåˆ°é¡¶éƒ¨ï¼‰ï¼Œ-ç±»ä¼¼QQï¼Œå¾®ä¿¡æ‹‰å»å†å²æ¶ˆæ¯"><a href="#tableviewä¸‹æ‹‰åˆ·æ–°åœç•™ï¼ˆä¸æ»šåˆ°é¡¶éƒ¨ï¼‰ï¼Œ-ç±»ä¼¼QQï¼Œå¾®ä¿¡æ‹‰å»å†å²æ¶ˆæ¯" class="headerlink" title="tableviewä¸‹æ‹‰åˆ·æ–°åœç•™ï¼ˆä¸æ»šåˆ°é¡¶éƒ¨ï¼‰ï¼Œ ç±»ä¼¼QQï¼Œå¾®ä¿¡æ‹‰å»å†å²æ¶ˆæ¯"></a>tableviewä¸‹æ‹‰åˆ·æ–°åœç•™ï¼ˆä¸æ»šåˆ°é¡¶éƒ¨ï¼‰ï¼Œ ç±»ä¼¼QQï¼Œå¾®ä¿¡æ‹‰å»å†å²æ¶ˆæ¯</h3><p>å…³äºTableViewä»£ç†æ–¹æ³•å’Œå…¶ä»–ä¸€äº›æ•°æ®ä¸é€»è¾‘å¤„ç†å’Œå¹³æ—¶ä¸€æ ·ï¼Œåªæ˜¯åœ¨ä¸‹å•¦çš„æ—¶å€™å•¦åˆ°çš„æ•°æ®ï¼Œæ”¾åˆ°æœ€å‰é¢ï¼ŒåŒäº‹æ§åˆ¶TableViewçš„åç§»ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">self.oldSize = self.tableView.contentSize;</span><br><span class="line">self.oldPoint = self.tableView.contentOffset;</span><br><span class="line"></span><br><span class="line">dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.2 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</span><br><span class="line"></span><br><span class="line">    //                if (self.isfirst) &#123;</span><br><span class="line">    for (int i = 0; i &lt; 15; i++) &#123;</span><br><span class="line">        [self.dataArray insertObject:[NSString stringWithFormat:@&quot;æ–°å¢åŠ ä¿¡æ¯%d&quot;,i] atIndex:0];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //            &#125;</span><br><span class="line">    //            self.isfirst = YES;</span><br><span class="line">    // åˆ·æ–°è¡¨æ ¼</span><br><span class="line">    [self.tableView reloadData];</span><br><span class="line"></span><br><span class="line">    // (æœ€å¥½åœ¨åˆ·æ–°è¡¨æ ¼åè°ƒç”¨)è°ƒç”¨endRefreshingå¯ä»¥ç»“æŸåˆ·æ–°çŠ¶æ€</span><br><span class="line">    [self.tableView EndRefreshing];</span><br><span class="line"></span><br><span class="line">    CGSize newSize = self.tableView.contentSize;</span><br><span class="line"></span><br><span class="line">    CGPoint newPoint = CGPointMake(0, self.oldPoint.y+newSize.height - self.oldSize.height);</span><br><span class="line">    self.tableView.contentOffset = newPoint;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="KeyChainéšç§ä¿¡æ¯å­˜å‚¨ï¼ˆä¸»è¦æ˜¯å¯†ç ç±»ï¼‰"><a href="#KeyChainéšç§ä¿¡æ¯å­˜å‚¨ï¼ˆä¸»è¦æ˜¯å¯†ç ç±»ï¼‰" class="headerlink" title="KeyChainéšç§ä¿¡æ¯å­˜å‚¨ï¼ˆä¸»è¦æ˜¯å¯†ç ç±»ï¼‰"></a>KeyChainéšç§ä¿¡æ¯å­˜å‚¨ï¼ˆä¸»è¦æ˜¯å¯†ç ç±»ï¼‰</h3><p>é›†æˆNSObject</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"> -(NSMutableDictionary *)getKeychainQuery:(NSString *)service</span><br><span class="line">&#123;</span><br><span class="line">    return [NSMutableDictionary dictionaryWithObjectsAndKeys:</span><br><span class="line">            (__bridge_transfer id)kSecClassGenericPassword,(__bridge_transfer id)kSecClass,</span><br><span class="line">            service, (__bridge_transfer id)kSecAttrService,</span><br><span class="line">            service, (__bridge_transfer id)kSecAttrAccount,</span><br><span class="line">            (__bridge_transfer id)kSecAttrAccessibleAfterFirstUnlock,(__bridge_transfer id)kSecAttrAccessible,</span><br><span class="line">            nil];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+ (void)saveKeychainValue:(NSString *)sValue Key:(NSString *)sKey</span><br><span class="line">&#123;</span><br><span class="line">    //Get search dictionary</span><br><span class="line">    NSMutableDictionary *keychainQuery = [self getKeychainQuery:sKey];</span><br><span class="line">    //Delete old item before add new item</span><br><span class="line">    SecItemDelete((__bridge_retained CFDictionaryRef)keychainQuery);</span><br><span class="line">    //Add new object to search dictionary(Attention:the data format)</span><br><span class="line">    [keychainQuery setObject:[NSKeyedArchiver archivedDataWithRootObject:sValue] forKey:(__bridge_transfer id)kSecValueData];</span><br><span class="line">    //Add item to keychain with the search dictionary</span><br><span class="line">    SecItemAdd((__bridge_retained CFDictionaryRef)keychainQuery, NULL);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+ (NSString *)readKeychainValue:(NSString *)sKey</span><br><span class="line">&#123;</span><br><span class="line">    NSString *ret = nil;</span><br><span class="line">    NSMutableDictionary *keychainQuery = [self getKeychainQuery:sKey];</span><br><span class="line"></span><br><span class="line">    //Configure the search setting</span><br><span class="line">    [keychainQuery setObject:(id)kCFBooleanTrue forKey:(__bridge_transfer id)kSecReturnData];</span><br><span class="line">    [keychainQuery setObject:(__bridge_transfer id)kSecMatchLimitOne forKey:(__bridge_transfer id)kSecMatchLimit];</span><br><span class="line">    CFDataRef keyData = NULL;</span><br><span class="line">    if (SecItemCopyMatching((__bridge_retained CFDictionaryRef)keychainQuery, (CFTypeRef *)&amp;keyData) == noErr) &#123;</span><br><span class="line">    &lt;a href=&quot;http://www.jobbole.com/members/xyz937134366&quot;&gt;@try&lt;/a&gt; &#123;</span><br><span class="line">        ret = (NSString *)[NSKeyedUnarchiver unarchiveObjectWithData:(__bridge_transfer NSData *)keyData];</span><br><span class="line">        &#125; &lt;a href=&quot;http://www.jobbole.com/members/wx895846013&quot;&gt;@catch&lt;/a&gt; (NSException *e) &#123;</span><br><span class="line">            NSLog(@&quot;Unarchive of %@ failed: %@&quot;, sKey, e);</span><br><span class="line">        &#125; &lt;a href=&quot;http://www.jobbole.com/members/finally&quot;&gt;@finally&lt;/a&gt; &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+ (void)deleteKeychainValue:(NSString *)sKey &#123;</span><br><span class="line">    NSMutableDictionary *keychainQuery = [self getKeychainQuery:sKey];</span><br><span class="line">    SecItemDelete((__bridge_retained CFDictionaryRef)keychainQuery);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è‡ªå®šä¹‰åœ†è§’è£å‰ªï¼šææ€§èƒ½"><a href="#è‡ªå®šä¹‰åœ†è§’è£å‰ªï¼šææ€§èƒ½" class="headerlink" title="è‡ªå®šä¹‰åœ†è§’è£å‰ªï¼šææ€§èƒ½"></a>è‡ªå®šä¹‰åœ†è§’è£å‰ªï¼šææ€§èƒ½</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">// ------------------------------------------------------------------</span><br><span class="line">// --------------------- ä»¥ä¸‹æ˜¯è‡ªå®šä¹‰å›¾åƒå¤„ç†éƒ¨åˆ† -----------------------</span><br><span class="line">// ------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">// è‡ªå®šä¹‰è£å‰ªç®—æ³•</span><br><span class="line">- (UIImage *)dealImage:(UIImage *)img cornerRadius:(CGFloat)c &#123;</span><br><span class="line">    // 1.CGDataProviderRef æŠŠ CGImage è½¬ äºŒè¿›åˆ¶æµ</span><br><span class="line">    CGDataProviderRef provider = CGImageGetDataProvider(img.CGImage);</span><br><span class="line">    void *imgData = (void *)CFDataGetBytePtr(CGDataProviderCopyData(provider));</span><br><span class="line">    int width = img.size.width * img.scale;</span><br><span class="line">    int height = img.size.height * img.scale;</span><br><span class="line"></span><br><span class="line">    // 2.å¤„ç† imgData</span><br><span class="line">//    dealImage(imgData, width, height);</span><br><span class="line">    cornerImage(imgData, width, height, c);</span><br><span class="line"></span><br><span class="line">    // 3.CGDataProviderRef æŠŠ äºŒè¿›åˆ¶æµ è½¬ CGImage</span><br><span class="line">    CGDataProviderRef pv = CGDataProviderCreateWithData(NULL, imgData, width * height * 4, releaseData);</span><br><span class="line">    CGImageRef content = CGImageCreate(width , height, 8, 32, 4 * width, CGColorSpaceCreateDeviceRGB(), kCGBitmapByteOrder32Big | kCGImageAlphaPremultipliedLast, pv, NULL, true, kCGRenderingIntentDefault);</span><br><span class="line">    UIImage *result = [UIImage imageWithCGImage:content];</span><br><span class="line">    CGDataProviderRelease(pv);      // é‡Šæ”¾ç©ºé—´</span><br><span class="line">    CGImageRelease(content);</span><br><span class="line"></span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void releaseData(void *info, const void *data, size_t size) &#123;</span><br><span class="line">    free((void *)data);</span><br><span class="line">&#125;</span><br><span class="line">// åœ¨ img ä¸Šå¤„ç†å›¾ç‰‡, æµ‹è¯•ç”¨</span><br><span class="line">void dealImage(UInt32 *img, int w, int h) &#123;</span><br><span class="line">    int num = w * h;</span><br><span class="line">    UInt32 *cur = img;</span><br><span class="line">    for (int i=0; i&lt;num; i++, cur++) &#123;</span><br><span class="line">        UInt8 *p = (UInt8 *)cur;</span><br><span class="line">        // RGBA æ’åˆ—</span><br><span class="line">        // f(x) = 255 - g(x) æ±‚è´Ÿç‰‡</span><br><span class="line">        p[0] = 255 - p[0];</span><br><span class="line">        p[1] = 255 - p[1];</span><br><span class="line">        p[2] = 255 - p[2];</span><br><span class="line">        p[3] = 255;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è£å‰ªåœ†è§’</span><br><span class="line">void cornerImage(UInt32 *const img, int w, int h, CGFloat cornerRadius) &#123;</span><br><span class="line">    CGFloat c = cornerRadius;</span><br><span class="line">    CGFloat min = w &gt; h ? h : w;</span><br><span class="line"></span><br><span class="line">    if (c &lt; 0) &#123; c = 0; &#125;</span><br><span class="line">    if (c &gt; min * 0.5) &#123; c = min * 0.5; &#125;</span><br><span class="line"></span><br><span class="line">    // å·¦ä¸Š y:[0, c), x:[x, c-y)</span><br><span class="line">    for (int y=0; y&lt;c; y++) &#123;</span><br><span class="line">        for (int x=0; x&lt;c-y; x++) &#123;</span><br><span class="line">            UInt32 *p = img + y * w + x;    // p 32ä½æŒ‡é’ˆï¼ŒRGBAæ’åˆ—ï¼Œå„8ä½</span><br><span class="line">            if (isCircle(c, c, c, x, y) == false) &#123;</span><br><span class="line">                *p = 0;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // å³ä¸Š y:[0, c), x:[w-c+y, w)</span><br><span class="line">    int tmp = w-c;</span><br><span class="line">    for (int y=0; y&lt;c; y++) &#123;</span><br><span class="line">        for (int x=tmp+y; x&lt;w; x++) &#123;</span><br><span class="line">            UInt32 *p = img + y * w + x;</span><br><span class="line">            if (isCircle(w-c, c, c, x, y) == false) &#123;</span><br><span class="line">                *p = 0;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // å·¦ä¸‹ y:[h-c, h), x:[0, y-h+c)</span><br><span class="line">    tmp = h-c;</span><br><span class="line">    for (int y=h-c; y&lt;h; y++) &#123;</span><br><span class="line">        for (int x=0; x&lt;y-tmp; x++) &#123;</span><br><span class="line">            UInt32 *p = img + y * w + x;</span><br><span class="line">            if (isCircle(c, h-c, c, x, y) == false) &#123;</span><br><span class="line">                *p = 0;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // å³ä¸‹ y~[h-c, h), x~[w-c+h-y, w)</span><br><span class="line">    tmp = w-c+h;</span><br><span class="line">    for (int y=h-c; y&lt;h; y++) &#123;</span><br><span class="line">        for (int x=tmp-y; x&lt;w; x++) &#123;</span><br><span class="line">            UInt32 *p = img + y * w + x;</span><br><span class="line">            if (isCircle(w-c, h-c, c, x, y) == false) &#123;</span><br><span class="line">                *p = 0;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// åˆ¤æ–­ç‚¹ (px, py) åœ¨ä¸åœ¨åœ†å¿ƒ (cx, cy) åŠå¾„ r çš„åœ†å†…</span><br><span class="line">static inline bool isCircle(float cx, float cy, float r, float px, float py) &#123;</span><br><span class="line">    if ((px-cx) * (px-cx) + (py-cy) * (py-cy) &gt; r * r) &#123;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å…¶ä»–å›¾åƒæ•ˆæœå¯ä»¥è‡ªå·±å†™å‡½æ•°ï¼Œç„¶ååœ¨ dealImage: ä¸­è°ƒç”¨ otherImage å³å¯</span><br><span class="line">void otherImage(UInt32 *const img, int w, int h) &#123;</span><br><span class="line">    // è‡ªå®šä¹‰å¤„ç†</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="éšè—tabbarä¸Šé¢çš„è™šçº¿"><a href="#éšè—tabbarä¸Šé¢çš„è™šçº¿" class="headerlink" title="éšè—tabbarä¸Šé¢çš„è™šçº¿"></a>éšè—tabbarä¸Šé¢çš„è™šçº¿</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//éšè—é˜´å½±çº¿</span><br><span class="line">[[UITabBar appearance] setShadowImage:[UIImage new]];</span><br><span class="line">- (void)setupTabBarBackgroundImage &#123;</span><br><span class="line">    UIImage *image = [UIImage imageNamed:@&quot;tab_bg&quot;];</span><br><span class="line">    CGFloat top = 40; // é¡¶ç«¯ç›–é«˜åº¦</span><br><span class="line">    CGFloat bottom = 40 ; // åº•ç«¯ç›–é«˜åº¦</span><br><span class="line">    CGFloat left = 100; // å·¦ç«¯ç›–å®½åº¦</span><br><span class="line">    CGFloat right = 100; // å³ç«¯ç›–å®½åº¦</span><br><span class="line">    UIEdgeInsets insets = UIEdgeInsetsMake(top, left, bottom, right);</span><br><span class="line">    // æŒ‡å®šä¸ºæ‹‰ä¼¸æ¨¡å¼ï¼Œä¼¸ç¼©åé‡æ–°èµ‹å€¼</span><br><span class="line">    UIImage *TabBgImage = [image resizableImageWithCapInsets:insets resizingMode:UIImageResizingModeStretch];</span><br><span class="line">    self.tabBar.backgroundImage = TabBgImage;</span><br><span class="line">    [[UITabBar appearance] setShadowImage:[UIImage new]];</span><br><span class="line">    [[UITabBar appearance] setBackgroundImage:[[UIImage alloc]init]];</span><br><span class="line">&#125;</span><br><span class="line">//è‡ªå®šä¹‰TabBaré«˜åº¦</span><br><span class="line">- (void)viewWillLayoutSubviews &#123;</span><br><span class="line">    CGRect tabFrame = self.tabBar.frame;</span><br><span class="line">    tabFrame.size.height = 60;</span><br><span class="line">    tabFrame.origin.y = self.view.frame.size.height - 60;</span><br><span class="line">    self.tabBar.frame = tabFrame;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="éšè—å¯¼èˆªæ ä¸‹é¢çš„è™šçº¿"><a href="#éšè—å¯¼èˆªæ ä¸‹é¢çš„è™šçº¿" class="headerlink" title="éšè—å¯¼èˆªæ ä¸‹é¢çš„è™šçº¿"></a>éšè—å¯¼èˆªæ ä¸‹é¢çš„è™šçº¿</h3><h6 id="æ–¹æ³•ä¸€ï¼Œä¸–ç•Œä½¿ç”¨èƒŒæ™¯å›¾ç‰‡ä¸é˜´å½±"><a href="#æ–¹æ³•ä¸€ï¼Œä¸–ç•Œä½¿ç”¨èƒŒæ™¯å›¾ç‰‡ä¸é˜´å½±" class="headerlink" title="#æ–¹æ³•ä¸€ï¼Œä¸–ç•Œä½¿ç”¨èƒŒæ™¯å›¾ç‰‡ä¸é˜´å½±"></a>#æ–¹æ³•ä¸€ï¼Œä¸–ç•Œä½¿ç”¨èƒŒæ™¯å›¾ç‰‡ä¸é˜´å½±</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewWillAppear:(BOOL)animated&#123;</span><br><span class="line"></span><br><span class="line">    // Called when the view is about to made visible. Default does nothing    </span><br><span class="line"></span><br><span class="line">    [super viewWillAppear:animated];</span><br><span class="line"></span><br><span class="line">    //å»é™¤å¯¼èˆªæ ä¸‹æ–¹çš„æ¨ªçº¿</span><br><span class="line"></span><br><span class="line">    [navigationBar setBackgroundImage:[UIImage imageWithColor:[self colorFromHexRGB:@&quot;33cccc&quot;]]</span><br><span class="line"></span><br><span class="line">                       forBarPosition:UIBarPositionAny</span><br><span class="line"></span><br><span class="line">                           barMetrics:UIBarMetricsDefault];</span><br><span class="line"></span><br><span class="line">    [navigationBar setShadowImage:[UIImage new]];</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯å”¯ä¸€ä¸€ä¸ªéšè—è¿™æ¡çº¿çš„å®˜æ–¹ç”¨æ³•ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªç¼ºé™·-åˆ é™¤äº†translucency(åŠé€æ˜)</p>
<h6 id="æ–¹æ³•äºŒï¼š"><a href="#æ–¹æ³•äºŒï¼š" class="headerlink" title="#æ–¹æ³•äºŒï¼š"></a>#æ–¹æ³•äºŒï¼š</h6><p>1ï¼‰å£°æ˜UIImageViewå˜é‡,å­˜å‚¨åº•éƒ¨æ¨ªçº¿</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@interface MyViewController &#123;</span><br><span class="line">    UIImageView *navBarHairlineImageView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2ï¼‰åœ¨viewDidLoadä¸­åŠ å…¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">navBarHairlineImageView = [self findHairlineImageViewUnder:self.navigationController.navigationBar];</span><br></pre></td></tr></table></figure>
<p>3ï¼‰å®ç°æ‰¾å‡ºåº•éƒ¨æ¨ªçº¿çš„å‡½æ•°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- (UIImageView *)findHairlineImageViewUnder:(UIView *)view &#123;</span><br><span class="line">    if ([view isKindOfClass:UIImageView.class] &amp;&amp; view.bounds.size.height &lt;= 1.0) &#123;</span><br><span class="line">            return (UIImageView *)view;</span><br><span class="line">    &#125;</span><br><span class="line">    for (UIView *subview in view.subviews) &#123;</span><br><span class="line">        UIImageView *imageView = [self findHairlineImageViewUnder:subview];</span><br><span class="line">        if (imageView) &#123;</span><br><span class="line">            return imageView;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return nil;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4ï¼‰æœ€ååœ¨viewWillAppearï¼ŒviewWillDisappearä¸­å¤„ç†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewWillAppear:(BOOL)animated &#123;</span><br><span class="line">    [super viewWillAppear:animated];</span><br><span class="line">    navBarHairlineImageView.hidden = YES;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)viewWillDisappear:(BOOL)animated &#123;</span><br><span class="line">    [super viewWillDisappear:animated];</span><br><span class="line">    navBarHairlineImageView.hidden = NO;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>###ä¸¤ä¸ªèŒƒå›´çš„å¯Œæ–‡æœ¬</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">NSString *times = [NSString stringWithFormat:@&quot;å“‡å¡ï¼æœ¬æ¬¡è§†é¢‘èŠå¤©%@&quot;, [info objectStringForKey:@&quot;times&quot;]];</span><br><span class="line">NSString *type = [NSString stringWithFormat:@&quot;%@&quot;, [info objectStringForKey:@&quot;type&quot;]];</span><br><span class="line">NSString *counts = nil;</span><br><span class="line">if ([type isEqualToString:@&quot;1&quot;]) &#123;</span><br><span class="line">    counts = [NSString stringWithFormat:@&quot;æ¶ˆè€—%@èƒ½é‡&quot;, [info objectStringForKey:@&quot;counts&quot;]];</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    counts = [NSString stringWithFormat:@&quot;èµšäº†%@ç§¯åˆ†&quot;, [info objectStringForKey:@&quot;counts&quot;]];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">NSString *formatString = [NSString stringWithFormat:@&quot;%@,%@&quot;, times, counts];</span><br><span class="line">NSMutableAttributedString *AttributedStr = [[NSMutableAttributedString alloc]initWithString:formatString];</span><br><span class="line">NSRange range = [formatString rangeOfString:@&quot;,&quot;];</span><br><span class="line">[AttributedStr addAttribute:NSForegroundColorAttributeName value:[UIColor colorWithHexString:@&quot;#fb455a&quot;] range:NSMakeRange(9, range.location - 9)];</span><br><span class="line">[AttributedStr addAttribute:NSForegroundColorAttributeName value:[UIColor colorWithHexString:@&quot;#fb455a&quot;] range:NSMakeRange(range.location + 3, formatString.length - range.location - 5)];</span><br></pre></td></tr></table></figure>
<h3 id="ä¿®æ”¹UIAlertController"><a href="#ä¿®æ”¹UIAlertController" class="headerlink" title="ä¿®æ”¹UIAlertController"></a>ä¿®æ”¹UIAlertController</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// åœ¨ viewDidLoad ä¸­åˆ›å»º</span><br><span class="line">UIAlertController *alertVC = [UIAlertController alertControllerWithTitle:nil message:AttributedStr.string preferredStyle:UIAlertControllerStyleAlert];</span><br><span class="line">// ç”¨ KVC ä¿®æ”¹å…¶ æ²¡æœ‰æš´éœ²å‡ºæ¥çš„</span><br></pre></td></tr></table></figure>
<p>// [alertVC setValue:AttributedTit forKey:@â€œattributedTitleâ€]; [alertVC setValue:AttributedStr forKey:@â€œattributedMessageâ€];</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//ä¿®æ”¹æŒ‰é’®çš„é¢œè‰²ï¼ŒåŒä¸Šå¯ä»¥ä½¿ç”¨åŒæ ·çš„æ–¹æ³•ä¿®æ”¹å†…å®¹ï¼Œæ ·å¼</span><br><span class="line">UIAlertAction *defaultAction = [UIAlertAction actionWithTitle:@&quot;ç¡®å®š&quot; style:UIAlertActionStyleDefault handler:nil];</span><br><span class="line">[defaultAction setValue:[UIColor blackColor] forKey:@&quot;_titleTextColor&quot;];</span><br><span class="line">[alertVC addAction:defaultAction];</span><br><span class="line"></span><br><span class="line">[self presentViewController:alertVC animated:YES completion:nil];</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä½¿ç”¨äº†ä¸€ç§ä¸ªäººæ¯”è¾ƒå–œæ¬¢çš„æ–¹æ³•ï¼Œ</p>
<blockquote>
<p>æ€»ä½“æ¥è¯´ï¼Œç¬¬äºŒç§åŠæ³•è¿˜æ˜¯å¾ˆå¥½åœ°ï¼Œå»ºè®®å¤§å®¶ä½¿ç”¨ç¬¬äºŒç§åŠæ³•ã€‚</p>
</blockquote>
<hr>
<hr>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/iOS-åŠŸèƒ½ä»£ç /" rel="tag"># iOS åŠŸèƒ½ä»£ç </a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/09/15/å…³äºå¤šçº¿ç¨‹å®‰å…¨/" rel="next" title="å…³äºå¤šçº¿ç¨‹å®‰å…¨">
                <i class="fa fa-chevron-left"></i> å…³äºå¤šçº¿ç¨‹å®‰å…¨
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/12/20/æˆ‘çš„è¯»ä¹¦æ¸…å•/" rel="prev" title="æˆ‘çš„è¯»ä¹¦æ¸…å•">
                æˆ‘çš„è¯»ä¹¦æ¸…å• <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/11/21/åŠŸèƒ½ä»£ç å°ç»“&å¤‡å¿˜/"
           data-title="åŠŸèƒ½ä»£ç å°ç»“&å¤‡å¿˜" data-url="http://dupengfei.com/2016/11/21/åŠŸèƒ½ä»£ç å°ç»“&å¤‡å¿˜/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="æœé¹é£" />
          <p class="site-author-name" itemprop="name">æœé¹é£</p>
           
              <p class="site-description motion-element" itemprop="description">iOS Developer</p>
          
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/dupengfei" target="_blank" title="å¾®åš">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  å¾®åš
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://plus.google.com/u/0/117309292640302365524" target="_blank" title="G+">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  G+
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1ï¼šå–æ¶ˆtableViewå¤´éƒ¨å’Œåº•éƒ¨æ‚¬æµ®æ•ˆæœ"><span class="nav-number">1.</span> <span class="nav-text">1ï¼šå–æ¶ˆtableViewå¤´éƒ¨å’Œåº•éƒ¨æ‚¬æµ®æ•ˆæœ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2ï¼šè·å–éšæœºæ•°"><span class="nav-number">2.</span> <span class="nav-text">2ï¼šè·å–éšæœºæ•°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3ï¼šå»é™¤tableViewåˆ†ç»„å¤´éƒ¨å¤šä½™é—´è·"><span class="nav-number">3.</span> <span class="nav-text">3ï¼šå»é™¤tableViewåˆ†ç»„å¤´éƒ¨å¤šä½™é—´è·</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸€ï¼š"><span class="nav-number">3.0.1.</span> <span class="nav-text">ä¸€ï¼š</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#äºŒï¼š"><span class="nav-number">3.0.2.</span> <span class="nav-text">äºŒï¼š</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æœ‰ä¸ªæœ‹å‹ç»™äº†ä¸€ä¸ªæ›´å¥½çš„æ–¹æ¡ˆ"><span class="nav-number">3.0.3.</span> <span class="nav-text">æœ‰ä¸ªæœ‹å‹ç»™äº†ä¸€ä¸ªæ›´å¥½çš„æ–¹æ¡ˆ</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4ï¼šå›¾ç‰‡æˆªå–"><span class="nav-number">4.</span> <span class="nav-text">4ï¼šå›¾ç‰‡æˆªå–</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5ï¼šæ¨¡ç³Šå›¾ç‰‡"><span class="nav-number">5.</span> <span class="nav-text">5ï¼šæ¨¡ç³Šå›¾ç‰‡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6ï¼šæ–‡ä»¶å¤§å°"><span class="nav-number">6.</span> <span class="nav-text">6ï¼šæ–‡ä»¶å¤§å°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7ï¼šæ‰‹æœºå·"><span class="nav-number">7.</span> <span class="nav-text">7ï¼šæ‰‹æœºå·</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8ï¼šé‚®ç®±"><span class="nav-number">8.</span> <span class="nav-text">8ï¼šé‚®ç®±</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#é€šè¿‡åŒºåˆ†å­—ç¬¦ä¸²"><span class="nav-number">8.0.1.</span> <span class="nav-text">é€šè¿‡åŒºåˆ†å­—ç¬¦ä¸²</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼éªŒè¯"><span class="nav-number">8.0.2.</span> <span class="nav-text">åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼éªŒè¯</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9ï¼šç½‘å€"><span class="nav-number">9.</span> <span class="nav-text">9ï¼šç½‘å€</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-é¦–å…ˆè¿›è¡Œç¬¬ä¸€æ­¥åˆ¤æ–­ä¼ å…¥çš„å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆHTTPè·¯å¾„çš„è¯­æ³•è§„åˆ™-å³â€HTTPS-E2-80-9D-æˆ–-â€œHTTP-E2-80-9D-ä»å°è£…çš„ä¸€ä¸ªå‡½æ•°-ä¼ å…¥å³å¯åˆ¤æ–­"><span class="nav-number">9.0.1.</span> <span class="nav-text">1.é¦–å…ˆè¿›è¡Œç¬¬ä¸€æ­¥åˆ¤æ–­ä¼ å…¥çš„å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆHTTPè·¯å¾„çš„è¯­æ³•è§„åˆ™,å³â€HTTPS://%E2%80%9D æˆ– â€œHTTP://%E2%80%9D ,ä»å°è£…çš„ä¸€ä¸ªå‡½æ•°,ä¼ å…¥å³å¯åˆ¤æ–­</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ç¬¬äºŒæ­¥-åˆ¤æ–­æ­¤è·¯å¾„æ˜¯å¦èƒ½å¤Ÿè¯·æ±‚æˆåŠŸ-ç›´æ¥è¿›è¡ŒHTTPè¯·æ±‚-è§‚å¯Ÿè¿”å›ç»“æœ-gt"><span class="nav-number">9.0.2.</span> <span class="nav-text">ç¬¬äºŒæ­¥,åˆ¤æ–­æ­¤è·¯å¾„æ˜¯å¦èƒ½å¤Ÿè¯·æ±‚æˆåŠŸ,ç›´æ¥è¿›è¡ŒHTTPè¯·æ±‚,è§‚å¯Ÿè¿”å›ç»“æœ-&gt;</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10ï¼šJSONè½¬å­—å…¸"><span class="nav-number">10.</span> <span class="nav-text">10ï¼šJSONè½¬å­—å…¸</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#æ•°ç»„è½¬JSON"><span class="nav-number">10.0.1.</span> <span class="nav-text">æ•°ç»„è½¬JSON</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11ï¼šiPhoneè®¾å¤‡ç±»å‹"><span class="nav-number">11.</span> <span class="nav-text">11ï¼šiPhoneè®¾å¤‡ç±»å‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12ï¼šiPhoneç³»ç»Ÿç‰ˆæœ¬"><span class="nav-number">12.</span> <span class="nav-text">12ï¼šiPhoneç³»ç»Ÿç‰ˆæœ¬</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13ï¼šæ—¥å¿—"><span class="nav-number">13.</span> <span class="nav-text">13ï¼šæ—¥å¿—</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14ï¼šé¢œè‰²"><span class="nav-number">14.</span> <span class="nav-text">14ï¼šé¢œè‰²</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15ï¼šå¼±å¼•ç”¨"><span class="nav-number">15.</span> <span class="nav-text">15ï¼šå¼±å¼•ç”¨</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16ï¼šå±å¹•å°ºå¯¸"><span class="nav-number">16.</span> <span class="nav-text">16ï¼šå±å¹•å°ºå¯¸</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17ï¼šè·å–viewçš„æ§åˆ¶"><span class="nav-number">17.</span> <span class="nav-text">17ï¼šè·å–viewçš„æ§åˆ¶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#18ï¼šå­—å…¸é˜²è¹¦"><span class="nav-number">18.</span> <span class="nav-text">18ï¼šå­—å…¸é˜²è¹¦</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸å¯å˜"><span class="nav-number">18.0.1.</span> <span class="nav-text">ä¸å¯å˜</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å¯å˜"><span class="nav-number">18.0.2.</span> <span class="nav-text">å¯å˜</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#19ï¼šæ•°ç»„é˜²è¹¦"><span class="nav-number">19.</span> <span class="nav-text">19ï¼šæ•°ç»„é˜²è¹¦</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸å¯å˜-1"><span class="nav-number">19.0.1.</span> <span class="nav-text">ä¸å¯å˜</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å¯å˜-1"><span class="nav-number">19.0.2.</span> <span class="nav-text">å¯å˜</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#20ï¼šæœ¬æ–‡è¾“å…¥é”™è¯¯æç¤º"><span class="nav-number">20.</span> <span class="nav-text">20ï¼šæœ¬æ–‡è¾“å…¥é”™è¯¯æç¤º</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#21ï¼šå½“å‰æ—¶é—´"><span class="nav-number">21.</span> <span class="nav-text">21ï¼šå½“å‰æ—¶é—´</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#22-å½“å‰ç‰ˆæœ¬"><span class="nav-number">22.</span> <span class="nav-text">22:å½“å‰ç‰ˆæœ¬</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#23-tabBarçº¢ç‚¹"><span class="nav-number">23.</span> <span class="nav-text">23:tabBarçº¢ç‚¹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#24-Logæ—¥å¿—-m"><span class="nav-number">24.</span> <span class="nav-text">24:Logæ—¥å¿—.m</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#25-MD5"><span class="nav-number">25.</span> <span class="nav-text">25:MD5</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#26-æŒ‰é’®èƒŒæ™¯é¢œè‰²"><span class="nav-number">26.</span> <span class="nav-text">26:æŒ‰é’®èƒŒæ™¯é¢œè‰²</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#27ï¼šå¯¹è±¡æ˜¯å¦ä¸ºç©º"><span class="nav-number">27.</span> <span class="nav-text">27ï¼šå¯¹è±¡æ˜¯å¦ä¸ºç©º</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#28ï¼šé”®ç›˜é€€å‡ºä¸éšè—"><span class="nav-number">28.</span> <span class="nav-text">28ï¼šé”®ç›˜é€€å‡ºä¸éšè—</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#29ï¼šè·å–è®¾å¤‡å”¯ä¸€ID"><span class="nav-number">29.</span> <span class="nav-text">29ï¼šè·å–è®¾å¤‡å”¯ä¸€ID</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#30ï¼šMOVè½¬Mp4"><span class="nav-number">30.</span> <span class="nav-text">30ï¼šMOVè½¬Mp4</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#31-ä¸Šä¼ å›¾ç‰‡"><span class="nav-number">31.</span> <span class="nav-text">31:ä¸Šä¼ å›¾ç‰‡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#32ï¼šä¸Šä¼ è§†é¢‘"><span class="nav-number">32.</span> <span class="nav-text">32ï¼šä¸Šä¼ è§†é¢‘</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸Šä¼ MOV"><span class="nav-number">32.0.1.</span> <span class="nav-text">ä¸Šä¼ MOV</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸Šä¼ MP4"><span class="nav-number">32.0.2.</span> <span class="nav-text">ä¸Šä¼ MP4</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#33-è·å–è§†é¢‘å¸§å›¾"><span class="nav-number">33.</span> <span class="nav-text">33:è·å–è§†é¢‘å¸§å›¾</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#åŒæ­¥è·å–å¸§å›¾"><span class="nav-number">33.0.1.</span> <span class="nav-text">åŒæ­¥è·å–å¸§å›¾</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å¼‚æ­¥è·å–å¸§å›¾"><span class="nav-number">33.0.2.</span> <span class="nav-text">å¼‚æ­¥è·å–å¸§å›¾</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#34-å‹ç¼©å¹¶å¯¼å‡ºè§†é¢‘"><span class="nav-number">34.</span> <span class="nav-text">34:å‹ç¼©å¹¶å¯¼å‡ºè§†é¢‘</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#35-ä¿å­˜è§†é¢‘åˆ°ç›¸å†Œ"><span class="nav-number">35.</span> <span class="nav-text">35:ä¿å­˜è§†é¢‘åˆ°ç›¸å†Œ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#36-è·å–å½“å‰æœ€é¡¶å±‚çš„ViewController"><span class="nav-number">36.</span> <span class="nav-text">36:è·å–å½“å‰æœ€é¡¶å±‚çš„ViewController</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#37-æ•°ç»„æ‹†åˆ†"><span class="nav-number">37.</span> <span class="nav-text">37:æ•°ç»„æ‹†åˆ†</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#38-å›¾ç‰‡å‹ç¼©"><span class="nav-number">38.</span> <span class="nav-text">38.å›¾ç‰‡å‹ç¼©</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#39-é‡Šæ”¾Timerå®"><span class="nav-number">39.</span> <span class="nav-text">39.é‡Šæ”¾Timerå®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#è·å–æŸä¸ªviewæ‰€åœ¨çš„æ§åˆ¶å™¨"><span class="nav-number">39.1.</span> <span class="nav-text">è·å–æŸä¸ªviewæ‰€åœ¨çš„æ§åˆ¶å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¸¤ç§æ–¹æ³•åˆ é™¤NSUserDefaultsæ‰€æœ‰è®°å½•"><span class="nav-number">39.2.</span> <span class="nav-text">ä¸¤ç§æ–¹æ³•åˆ é™¤NSUserDefaultsæ‰€æœ‰è®°å½•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ‰“å°ç³»ç»Ÿæ‰€æœ‰å·²æ³¨å†Œçš„å­—ä½“åç§°"><span class="nav-number">39.3.</span> <span class="nav-text">æ‰“å°ç³»ç»Ÿæ‰€æœ‰å·²æ³¨å†Œçš„å­—ä½“åç§°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è·å–å›¾ç‰‡æŸä¸€ç‚¹çš„é¢œè‰²"><span class="nav-number">39.4.</span> <span class="nav-text">è·å–å›¾ç‰‡æŸä¸€ç‚¹çš„é¢œè‰²</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å­—ç¬¦ä¸²åè½¬"><span class="nav-number">39.5.</span> <span class="nav-text">å­—ç¬¦ä¸²åè½¬</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç¦æ­¢é”å±ï¼Œ"><span class="nav-number">39.6.</span> <span class="nav-text">ç¦æ­¢é”å±ï¼Œ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ¨¡æ€æ¨å‡ºé€æ˜ç•Œé¢"><span class="nav-number">39.7.</span> <span class="nav-text">æ¨¡æ€æ¨å‡ºé€æ˜ç•Œé¢</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Xcodeè°ƒè¯•ä¸æ˜¾ç¤ºå†…å­˜å ç”¨"><span class="nav-number">39.8.</span> <span class="nav-text">Xcodeè°ƒè¯•ä¸æ˜¾ç¤ºå†…å­˜å ç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ˜¾ç¤ºéšè—æ–‡ä»¶"><span class="nav-number">39.9.</span> <span class="nav-text">æ˜¾ç¤ºéšè—æ–‡ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iOSè·³è½¬åˆ°App-Storeä¸‹è½½åº”ç”¨è¯„åˆ†"><span class="nav-number">39.10.</span> <span class="nav-text">iOSè·³è½¬åˆ°App Storeä¸‹è½½åº”ç”¨è¯„åˆ†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iOS-è·å–æ±‰å­—çš„æ‹¼éŸ³"><span class="nav-number">39.11.</span> <span class="nav-text">iOS è·å–æ±‰å­—çš„æ‹¼éŸ³</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ‰‹åŠ¨æ›´æ”¹iOSçŠ¶æ€æ çš„é¢œè‰²"><span class="nav-number">39.12.</span> <span class="nav-text">æ‰‹åŠ¨æ›´æ”¹iOSçŠ¶æ€æ çš„é¢œè‰²</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åˆ¤æ–­å½“å‰ViewControlleræ˜¯pushè¿˜æ˜¯presentçš„æ–¹å¼æ˜¾ç¤ºçš„"><span class="nav-number">39.13.</span> <span class="nav-text">åˆ¤æ–­å½“å‰ViewControlleræ˜¯pushè¿˜æ˜¯presentçš„æ–¹å¼æ˜¾ç¤ºçš„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è·å–å®é™…ä½¿ç”¨çš„LaunchImageå›¾ç‰‡"><span class="nav-number">39.14.</span> <span class="nav-text">è·å–å®é™…ä½¿ç”¨çš„LaunchImageå›¾ç‰‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iOSåœ¨å½“å‰å±å¹•è·å–ç¬¬ä¸€å“åº”"><span class="nav-number">39.15.</span> <span class="nav-text">iOSåœ¨å½“å‰å±å¹•è·å–ç¬¬ä¸€å“åº”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åˆ¤æ–­å¯¹è±¡æ˜¯å¦éµå¾ªäº†æŸåè®®"><span class="nav-number">39.16.</span> <span class="nav-text">åˆ¤æ–­å¯¹è±¡æ˜¯å¦éµå¾ªäº†æŸåè®®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åˆ¤æ–­viewæ˜¯ä¸æ˜¯æŒ‡å®šè§†å›¾çš„å­è§†å›¾"><span class="nav-number">39.17.</span> <span class="nav-text">åˆ¤æ–­viewæ˜¯ä¸æ˜¯æŒ‡å®šè§†å›¾çš„å­è§†å›¾</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NSArray-å¿«é€Ÿæ±‚æ€»å’Œ-æœ€å¤§å€¼-æœ€å°å€¼-å’Œ-å¹³å‡å€¼"><span class="nav-number">39.18.</span> <span class="nav-text">NSArray å¿«é€Ÿæ±‚æ€»å’Œ æœ€å¤§å€¼ æœ€å°å€¼ å’Œ å¹³å‡å€¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¿®æ”¹UITextFieldä¸­Placeholderçš„æ–‡å­—é¢œè‰²"><span class="nav-number">39.19.</span> <span class="nav-text">ä¿®æ”¹UITextFieldä¸­Placeholderçš„æ–‡å­—é¢œè‰²</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å…³äºNSDateFormatterçš„æ ¼å¼"><span class="nav-number">39.20.</span> <span class="nav-text">å…³äºNSDateFormatterçš„æ ¼å¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è·å–ä¸€ä¸ªç±»çš„æ‰€æœ‰å­ç±»"><span class="nav-number">39.21.</span> <span class="nav-text">è·å–ä¸€ä¸ªç±»çš„æ‰€æœ‰å­ç±»</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç›‘æµ‹IOSè®¾å¤‡æ˜¯å¦è®¾ç½®äº†ä»£ç†ï¼Œéœ€è¦CFNetwork-framework"><span class="nav-number">39.22.</span> <span class="nav-text">ç›‘æµ‹IOSè®¾å¤‡æ˜¯å¦è®¾ç½®äº†ä»£ç†ï¼Œéœ€è¦CFNetwork.framework</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#é˜¿æ‹‰ä¼¯æ•°å­—è½¬ä¸­æ–‡æ ¼å¼"><span class="nav-number">39.23.</span> <span class="nav-text">é˜¿æ‹‰ä¼¯æ•°å­—è½¬ä¸­æ–‡æ ¼å¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Base64ç¼–ç ä¸NSStringå¯¹è±¡æˆ–NSDataå¯¹è±¡çš„è½¬æ¢"><span class="nav-number">39.24.</span> <span class="nav-text">Base64ç¼–ç ä¸NSStringå¯¹è±¡æˆ–NSDataå¯¹è±¡çš„è½¬æ¢</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å–æ¶ˆUICollectionViewçš„éšå¼åŠ¨ç”»"><span class="nav-number">39.25.</span> <span class="nav-text">å–æ¶ˆUICollectionViewçš„éšå¼åŠ¨ç”»</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¸‹é¢å‡ ç§æ–¹æ³•éƒ½å¯ä»¥å¸®ä½ å»é™¤è¿™äº›åŠ¨ç”»"><span class="nav-number">39.26.</span> <span class="nav-text">ä¸‹é¢å‡ ç§æ–¹æ³•éƒ½å¯ä»¥å¸®ä½ å»é™¤è¿™äº›åŠ¨ç”»</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è®©Xcodeçš„æ§åˆ¶å°æ”¯æŒLLDBç±»å‹çš„æ‰“å°"><span class="nav-number">39.27.</span> <span class="nav-text">è®©Xcodeçš„æ§åˆ¶å°æ”¯æŒLLDBç±»å‹çš„æ‰“å°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CocoaPods-pod-install-pod-updateæ›´æ–°æ…¢çš„é—®é¢˜"><span class="nav-number">39.28.</span> <span class="nav-text">CocoaPods pod install/pod updateæ›´æ–°æ…¢çš„é—®é¢˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UIImage-å ç”¨å†…å­˜å¤§å°"><span class="nav-number">39.29.</span> <span class="nav-text">UIImage å ç”¨å†…å­˜å¤§å°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GCD-timerå®šæ—¶å™¨"><span class="nav-number">39.30.</span> <span class="nav-text">GCD timerå®šæ—¶å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å›¾ç‰‡ä¸Šç»˜åˆ¶æ–‡å­—-å†™ä¸€ä¸ªUIImageçš„category"><span class="nav-number">39.31.</span> <span class="nav-text">å›¾ç‰‡ä¸Šç»˜åˆ¶æ–‡å­— å†™ä¸€ä¸ªUIImageçš„category</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æŸ¥æ‰¾ä¸€ä¸ªè§†å›¾çš„æ‰€æœ‰å­è§†å›¾"><span class="nav-number">39.32.</span> <span class="nav-text">æŸ¥æ‰¾ä¸€ä¸ªè§†å›¾çš„æ‰€æœ‰å­è§†å›¾</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è®¡ç®—æ–‡ä»¶å¤§å°"><span class="nav-number">39.33.</span> <span class="nav-text">è®¡ç®—æ–‡ä»¶å¤§å°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UIViewè®¾ç½®éƒ¨åˆ†åœ†è§’"><span class="nav-number">39.34.</span> <span class="nav-text">UIViewè®¾ç½®éƒ¨åˆ†åœ†è§’</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å–ä¸Šæ•´ä¸å–ä¸‹æ•´"><span class="nav-number">39.35.</span> <span class="nav-text">å–ä¸Šæ•´ä¸å–ä¸‹æ•´</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è®¡ç®—å­—ç¬¦ä¸²å­—ç¬¦é•¿åº¦ï¼Œä¸€ä¸ªæ±‰å­—ç®—ä¸¤ä¸ªå­—ç¬¦"><span class="nav-number">39.36.</span> <span class="nav-text">è®¡ç®—å­—ç¬¦ä¸²å­—ç¬¦é•¿åº¦ï¼Œä¸€ä¸ªæ±‰å­—ç®—ä¸¤ä¸ªå­—ç¬¦</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç»™UIViewè®¾ç½®å›¾ç‰‡"><span class="nav-number">39.37.</span> <span class="nav-text">ç»™UIViewè®¾ç½®å›¾ç‰‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#é˜²æ­¢scrollViewæ‰‹åŠ¿è¦†ç›–ä¾§æ»‘æ‰‹åŠ¿"><span class="nav-number">39.38.</span> <span class="nav-text">é˜²æ­¢scrollViewæ‰‹åŠ¿è¦†ç›–ä¾§æ»‘æ‰‹åŠ¿</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å»æ‰å¯¼èˆªæ è¿”å›çš„backæ ‡é¢˜"><span class="nav-number">39.39.</span> <span class="nav-text">å»æ‰å¯¼èˆªæ è¿”å›çš„backæ ‡é¢˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å­—ç¬¦ä¸²ä¸­æ˜¯å¦å«æœ‰ä¸­æ–‡"><span class="nav-number">39.40.</span> <span class="nav-text">å­—ç¬¦ä¸²ä¸­æ˜¯å¦å«æœ‰ä¸­æ–‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dispatch-groupçš„ä½¿ç”¨"><span class="nav-number">39.41.</span> <span class="nav-text">dispatch_groupçš„ä½¿ç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UITextFieldæ¯å››ä½åŠ ä¸€ä¸ªç©ºæ ¼-å®ç°ä»£ç†"><span class="nav-number">39.42.</span> <span class="nav-text">UITextFieldæ¯å››ä½åŠ ä¸€ä¸ªç©ºæ ¼,å®ç°ä»£ç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è·å–ç§æœ‰å±æ€§å’Œæˆå‘˜å˜é‡-import"><span class="nav-number">39.43.</span> <span class="nav-text">è·å–ç§æœ‰å±æ€§å’Œæˆå‘˜å˜é‡ #import</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è·å–æ‰‹æœºå®‰è£…çš„åº”ç”¨"><span class="nav-number">39.44.</span> <span class="nav-text">è·å–æ‰‹æœºå®‰è£…çš„åº”ç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦åœ¨åŒä¸€å‘¨-å†™åœ¨NSDateçš„categoryé‡Œé¢"><span class="nav-number">39.45.</span> <span class="nav-text">åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦åœ¨åŒä¸€å‘¨ å†™åœ¨NSDateçš„categoryé‡Œé¢</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åº”ç”¨å†…æ‰“å¼€ç³»ç»Ÿè®¾ç½®ç•Œé¢"><span class="nav-number">39.46.</span> <span class="nav-text">åº”ç”¨å†…æ‰“å¼€ç³»ç»Ÿè®¾ç½®ç•Œé¢</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¯é€‰å€¼å¦‚ä¸‹ï¼š"><span class="nav-number">39.47.</span> <span class="nav-text">å¯é€‰å€¼å¦‚ä¸‹ï¼š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å±è”½è§¦å‘äº‹ä»¶ï¼Œ2ç§’åå–æ¶ˆå±è”½"><span class="nav-number">39.48.</span> <span class="nav-text">å±è”½è§¦å‘äº‹ä»¶ï¼Œ2ç§’åå–æ¶ˆå±è”½</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åŠ¨ç”»æš‚åœå†å¼€å§‹"><span class="nav-number">39.49.</span> <span class="nav-text">åŠ¨ç”»æš‚åœå†å¼€å§‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iOSä¸­æ•°å­—çš„æ ¼å¼åŒ–"><span class="nav-number">39.50.</span> <span class="nav-text">iOSä¸­æ•°å­—çš„æ ¼å¼åŒ–</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¦‚ä½•è·å–WebViewæ‰€æœ‰çš„å›¾ç‰‡åœ°å€ï¼Œ"><span class="nav-number">39.51.</span> <span class="nav-text">å¦‚ä½•è·å–WebViewæ‰€æœ‰çš„å›¾ç‰‡åœ°å€ï¼Œ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è·å–åˆ°webviewçš„é«˜åº¦"><span class="nav-number">39.52.</span> <span class="nav-text">è·å–åˆ°webviewçš„é«˜åº¦</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#navigationBarå˜ä¸ºçº¯é€æ˜"><span class="nav-number">39.53.</span> <span class="nav-text">navigationBarå˜ä¸ºçº¯é€æ˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tabBaråŒç†"><span class="nav-number">39.54.</span> <span class="nav-text">tabBaråŒç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#navigationBaræ ¹æ®æ»‘åŠ¨è·ç¦»çš„æ¸å˜è‰²å®ç°"><span class="nav-number">39.55.</span> <span class="nav-text">navigationBaræ ¹æ®æ»‘åŠ¨è·ç¦»çš„æ¸å˜è‰²å®ç°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iOS-å¼€å‘ä¸­ä¸€äº›ç›¸å…³çš„è·¯å¾„"><span class="nav-number">39.56.</span> <span class="nav-text">iOS å¼€å‘ä¸­ä¸€äº›ç›¸å…³çš„è·¯å¾„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#navigationItemçš„BarButtonItemå¦‚ä½•ç´§é å±å¹•å³è¾¹ç•Œæˆ–è€…å·¦è¾¹ç•Œï¼Ÿ"><span class="nav-number">39.57.</span> <span class="nav-text">navigationItemçš„BarButtonItemå¦‚ä½•ç´§é å±å¹•å³è¾¹ç•Œæˆ–è€…å·¦è¾¹ç•Œï¼Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NSStringè¿›è¡ŒURLç¼–ç å’Œè§£ç "><span class="nav-number">39.58.</span> <span class="nav-text">NSStringè¿›è¡ŒURLç¼–ç å’Œè§£ç </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UIWebViewè®¾ç½®User-Agentã€‚"><span class="nav-number">39.59.</span> <span class="nav-text">UIWebViewè®¾ç½®User-Agentã€‚</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è·å–ç¡¬ç›˜æ€»å®¹é‡ä¸å¯ç”¨å®¹é‡"><span class="nav-number">39.60.</span> <span class="nav-text">è·å–ç¡¬ç›˜æ€»å®¹é‡ä¸å¯ç”¨å®¹é‡:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è·å–UIColorçš„RGBAå€¼"><span class="nav-number">39.61.</span> <span class="nav-text">è·å–UIColorçš„RGBAå€¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¿®æ”¹textFieldçš„placeholderçš„å­—ä½“é¢œè‰²ã€å¤§å°"><span class="nav-number">39.62.</span> <span class="nav-text">ä¿®æ”¹textFieldçš„placeholderçš„å­—ä½“é¢œè‰²ã€å¤§å°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AFNç§»é™¤JSONä¸­çš„NSNull"><span class="nav-number">39.63.</span> <span class="nav-text">AFNç§»é™¤JSONä¸­çš„NSNull</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ceil-å’Œfloor"><span class="nav-number">39.64.</span> <span class="nav-text">ceil()å’Œfloor()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åœ¨webViewåŠ è½½å®Œçš„ä»£ç†æ–¹æ³•é‡Œé¢è¿™æ ·å†™ï¼š"><span class="nav-number">39.65.</span> <span class="nav-text">åœ¨webViewåŠ è½½å®Œçš„ä»£ç†æ–¹æ³•é‡Œé¢è¿™æ ·å†™ï¼š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NSDateFormatæœ€ä½³æ–¹å¼ï¼ˆstrptimeï¼‰"><span class="nav-number">39.66.</span> <span class="nav-text">NSDateFormatæœ€ä½³æ–¹å¼ï¼ˆstrptimeï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ¯›ç»ç’ƒ"><span class="nav-number">39.67.</span> <span class="nav-text">æ¯›ç»ç’ƒ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tableviewä¸‹æ‹‰åˆ·æ–°åœç•™ï¼ˆä¸æ»šåˆ°é¡¶éƒ¨ï¼‰ï¼Œ-ç±»ä¼¼QQï¼Œå¾®ä¿¡æ‹‰å»å†å²æ¶ˆæ¯"><span class="nav-number">39.68.</span> <span class="nav-text">tableviewä¸‹æ‹‰åˆ·æ–°åœç•™ï¼ˆä¸æ»šåˆ°é¡¶éƒ¨ï¼‰ï¼Œ ç±»ä¼¼QQï¼Œå¾®ä¿¡æ‹‰å»å†å²æ¶ˆæ¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#KeyChainéšç§ä¿¡æ¯å­˜å‚¨ï¼ˆä¸»è¦æ˜¯å¯†ç ç±»ï¼‰"><span class="nav-number">39.69.</span> <span class="nav-text">KeyChainéšç§ä¿¡æ¯å­˜å‚¨ï¼ˆä¸»è¦æ˜¯å¯†ç ç±»ï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è‡ªå®šä¹‰åœ†è§’è£å‰ªï¼šææ€§èƒ½"><span class="nav-number">39.70.</span> <span class="nav-text">è‡ªå®šä¹‰åœ†è§’è£å‰ªï¼šææ€§èƒ½</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#éšè—tabbarä¸Šé¢çš„è™šçº¿"><span class="nav-number">39.71.</span> <span class="nav-text">éšè—tabbarä¸Šé¢çš„è™šçº¿</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#éšè—å¯¼èˆªæ ä¸‹é¢çš„è™šçº¿"><span class="nav-number">39.72.</span> <span class="nav-text">éšè—å¯¼èˆªæ ä¸‹é¢çš„è™šçº¿</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#æ–¹æ³•ä¸€ï¼Œä¸–ç•Œä½¿ç”¨èƒŒæ™¯å›¾ç‰‡ä¸é˜´å½±"><span class="nav-number">39.72.0.0.1.</span> <span class="nav-text">#æ–¹æ³•ä¸€ï¼Œä¸–ç•Œä½¿ç”¨èƒŒæ™¯å›¾ç‰‡ä¸é˜´å½±</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#æ–¹æ³•äºŒï¼š"><span class="nav-number">39.72.0.0.2.</span> <span class="nav-text">#æ–¹æ³•äºŒï¼š</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¿®æ”¹UIAlertController"><span class="nav-number">39.73.</span> <span class="nav-text">ä¿®æ”¹UIAlertController</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2014 - 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">æœé¹é£</span>
</div>


<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>



        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"dupengfei"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  













  
  

  

  

  

  


  

</body>
</html>
