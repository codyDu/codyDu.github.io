<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="iOS," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="总以为写过的代码以后用到即使记不起来Google一下，大不了翻一下代码就好，但是总是要用到的时候找来找去还是巨烦有木有😂😂😂。终于下定决心整理成自己的，能最快速度的找到并实现，提高效率。何乐而不为呢？
GO!GO!GO!

取消tableView头部和底部悬浮效果
获取随机数
去除tableView分组头部多余间距
图片截取
模糊图片
获取文件大小
手机号验证
邮箱验证
网址验证
JSON转">
<meta property="og:type" content="article">
<meta property="og:title" content="功能代码小结&备忘">
<meta property="og:url" content="http://dupengfei.com/2016/11/21/功能代码小结&备忘/index.html">
<meta property="og:site_name" content="杜鹏飞的博客">
<meta property="og:description" content="总以为写过的代码以后用到即使记不起来Google一下，大不了翻一下代码就好，但是总是要用到的时候找来找去还是巨烦有木有😂😂😂。终于下定决心整理成自己的，能最快速度的找到并实现，提高效率。何乐而不为呢？
GO!GO!GO!

取消tableView头部和底部悬浮效果
获取随机数
去除tableView分组头部多余间距
图片截取
模糊图片
获取文件大小
手机号验证
邮箱验证
网址验证
JSON转">
<meta property="og:updated_time" content="2017-03-16T12:53:08.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="功能代码小结&备忘">
<meta name="twitter:description" content="总以为写过的代码以后用到即使记不起来Google一下，大不了翻一下代码就好，但是总是要用到的时候找来找去还是巨烦有木有😂😂😂。终于下定决心整理成自己的，能最快速度的找到并实现，提高效率。何乐而不为呢？
GO!GO!GO!

取消tableView头部和底部悬浮效果
获取随机数
去除tableView分组头部多余间距
图片截取
模糊图片
获取文件大小
手机号验证
邮箱验证
网址验证
JSON转">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://dupengfei.com/2016/11/21/功能代码小结&备忘/"/>





  <title> 功能代码小结&备忘 | 杜鹏飞的博客 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?b627bfa0d9d39ca04a7102b636415274";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">杜鹏飞的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">记录一些，分享一些，欢迎交流    Hosted by Coding Pages</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://dupengfei.com/2016/11/21/功能代码小结&备忘/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="杜鹏飞">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杜鹏飞的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                功能代码小结&备忘
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-11-21T02:11:42+08:00">
                2016-11-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/11/21/功能代码小结&备忘/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/11/21/功能代码小结&备忘/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>总以为写过的代码以后用到即使记不起来Google一下，大不了翻一下代码就好，但是总是要用到的时候找来找去还是巨烦有木有😂😂😂。终于下定决心整理成自己的，能最快速度的找到并实现，提高效率。何乐而不为呢？</p>
<p>GO!GO!GO!</p>
<ol>
<li>取消tableView头部和底部悬浮效果</li>
<li>获取随机数</li>
<li>去除tableView分组头部多余间距</li>
<li>图片截取</li>
<li>模糊图片</li>
<li>获取文件大小</li>
<li>手机号验证</li>
<li>邮箱验证</li>
<li>网址验证</li>
<li>JSON转字典</li>
<li>iPhone设备类型判断</li>
<li>iPhone系统版本判断</li>
<li>日志打印</li>
<li>颜色获取</li>
<li>弱引用</li>
<li>获取屏幕尺寸</li>
<li>获取view的控制</li>
<li>字典防崩溃</li>
<li>数组防崩溃</li>
<li>本文输入错误提示</li>
<li>获取当前时间</li>
<li>获取当前版本</li>
<li>tabBar红点显示</li>
<li>Log日志.m</li>
<li>MD5加密</li>
<li>按钮背景颜色</li>
<li>判断对象是否为空</li>
<li>键盘退出与隐藏通知</li>
<li>获取设备唯一ID</li>
<li>MOV转Mp4</li>
<li>上传图片</li>
<li>上传视频</li>
<li>获取视频帧图</li>
<li>压缩并导出视频</li>
<li>保存视频到相册</li>
<li>获取当前最顶层的ViewController</li>
<li>数组拆分</li>
<li>图片压缩</li>
<li>释放timer宏</li>
<li>获取某个view所在的控制器</li>
<li>两种方法删除NSUserDefaults所有记录</li>
<li>打印系统所有已注册的字体名称</li>
<li>获取图片某一点的颜色</li>
<li>字符串反转</li>
<li>禁止锁屏，</li>
<li>模态推出透明界面</li>
<li>Xcode调试不显示内存占用</li>
<li>显示隐藏文件</li>
<li>iOS跳转到App Store下载应用评分</li>
<li>iOS 获取汉字的拼音</li>
<li>手动更改iOS状态栏的颜色</li>
<li>判断当前ViewController是push还是present的方式显示的</li>
<li>获取实际使用的LaunchImage图片</li>
<li>iOS在当前屏幕获取第一响应</li>
<li>判断view是不是指定视图的子视图</li>
<li>NSArray 快速求总和 最大值 最小值 和 平均值</li>
<li>修改UITextField中Placeholder的文字颜色</li>
<li>关于NSDateFormatter的格式</li>
<li>获取一个类的所有子类</li>
<li>监测IOS设备是否设置了代理，需要CFNetwork.framework</li>
<li>阿拉伯数字转中文格式</li>
<li>Base64编码与NSString对象或NSData对象的转换</li>
<li>取消UICollectionView的隐式动画</li>
<li>下面几种方法都可以帮你去除这些动画</li>
<li>让Xcode的控制台支持LLDB类型的打印</li>
<li>CocoaPods pod install/pod update更新慢的问题</li>
<li>UIImage 占用内存大小</li>
<li>GCD timer定时器</li>
<li>图片上绘制文字 写一个UIImage的category</li>
<li>查找一个视图的所有子视图</li>
<li>计算文件大小</li>
<li>UIView设置部分圆角</li>
<li>取上整与取下整</li>
<li>计算字符串字符长度，一个汉字算两个字符</li>
<li>给UIView设置图片</li>
<li>防止scrollView手势覆盖侧滑手势</li>
<li>字符串中是否含有中文</li>
<li>dispatch_group的使用</li>
<li>UITextField每四位加一个空格,实现代理</li>
<li>获取私有属性和成员变量 #import</li>
<li>获取手机安装的应用</li>
<li>判断两个日期是否在同一周 写在NSDate的category里面</li>
<li>应用内打开系统设置界面</li>
<li>可选值如下：</li>
<li>屏蔽触发事件，2秒后取消屏蔽</li>
<li>动画暂停再开始</li>
<li>iOS中数字的格式化</li>
<li>如何获取WebView所有的图片地址，</li>
<li>获取到webview的高度</li>
<li>navigationBar变为纯透明</li>
<li>tabBar同理</li>
<li>navigationBar根据滑动距离的渐变色实现</li>
<li>iOS 开发中一些相关的路径</li>
<li>navigationItem的BarButtonItem如何紧靠屏幕右边界或者左边界？</li>
<li>NSString进行URL编码和解码</li>
<li>UIWebView设置User-Agent。</li>
<li>获取硬盘总容量与可用容量:</li>
<li>获取UIColor的RGBA值</li>
<li>修改textField的placeholder的字体颜色、大小</li>
<li>AFN移除JSON中的NSNull</li>
<li>ceil()和floor()</li>
<li>在webView加载完的代理方法里面这样写：</li>
<li>NSDateFormat最佳方式（strptime）</li>
<li>毛玻璃</li>
<li>tableview下拉刷新停留（不滚到顶部）， 类似QQ，微信拉去历史消息</li>
<li>KeyChain隐私信息存储（主要是密码类）</li>
<li>自定义圆角裁剪：搞性能</li>
<li>隐藏tabbar上面的虚线</li>
<li>隐藏导航栏下面的虚线</li>
<li>两个范围的富文本</li>
<li>修改UIAlertController</li>
</ol>
<h2 id="1：取消tableView头部和底部悬浮效果"><a href="#1：取消tableView头部和底部悬浮效果" class="headerlink" title="1：取消tableView头部和底部悬浮效果"></a>1：取消tableView头部和底部悬浮效果</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">- (void)scrollViewDidScroll:(UIScrollView *)scrollView &#123;  </div><div class="line">    CGFloat sectionHeaderHeight = 10; //这里是我的headerView和footerView的高度  </div><div class="line">    if (_tableView.contentOffset.y&lt;=sectionHeaderHeight&amp;&amp;_tableView.contentOffset.y&gt;=0) &#123;  </div><div class="line">        _tableView.contentInset = UIEdgeInsetsMake(-_tableView.contentOffset.y, 0, 0, 0);  </div><div class="line">    &#125; else if (_tableView.contentOffset.y&gt;=sectionHeaderHeight) &#123;  </div><div class="line">        _tableView.contentInset = UIEdgeInsetsMake(-sectionHeaderHeight, 0, 0, 0);  </div><div class="line">    &#125;  </div><div class="line">&#125;  </div><div class="line"></div><div class="line">    -(void)scrollViewDidScroll:(UIScrollView *)scrollView &#123;</div><div class="line"></div><div class="line">    if (scrollView == self.tableView)</div><div class="line"></div><div class="line">        &#123;</div><div class="line"></div><div class="line">        UITableView *tableview = (UITableView *)scrollView;</div><div class="line"></div><div class="line">        CGFloat sectionHeaderHeight = 64;</div><div class="line"></div><div class="line">        CGFloat sectionFooterHeight = 120;</div><div class="line"></div><div class="line">        CGFloat offsetY = tableview.contentOffset.y;</div><div class="line"></div><div class="line">        if (offsetY &gt;= 0 &amp;&amp; offsetY &lt;= sectionHeaderHeight)</div><div class="line"></div><div class="line">        &#123;</div><div class="line"></div><div class="line">            tableview.contentInset = UIEdgeInsetsMake(-offsetY, 0, -sectionFooterHeight, 0);</div><div class="line"></div><div class="line">        &#125;else if (offsetY &gt;= sectionHeaderHeight &amp;&amp; offsetY &lt;= tableview.contentSize.height - tableview.frame.size.height - sectionFooterHeight)</div><div class="line"></div><div class="line">        &#123;</div><div class="line"></div><div class="line">            tableview.contentInset = UIEdgeInsetsMake(-sectionHeaderHeight, 0, -sectionFooterHeight, 0);</div><div class="line"></div><div class="line">        &#125;else if (offsetY &gt;= tableview.contentSize.height - tableview.frame.size.height - sectionFooterHeight &amp;&amp; offsetY &lt;= tableview.contentSize.height - tableview.frame.size.height)         &#123;</div><div class="line"></div><div class="line">            tableview.contentInset = UIEdgeInsetsMake(-offsetY, 0, -(tableview.contentSize.height - tableview.frame.size.height - sectionFooterHeight), 0);</div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="2：获取随机数"><a href="#2：获取随机数" class="headerlink" title="2：获取随机数"></a>2：获取随机数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//第一种</div><div class="line">srand((unsigned)time(0)); //不加这句每次产生的随机数不变</div><div class="line">int i = rand() % 5;</div><div class="line">//第二种</div><div class="line">srandom(time(0));</div><div class="line">int i = random() % 5;</div><div class="line">//第三种</div><div class="line">int i = arc4random() % 5 ;</div></pre></td></tr></table></figure>
<h2 id="3：去除tableView分组头部多余间距"><a href="#3：去除tableView分组头部多余间距" class="headerlink" title="3：去除tableView分组头部多余间距"></a>3：去除tableView分组头部多余间距</h2><h4 id="一："><a href="#一：" class="headerlink" title="一："></a>一：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (void)viewDidLoad &#123;</div><div class="line">    [super viewDidLoad];</div><div class="line"></div><div class="line">    self.tableView.tableHeaderView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 0, CGFLOAT_MIN)];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="二："><a href="#二：" class="headerlink" title="二："></a>二：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (void)viewWillAppear:(BOOL)animated&#123;</div><div class="line"></div><div class="line">    [super viewWillAppear:animated];</div><div class="line"></div><div class="line">    CGRect frameH = self.tableView.tableHeaderView.frame;</div><div class="line">    frameH.size.height = 5;</div><div class="line">    UIView *headerView = [[UIView alloc] initWithFrame:frameH];</div><div class="line">    [self.tableView setTableHeaderView:headerView];</div><div class="line"></div><div class="line">    CGRect frameF = self.tableView.tableHeaderView.frame;</div><div class="line">    frameF.size.height = 1;</div><div class="line">    UIView *footerView = [[UIView alloc] initWithFrame:frameF];</div><div class="line">    [self.tableView setTableFooterView:footerView];</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="有个朋友给了一个更好的方案"><a href="#有个朋友给了一个更好的方案" class="headerlink" title="有个朋友给了一个更好的方案"></a>有个朋友给了一个更好的方案</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">直接设置内边距，TableView会直接根据内边距进行相应的缩进！</div></pre></td></tr></table></figure>
<h2 id="4：图片截取"><a href="#4：图片截取" class="headerlink" title="4：图片截取"></a>4：图片截取</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">CGSize itemSize = CGSizeMake(self.image.size.width, self.image.size.height);</div><div class="line"></div><div class="line">dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;</div><div class="line"></div><div class="line">    UIImage *dynamicCellImage = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:model.cover]]];</div><div class="line">            UIGraphicsBeginImageContextWithOptions(itemSize, NO, [UIScreen mainScreen].scale);</div><div class="line"></div><div class="line">            //压缩图片</div><div class="line">            CGSize newSize;</div><div class="line">            CGImageRef imageRef = nil;</div><div class="line"></div><div class="line">            if ((dynamicCellImage.size.width / dynamicCellImage.size.height) &lt; (self.image.size.width / self.image.size.height)) &#123;</div><div class="line">                newSize.width = dynamicCellImage.size.width;</div><div class="line">                newSize.height = dynamicCellImage.size.width * self.image.size.height / self.image.size.width;</div><div class="line"></div><div class="line">                imageRef = CGImageCreateWithImageInRect([dynamicCellImage CGImage], CGRectMake(0, fabs(dynamicCellImage.size.height - newSize.height) / 2, newSize.width, newSize.height));</div><div class="line"></div><div class="line">            &#125; else &#123;</div><div class="line">                newSize.height = dynamicCellImage.size.height;</div><div class="line">                newSize.width = dynamicCellImage.size.height * self.image.size.width / self.image.size.height;</div><div class="line"></div><div class="line">                imageRef = CGImageCreateWithImageInRect([dynamicCellImage CGImage], CGRectMake(fabs(dynamicCellImage.size.width - newSize.width) / 2, 0, newSize.width, newSize.height));</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            dispatch_async(dispatch_get_main_queue(), ^&#123;</div><div class="line">                self.image.image = [UIImage imageWithCGImage:imageRef];</div><div class="line">            &#125;);</div><div class="line"></div><div class="line">            UIGraphicsEndImageContext();</div><div class="line"></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="5：模糊图片"><a href="#5：模糊图片" class="headerlink" title="5：模糊图片"></a>5：模糊图片</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line">//加模糊效果，image是图片，blur是模糊度</div><div class="line">+ (UIImage *)blurryImage:(UIImage *)image withBlurLevel:(CGFloat)blur &#123;</div><div class="line">    //模糊度,</div><div class="line">    if ((blur &lt; 0.1f) || (blur &gt; 2.0f)) &#123;</div><div class="line">        blur = 0.5f;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //boxSize必须大于0</div><div class="line">    int boxSize = (int)(blur * 100);</div><div class="line">    boxSize -= (boxSize % 2) + 1;</div><div class="line">//    iCocosLog(@&quot;boxSize:%i&quot;,boxSize);</div><div class="line">    //图像处理</div><div class="line">    CGImageRef img = image.CGImage;</div><div class="line"></div><div class="line">    //图像缓存,输入缓存，输出缓存</div><div class="line">    vImage_Buffer inBuffer, outBuffer;</div><div class="line">    vImage_Error error;</div><div class="line">    //像素缓存</div><div class="line">    void *pixelBuffer;</div><div class="line"></div><div class="line">    //数据源提供者，Defines an opaque type that supplies Quartz with data.</div><div class="line">    CGDataProviderRef inProvider = CGImageGetDataProvider(img);</div><div class="line">    // provider’s data.</div><div class="line">    CFDataRef inBitmapData = CGDataProviderCopyData(inProvider);</div><div class="line"></div><div class="line">    //宽，高，字节/行，data</div><div class="line">    inBuffer.width = CGImageGetWidth(img);</div><div class="line">    inBuffer.height = CGImageGetHeight(img);</div><div class="line">    inBuffer.rowBytes = CGImageGetBytesPerRow(img);</div><div class="line">    inBuffer.data = (void*)CFDataGetBytePtr(inBitmapData);</div><div class="line"></div><div class="line">    //像数缓存，字节行*图片高</div><div class="line">    pixelBuffer = malloc(CGImageGetBytesPerRow(img) * CGImageGetHeight(img));</div><div class="line"></div><div class="line">    outBuffer.data = pixelBuffer;</div><div class="line">    outBuffer.width = CGImageGetWidth(img);</div><div class="line">    outBuffer.height = CGImageGetHeight(img);</div><div class="line">    outBuffer.rowBytes = CGImageGetBytesPerRow(img);</div><div class="line"></div><div class="line">    // 第三个中间的缓存区,抗锯齿的效果</div><div class="line">    void *pixelBuffer2 = malloc(CGImageGetBytesPerRow(img) * CGImageGetHeight(img));</div><div class="line">    vImage_Buffer outBuffer2;</div><div class="line">    outBuffer2.data = pixelBuffer2;</div><div class="line">    outBuffer2.width = CGImageGetWidth(img);</div><div class="line">    outBuffer2.height = CGImageGetHeight(img);</div><div class="line">    outBuffer2.rowBytes = CGImageGetBytesPerRow(img);</div><div class="line"></div><div class="line">    //Convolves a region of interest within an ARGB8888 source image by an implicit M x N kernel that has the effect of a box filter.</div><div class="line">    error = vImageBoxConvolve_ARGB8888(&amp;inBuffer, &amp;outBuffer2, NULL, 0, 0, boxSize, boxSize, NULL, kvImageEdgeExtend);</div><div class="line">    error = vImageBoxConvolve_ARGB8888(&amp;outBuffer2, &amp;inBuffer, NULL, 0, 0, boxSize, boxSize, NULL, kvImageEdgeExtend);</div><div class="line">    error = vImageBoxConvolve_ARGB8888(&amp;inBuffer, &amp;outBuffer, NULL, 0, 0, boxSize, boxSize, NULL, kvImageEdgeExtend);</div><div class="line"></div><div class="line">    if (error) &#123;</div><div class="line">        iCocosLog(@&quot;error from convolution %ld&quot;, error);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //    iCocosLog(@&quot;字节组成部分：%zu&quot;,CGImageGetBitsPerComponent(img));</div><div class="line">    //颜色空间DeviceRGB</div><div class="line">    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();</div><div class="line">    //用图片创建上下文,CGImageGetBitsPerComponent(img),7,8</div><div class="line">    CGContextRef ctx = CGBitmapContextCreate(</div><div class="line">                                             outBuffer.data,</div><div class="line">                                             outBuffer.width,</div><div class="line">                                             outBuffer.height,</div><div class="line">                                             8,</div><div class="line">                                             outBuffer.rowBytes,</div><div class="line">                                             colorSpace,</div><div class="line">                                             CGImageGetBitmapInfo(image.CGImage));</div><div class="line"></div><div class="line">    //根据上下文，处理过的图片，重新组件</div><div class="line">    CGImageRef imageRef = CGBitmapContextCreateImage (ctx);</div><div class="line">    UIImage *returnImage = [UIImage imageWithCGImage:imageRef];</div><div class="line"></div><div class="line">    //clean up</div><div class="line">    CGContextRelease(ctx);</div><div class="line">    CGColorSpaceRelease(colorSpace);</div><div class="line"></div><div class="line">    free(pixelBuffer);</div><div class="line">    free(pixelBuffer2);</div><div class="line">    CFRelease(inBitmapData);</div><div class="line"></div><div class="line">    CGColorSpaceRelease(colorSpace);</div><div class="line">    CGImageRelease(imageRef);</div><div class="line"></div><div class="line">    return returnImage;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="6：文件大小"><a href="#6：文件大小" class="headerlink" title="6：文件大小"></a>6：文件大小</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> *  通常用于删除缓存的时，计算缓存大小</div><div class="line"> */</div><div class="line">//单个文件的大小</div><div class="line">+ (long long) fileSizeAtPath:(NSString*) filePath&#123;</div><div class="line">    NSFileManager* manager = [NSFileManager defaultManager];</div><div class="line">    if ([manager fileExistsAtPath:filePath])&#123;</div><div class="line">        return [[manager attributesOfItemAtPath:filePath error:nil] fileSize];</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="7：手机号"><a href="#7：手机号" class="headerlink" title="7：手机号"></a>7：手机号</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> *  手机号判断</div><div class="line"> *</div><div class="line"> *  @param mobileNum 号码字符串</div><div class="line"> *</div><div class="line"> *  @return BOOL</div><div class="line"> */</div><div class="line">+ (BOOL)isMobileNumber:(NSString *)mobileNum</div><div class="line">&#123;</div><div class="line">        /**</div><div class="line">         * 移动号段正则表达式</div><div class="line">         */</div><div class="line">        NSString *CM_NUM = @&quot;^((13[4-9])|(147)|(15[0-2,7-9])|(178)|(18[2-4,7-8]))\\d&#123;8&#125;|(1705)\\d&#123;7&#125;$&quot;;</div><div class="line">        /**</div><div class="line">         * 联通号段正则表达式</div><div class="line">         */</div><div class="line">        NSString *CU_NUM = @&quot;^((13[0-2])|(145)|(15[5-6])|(176)|(18[5,6]))\\d&#123;8&#125;|(1709)\\d&#123;7&#125;$&quot;;</div><div class="line">        /**</div><div class="line">         * 电信号段正则表达式</div><div class="line">         */</div><div class="line">        NSString *CT_NUM = @&quot;^((133)|(153)|(177)|(18[0,1,9]))\\d&#123;8&#125;$&quot;;</div><div class="line"></div><div class="line">        NSPredicate *pred1 = [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;, CM_NUM];</div><div class="line">        BOOL isMatch1 = [pred1 evaluateWithObject:mobileNum];</div><div class="line">        NSPredicate *pred2 = [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;, CU_NUM];</div><div class="line">        BOOL isMatch2 = [pred2 evaluateWithObject:mobileNum];</div><div class="line">        NSPredicate *pred3 = [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;, CT_NUM];</div><div class="line">        BOOL isMatch3 = [pred3 evaluateWithObject:mobileNum];</div><div class="line"></div><div class="line">        if (isMatch1 || isMatch2 || isMatch3) &#123;</div><div class="line">            return YES;</div><div class="line">        &#125;else&#123;</div><div class="line">            return NO;</div><div class="line">        &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="8：邮箱"><a href="#8：邮箱" class="headerlink" title="8：邮箱"></a>8：邮箱</h2><h4 id="通过区分字符串"><a href="#通过区分字符串" class="headerlink" title="通过区分字符串"></a>通过区分字符串</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line">-(BOOL)validateEmail:(NSString*)email</div><div class="line"></div><div class="line">&#123;</div><div class="line"></div><div class="line">    if((0 != [email rangeOfString:@&quot;@&quot;].length) &amp;&amp;</div><div class="line"></div><div class="line">       (0 != [email rangeOfString:@&quot;.&quot;].length))</div><div class="line"></div><div class="line">    &#123;</div><div class="line"></div><div class="line">        NSCharacterSet* tmpInvalidCharSet = [[NSCharacterSet alphanumericCharacterSet] invertedSet];</div><div class="line"></div><div class="line">        NSMutableCharacterSet* tmpInvalidMutableCharSet = [[tmpInvalidCharSet mutableCopy] autorelease];</div><div class="line"></div><div class="line">        [tmpInvalidMutableCharSet removeCharactersInString:@&quot;_-&quot;];</div><div class="line"></div><div class="line">        NSRange range1 = [email rangeOfString:@&quot;@&quot;</div><div class="line"></div><div class="line">                                      options:NSCaseInsensitiveSearch];</div><div class="line"></div><div class="line">        //取得用户名部分</div><div class="line"></div><div class="line">        NSString* userNameString = [email substringToIndex:range1.location];</div><div class="line"></div><div class="line">        NSArray* userNameArray   = [userNameString componentsSeparatedByString:@&quot;.&quot;];</div><div class="line"></div><div class="line">        for(NSString* string in userNameArray)</div><div class="line"></div><div class="line">        &#123;</div><div class="line"></div><div class="line">            NSRange rangeOfInavlidChars = [string rangeOfCharacterFromSet: tmpInvalidMutableCharSet];</div><div class="line"></div><div class="line">            if(rangeOfInavlidChars.length != 0 || [string isEqualToString:@&quot;&quot;])</div><div class="line"></div><div class="line">                return NO;</div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        //取得域名部分</div><div class="line"></div><div class="line">        NSString *domainString = [email substringFromIndex:range1.location+1];</div><div class="line"></div><div class="line">        NSArray *domainArray   = [domainString componentsSeparatedByString:@&quot;.&quot;];</div><div class="line"></div><div class="line">        for(NSString *string in domainArray)</div><div class="line"></div><div class="line">        &#123;</div><div class="line"></div><div class="line">            NSRange rangeOfInavlidChars=[string rangeOfCharacterFromSet:tmpInvalidMutableCharSet];</div><div class="line"></div><div class="line">            if(rangeOfInavlidChars.length !=0 || [string isEqualToString:@&quot;&quot;])</div><div class="line"></div><div class="line">                return NO;</div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return YES;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    else &#123;</div><div class="line"></div><div class="line">       return NO;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="利用正则表达式验证"><a href="#利用正则表达式验证" class="headerlink" title="利用正则表达式验证"></a>利用正则表达式验证</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">-(BOOL)isValidateEmail:(NSString *)email &#123;</div><div class="line"></div><div class="line">    NSString *emailRegex = @&quot;[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]&#123;2,4&#125;&quot;; </div><div class="line"></div><div class="line">    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;, emailRegex]; </div><div class="line"></div><div class="line">    return [emailTest evaluateWithObject:email];</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="9：网址"><a href="#9：网址" class="headerlink" title="9：网址"></a>9：网址</h2><h4 id="1-首先进行第一步判断传入的字符串是否符合HTTP路径的语法规则-即”HTTPS-E2-80-9D-或-“HTTP-E2-80-9D-从封装的一个函数-传入即可判断"><a href="#1-首先进行第一步判断传入的字符串是否符合HTTP路径的语法规则-即”HTTPS-E2-80-9D-或-“HTTP-E2-80-9D-从封装的一个函数-传入即可判断" class="headerlink" title="1.首先进行第一步判断传入的字符串是否符合HTTP路径的语法规则,即”HTTPS://%E2%80%9D 或 “HTTP://%E2%80%9D ,从封装的一个函数,传入即可判断"></a>1.首先进行第一步判断传入的字符串是否符合HTTP路径的语法规则,即”<a href="HTTPS://%E2%80%9D" target="_blank" rel="external">HTTPS://%E2%80%9D</a> 或 “<a href="HTTP://%E2%80%9D" target="_blank" rel="external">HTTP://%E2%80%9D</a> ,从封装的一个函数,传入即可判断</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">- (NSURL *)smartURLForString:(NSString *)str</div><div class="line">&#123;</div><div class="line">    NSURL *     result;</div><div class="line">    NSString *  trimmedStr;</div><div class="line">    NSRange     schemeMarkerRange;</div><div class="line">    NSString *  scheme;</div><div class="line"></div><div class="line">    assert(str != nil);</div><div class="line"></div><div class="line">    result = nil;</div><div class="line"></div><div class="line">    trimmedStr = [str stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];</div><div class="line">    if ( (trimmedStr != nil) &amp;&amp; (trimmedStr.length != 0) ) &#123;</div><div class="line">        schemeMarkerRange = [trimmedStr rangeOfString:@&quot;://&quot;];</div><div class="line"></div><div class="line">        if (schemeMarkerRange.location == NSNotFound) &#123;</div><div class="line">            result = [NSURL URLWithString:[NSString stringWithFormat:@&quot;http://%@&quot;, trimmedStr]];</div><div class="line">        &#125; else &#123;</div><div class="line">            scheme = [trimmedStr substringWithRange:NSMakeRange(0, schemeMarkerRange.location)];</div><div class="line">            assert(scheme != nil);</div><div class="line"></div><div class="line">            if ( ([scheme compare:@&quot;http&quot;  options:NSCaseInsensitiveSearch] == NSOrderedSame)</div><div class="line">                || ([scheme compare:@&quot;https&quot; options:NSCaseInsensitiveSearch] == NSOrderedSame) ) &#123;</div><div class="line">                result = [NSURL URLWithString:trimmedStr];</div><div class="line">            &#125; else &#123;</div><div class="line">                // It looks like this is some unsupported URL scheme.</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    return result;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="第二步-判断此路径是否能够请求成功-直接进行HTTP请求-观察返回结果-gt"><a href="#第二步-判断此路径是否能够请求成功-直接进行HTTP请求-观察返回结果-gt" class="headerlink" title="第二步,判断此路径是否能够请求成功,直接进行HTTP请求,观察返回结果-&gt;"></a>第二步,判断此路径是否能够请求成功,直接进行HTTP请求,观察返回结果-&gt;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">//判断</div><div class="line">-(void) validateUrl: (NSURL *) candidate &#123;</div><div class="line">    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:candidate];</div><div class="line">    [request setHTTPMethod:@&quot;HEAD&quot;];</div><div class="line">    NSURLSession *session = [NSURLSession sessionWithConfiguration:[NSURLSessionConfiguration defaultSessionConfiguration]];</div><div class="line">    NSURLSessionDataTask *task = [session dataTaskWithRequest:request completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) &#123;</div><div class="line">        NSLog(@&quot;error %@&quot;,error);</div><div class="line">        if (error) &#123;</div><div class="line">            NSLog(@&quot;不可用&quot;);</div><div class="line">        &#125;else&#123;</div><div class="line">            NSLog(@&quot;可用&quot;);</div><div class="line">        &#125;</div><div class="line">    &#125;];</div><div class="line">    [task resume];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="10：JSON转字典"><a href="#10：JSON转字典" class="headerlink" title="10：JSON转字典"></a>10：JSON转字典</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">/*!</div><div class="line"> * @brief 把格式化的JSON格式的字符串转换成字典</div><div class="line"> * @param jsonString JSON格式的字符串</div><div class="line"> * @return 返回字典</div><div class="line"> */</div><div class="line">- (NSDictionary *)dictionaryWithJsonString:(NSString *)jsonString &#123;</div><div class="line">    if (jsonString == nil) &#123;</div><div class="line">        return nil;</div><div class="line">    &#125;</div><div class="line">    iCocosLog(@&quot;%@&quot;, jsonString);</div><div class="line"></div><div class="line">    NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];</div><div class="line">    NSError *err;</div><div class="line">    NSDictionary *dic = [NSJSONSerialization JSONObjectWithData:jsonData</div><div class="line">                                                        options:NSJSONReadingMutableContainers</div><div class="line">                                                          error:&amp;err];</div><div class="line">    if(err) &#123;</div><div class="line">        iCocosLog(@&quot;json解析失败：%@&quot;,err);</div><div class="line">        return nil;</div><div class="line">    &#125;</div><div class="line">    return dic;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="数组转JSON"><a href="#数组转JSON" class="headerlink" title="数组转JSON"></a>数组转JSON</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">NSArray *uids = [self.allModelUID objectAtIndexCheck:range];</div><div class="line"></div><div class="line">NSError *error = nil;</div><div class="line">NSData *picsJsonData = [NSJSONSerialization dataWithJSONObject:uids</div><div class="line">                                                       options:NSJSONWritingPrettyPrinted</div><div class="line">                                                         error:&amp;error];</div><div class="line">NSString *JSONString = [[NSString alloc] initWithData:picsJsonData encoding:NSUTF8StringEncoding];</div></pre></td></tr></table></figure>
<h2 id="11：iPhone设备类型"><a href="#11：iPhone设备类型" class="headerlink" title="11：iPhone设备类型"></a>11：iPhone设备类型</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line">typedef NS_ENUM(char, iPhoneModel)&#123;//0~3</div><div class="line">    iPhone4,//320*480</div><div class="line">    iPhone5,//320*568</div><div class="line">    iPhone6,//375*667</div><div class="line">    iPhone6Plus,//414*736</div><div class="line">    UnKnown</div><div class="line">&#125;;</div><div class="line"></div><div class="line">/**</div><div class="line"> *  return current running iPhone model</div><div class="line"> *</div><div class="line"> *  @return iPhone model</div><div class="line"> */</div><div class="line">+ (iPhoneModel)iPhonesModel &#123;</div><div class="line">    //bounds method gets the points not the pixels!!!</div><div class="line">    CGRect rect = [[UIScreen mainScreen] bounds];</div><div class="line"></div><div class="line">    CGFloat width = rect.size.width;</div><div class="line">    CGFloat height = rect.size.height;</div><div class="line"></div><div class="line">    //get current interface Orientation</div><div class="line">    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];</div><div class="line">    //unknown</div><div class="line">    if (UIInterfaceOrientationUnknown == orientation) &#123;</div><div class="line">        return UnKnown;</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">     //    portrait   width * height</div><div class="line">     //    iPhone4:320*480</div><div class="line">     //    iPhone5:320*568</div><div class="line">     //    iPhone6:375*667</div><div class="line">     //    iPhone6Plus:414*736</div><div class="line">     */</div><div class="line"></div><div class="line">    //portrait</div><div class="line">    if (UIInterfaceOrientationPortrait == orientation) &#123;</div><div class="line">        if (width ==  320.0f) &#123;</div><div class="line">            if (height == 480.0f) &#123;</div><div class="line">                return iPhone4;</div><div class="line">            &#125; else &#123;</div><div class="line">                return iPhone5;</div><div class="line">            &#125;</div><div class="line">        &#125; else if (width == 375.0f) &#123;</div><div class="line">            return iPhone6;</div><div class="line">        &#125; else if (width == 414.0f) &#123;</div><div class="line">            return iPhone6Plus;</div><div class="line">        &#125;</div><div class="line">    &#125; else if (UIInterfaceOrientationLandscapeLeft == orientation || UIInterfaceOrientationLandscapeRight == orientation) &#123;//landscape</div><div class="line">        if (height == 320.0) &#123;</div><div class="line">            if (width == 480.0f) &#123;</div><div class="line">                return iPhone4;</div><div class="line">            &#125; else &#123;</div><div class="line">                return iPhone5;</div><div class="line">            &#125;</div><div class="line">        &#125; else if (height == 375.0f) &#123;</div><div class="line">            return iPhone6;</div><div class="line">        &#125; else if (height == 414.0f) &#123;</div><div class="line">            return iPhone6Plus;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    return UnKnown;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="12：iPhone系统版本"><a href="#12：iPhone系统版本" class="headerlink" title="12：iPhone系统版本"></a>12：iPhone系统版本</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//获取当前系统版本</div><div class="line">#define __ios10_0__ ([[UIDevice currentDevice].systemVersion floatValue] &gt;= 10.0)</div><div class="line">#define __ios9_0__ ([[UIDevice currentDevice].systemVersion floatValue] &gt;= 9.0)</div><div class="line">#define __ios8_0__ ([[UIDevice currentDevice].systemVersion floatValue] &gt;= 8.0)</div></pre></td></tr></table></figure>
<h2 id="13：日志"><a href="#13：日志" class="headerlink" title="13：日志"></a>13：日志</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// 日志输出</div><div class="line">#ifdef DEBUG // 开发阶段-DEBUG阶段:使用Log</div><div class="line">#define iCocosLog(...) NSLog(__VA_ARGS__)</div><div class="line">#else // 发布阶段-上线阶段:移除Log</div><div class="line">#define iCocosLog(...)</div><div class="line">#endif</div></pre></td></tr></table></figure>
<p>详细</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#ifdef DEBUG</div><div class="line">#define iCocosLog(format, ...) printf(&quot;\n[%s] %s [第%d行] %s\n&quot;, __TIME__, __FUNCTION__, __LINE__, [[NSString stringWithFormat:format, ## __VA_ARGS__] UTF8String]);</div><div class="line">#else</div><div class="line">#define iCocosLog(format, ...)</div><div class="line">#endif</div></pre></td></tr></table></figure>
<h2 id="14：颜色"><a href="#14：颜色" class="headerlink" title="14：颜色"></a>14：颜色</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// 颜色</div><div class="line">#define iCocosARGBColor(r, g, b, a) [UIColor colorWithRed:(r)/255.0 green:(g)/255.0 blue:(b)/255.0 alpha:a]</div><div class="line">#define iCocosColor(r, g, b) iCocosARGBColor((r), (g), (b), 255)</div><div class="line"></div><div class="line">#define random(r, g, b, a) [UIColor colorWithRed:(r)/255.0 green:(g)/255.0 blue:(b)/255.0 alpha:(a)/255.0]</div><div class="line">#define iCocosRandomColor (random(arc4random_uniform(256), arc4random_uniform(256), arc4random_uniform(256), arc4random_uniform(256)))</div></pre></td></tr></table></figure>
<h2 id="15：弱引用"><a href="#15：弱引用" class="headerlink" title="15：弱引用"></a>15：弱引用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// 弱引用</div><div class="line">#define iCocosWeakSelf __weak typeof(self) weakSelf = self;</div></pre></td></tr></table></figure>
<h2 id="16：屏幕尺寸"><a href="#16：屏幕尺寸" class="headerlink" title="16：屏幕尺寸"></a>16：屏幕尺寸</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">// 屏幕尺寸</div><div class="line">#define iCocosScreenH [UIScreen mainScreen].bounds.size.height</div><div class="line">#define iCocosScreenW [UIScreen mainScreen].bounds.size.width</div></pre></td></tr></table></figure>
<h2 id="17：获取view的控制"><a href="#17：获取view的控制" class="headerlink" title="17：获取view的控制"></a>17：获取view的控制</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">/** 获取当前View的控制器对象 */</div><div class="line">-(UIViewController *)getCurrentViewController&#123;</div><div class="line">    UIResponder *next = [self nextResponder];</div><div class="line">    do &#123;</div><div class="line">        if ([next isKindOfClass:[UIViewController class]]) &#123;</div><div class="line">            return (UIViewController *)next;</div><div class="line">        &#125;</div><div class="line">        next = [next nextResponder];</div><div class="line">    &#125; while (next != nil);</div><div class="line">    return nil;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="18：字典防蹦"><a href="#18：字典防蹦" class="headerlink" title="18：字典防蹦"></a>18：字典防蹦</h2><h4 id="不可变"><a href="#不可变" class="headerlink" title="不可变"></a>不可变</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">/*!</div><div class="line"> @method objectAtIndexCheck:</div><div class="line"> @abstract 检查是否越界和NSNull如果是返回nil</div><div class="line"> @result 返回对象</div><div class="line"> */</div><div class="line">- (id)objectStringForKey:(NSString *)key</div><div class="line">&#123;</div><div class="line">    if ([self objectForKey:key] == nil) &#123;</div><div class="line">//        iCocosLog(@&quot;键值对不存在&quot;);</div><div class="line">        return nil;</div><div class="line">    &#125;</div><div class="line">    id value = [self objectForKey:key];</div><div class="line"></div><div class="line">    return value;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="可变"><a href="#可变" class="headerlink" title="可变"></a>可变</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">/*!</div><div class="line"> @method objectAtIndexCheck:</div><div class="line"> @abstract 检查是否越界和NSNull如果是返回nil</div><div class="line"> @result 返回对象</div><div class="line"> */</div><div class="line">- (id)objectStringForKey:(NSString *)key</div><div class="line">&#123;</div><div class="line">    if ([self objectForKey:key] == nil) &#123;</div><div class="line"></div><div class="line">//        iCocosLog(@&quot;键值对不存在&quot;);</div><div class="line"></div><div class="line">        return nil;</div><div class="line">//        return 0;</div><div class="line">    &#125;</div><div class="line">    id value = [self objectForKey:key];</div><div class="line"></div><div class="line">    return value;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="19：数组防蹦"><a href="#19：数组防蹦" class="headerlink" title="19：数组防蹦"></a>19：数组防蹦</h2><h4 id="不可变-1"><a href="#不可变-1" class="headerlink" title="不可变"></a>不可变</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">/*!</div><div class="line"> @method objectAtIndexCheck:</div><div class="line"> @abstract 检查是否越界和NSNull如果是返回nil</div><div class="line"> @result 返回对象</div><div class="line"> */</div><div class="line">- (id)objectAtIndexCheck:(NSUInteger)index  &#123;</div><div class="line"></div><div class="line">    if (index &gt;= [self count]) &#123;</div><div class="line">        iCocosLog(@&quot;数组越界&quot;);</div><div class="line">        return nil;</div><div class="line">    &#125;</div><div class="line">    id value = [self objectAtIndex:index];</div><div class="line">    if (value == [NSNull null]) &#123;</div><div class="line">        iCocosLog(@&quot;数组为空&quot;);</div><div class="line">        return nil;</div><div class="line">    &#125;</div><div class="line">    return value;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="可变-1"><a href="#可变-1" class="headerlink" title="可变"></a>可变</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">/*!</div><div class="line"> @method objectAtIndexCheck:</div><div class="line"> @abstract 检查是否越界和NSNull如果是返回nil</div><div class="line"> @result 返回对象</div><div class="line"> */</div><div class="line">- (id)objectAtIndexCheck:(NSUInteger)index  &#123;</div><div class="line"></div><div class="line">    if (index &gt;= [self count]) &#123;</div><div class="line">        iCocosLog(@&quot;数组越界&quot;);</div><div class="line">        return nil;</div><div class="line">    &#125;</div><div class="line">    id value = [self objectAtIndex:index];</div><div class="line">    if (value == [NSNull null]) &#123;</div><div class="line">        iCocosLog(@&quot;数组为空&quot;);</div><div class="line">        return nil;</div><div class="line">    &#125;</div><div class="line">    return value;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)removeObjectAtCheckIndex:(NSInteger)index</div><div class="line">&#123;</div><div class="line">    if (index &gt;= [self count]) &#123;</div><div class="line">        iCocosLog(@&quot;数组越界&quot;);</div><div class="line">        return ;</div><div class="line">    &#125;</div><div class="line">    id value = [self objectAtIndex:index];</div><div class="line">    if (value == [NSNull null]) &#123;</div><div class="line">        iCocosLog(@&quot;数组为空&quot;);</div><div class="line">        return ;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    [self removeObjectAtIndex:index];</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="20：本文输入错误提示"><a href="#20：本文输入错误提示" class="headerlink" title="20：本文输入错误提示"></a>20：本文输入错误提示</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">- (void)shake &#123;</div><div class="line">    CAKeyframeAnimation *keyFrame = [CAKeyframeAnimation animationWithKeyPath:@&quot;position.x&quot;];</div><div class="line">    keyFrame.duration = 0.3;</div><div class="line">    CGFloat x = self.layer.position.x;</div><div class="line">    keyFrame.values = @[@(x - 30), @(x - 30), @(x + 20), @(x - 20), @(x + 10), @(x - 10), @(x + 5), @(x - 5)];</div><div class="line">    [self.layer addAnimation:keyFrame forKey:@&quot;shake&quot;];</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="21：当前时间"><a href="#21：当前时间" class="headerlink" title="21：当前时间"></a>21：当前时间</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">+ (NSString *)nowTimes&#123;</div><div class="line">    NSDate* dat = [NSDate dateWithTimeIntervalSinceNow:0];</div><div class="line">    int a=(int)([dat timeIntervalSince1970] + 0.5);</div><div class="line">    NSString *timeString = [NSString stringWithFormat:@&quot;%d&quot;, a];//转为字符型</div><div class="line">    return timeString;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="22-当前版本"><a href="#22-当前版本" class="headerlink" title="22:当前版本"></a>22:当前版本</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">/*</div><div class="line"> *  当前程序的版本号</div><div class="line"> */</div><div class="line">-(NSString *)version&#123;</div><div class="line">    //系统直接读取的版本号</div><div class="line">    NSString *versionValueStringForSystemNow=[[NSBundle mainBundle].infoDictionary valueForKey:(NSString *)kCFBundleVersionKey];</div><div class="line">    return versionValueStringForSystemNow;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="23-tabBar红点"><a href="#23-tabBar红点" class="headerlink" title="23:tabBar红点"></a>23:tabBar红点</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">- (void)showBadgeOnItemIndex:(int)index&#123;</div><div class="line"></div><div class="line">    //移除之前的小红点</div><div class="line">    [self removeBadgeOnItemIndex:index];</div><div class="line"></div><div class="line">    //新建小红点</div><div class="line">    UIView *badgeView = [[UIView alloc]init];</div><div class="line">    badgeView.tag = 888 + index;</div><div class="line">    badgeView.backgroundColor = [UIColor redColor];</div><div class="line">    CGRect tabFrame = self.frame;</div><div class="line"></div><div class="line">    //确定小红点的位置</div><div class="line">    float percentX = (index +0.6) / TabbarItemNums;</div><div class="line">    CGFloat x = ceilf(percentX * tabFrame.size.width);</div><div class="line">    CGFloat y = ceilf(0.1 * tabFrame.size.height);</div><div class="line">    badgeView.frame = CGRectMake(x, y, 8, 8);</div><div class="line">    badgeView.layer.cornerRadius = badgeView.frame.size.width/2;</div><div class="line"></div><div class="line">    [self addSubview:badgeView];</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)hideBadgeOnItemIndex:(int)index&#123;</div><div class="line"></div><div class="line">    //移除小红点</div><div class="line">    [self removeBadgeOnItemIndex:index];</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)removeBadgeOnItemIndex:(int)index&#123;</div><div class="line"></div><div class="line">    //按照tag值进行移除</div><div class="line">    for (UIView *subView in self.subviews) &#123;</div><div class="line">        if (subView.tag == 888+index) &#123;</div><div class="line">            [subView removeFromSuperview];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="24-Log日志-m"><a href="#24-Log日志-m" class="headerlink" title="24:Log日志.m"></a>24:Log日志.m</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line">@implementation UIView(Log)</div><div class="line">+ (NSString *)searchAllSubviews:(UIView *)superview</div><div class="line">&#123;</div><div class="line">    NSMutableString *xml = [NSMutableString string];</div><div class="line"></div><div class="line">    NSString *class = NSStringFromClass(superview.class);</div><div class="line">    class = [class stringByReplacingOccurrencesOfString:@&quot;_&quot; withString:@&quot;&quot;];</div><div class="line">    [xml appendFormat:@&quot;&lt;%@ frame=\&quot;%@\&quot;&gt;\n&quot;, class, NSStringFromCGRect(superview.frame)];</div><div class="line">    for (UIView *childView in superview.subviews) &#123;</div><div class="line">        NSString *subviewXml = [self searchAllSubviews:childView];</div><div class="line">        [xml appendString:subviewXml];</div><div class="line">    &#125;</div><div class="line">    [xml appendFormat:@&quot;&lt;/%@&gt;\n&quot;, class];</div><div class="line">    return xml;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (NSString *)description</div><div class="line">&#123;</div><div class="line">    return [UIView searchAllSubviews:self];</div><div class="line">&#125;</div><div class="line">@end</div><div class="line"></div><div class="line">@implementation NSDictionary (Log)</div><div class="line">- (NSString *)descriptionWithLocale:(id)locale</div><div class="line">&#123;</div><div class="line">    NSMutableString *str = [NSMutableString string];</div><div class="line"></div><div class="line">    [str appendString:@&quot;&#123;\n&quot;];</div><div class="line"></div><div class="line">    // 遍历字典的所有键值对</div><div class="line">    [self enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) &#123;</div><div class="line">        [str appendFormat:@&quot;\t%@ = %@,\n&quot;, key, obj];</div><div class="line">    &#125;];</div><div class="line"></div><div class="line">    [str appendString:@&quot;&#125;&quot;];</div><div class="line"></div><div class="line">    // 查出最后一个,的范围</div><div class="line">    NSRange range = [str rangeOfString:@&quot;,&quot; options:NSBackwardsSearch];</div><div class="line">    if (range.length) &#123;</div><div class="line">        // 删掉最后一个,</div><div class="line">        [str deleteCharactersInRange:range];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    return str;</div><div class="line">&#125;</div><div class="line">@end</div><div class="line"></div><div class="line">@implementation NSArray (Log)</div><div class="line">- (NSString *)descriptionWithLocale:(id)locale</div><div class="line">&#123;</div><div class="line">    NSMutableString *str = [NSMutableString string];</div><div class="line"></div><div class="line">    [str appendString:@&quot;[\n&quot;];</div><div class="line"></div><div class="line">    // 遍历数组的所有元素</div><div class="line">    [self enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) &#123;</div><div class="line">        [str appendFormat:@&quot;%@,\n&quot;, obj];</div><div class="line">    &#125;];</div><div class="line"></div><div class="line">    [str appendString:@&quot;]&quot;];</div><div class="line"></div><div class="line">    // 查出最后一个,的范围</div><div class="line">    NSRange range = [str rangeOfString:@&quot;,&quot; options:NSBackwardsSearch];</div><div class="line">    if (range.length) &#123;</div><div class="line">        // 删掉最后一个,</div><div class="line">        [str deleteCharactersInRange:range];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    return str;</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<h2 id="25-MD5"><a href="#25-MD5" class="headerlink" title="25:MD5"></a>25:MD5</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">//16位MD5加密方式</div><div class="line">- (NSString *)getMd5_16Bit_String:(NSString *)srcString&#123;</div><div class="line">    //提取32位MD5散列的中间16位</div><div class="line">    NSString *md5_32Bit_String=[self getMd5_32Bit_String:srcString];</div><div class="line">    NSString *result = [[md5_32Bit_String substringToIndex:24] substringFromIndex:8];//即9～25位</div><div class="line"></div><div class="line">    return result;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//32位MD5加密方式</div><div class="line">- (NSString *)getMd5_32Bit_String:(NSString *)srcString&#123;</div><div class="line">    const char *cStr = [srcString UTF8String];</div><div class="line">    unsigned char digest[CC_MD5_DIGEST_LENGTH];</div><div class="line">    CC_MD5( cStr, strlen(cStr), digest );</div><div class="line">    NSMutableString *result = [NSMutableString stringWithCapacity:CC_MD5_DIGEST_LENGTH * 2];</div><div class="line">    for(int i = 0; i &lt; CC_MD5_DIGEST_LENGTH; i++)</div><div class="line">        [result appendFormat:@&quot;%02x&quot;, digest[i]];</div><div class="line"></div><div class="line">    return result;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="26-按钮背景颜色"><a href="#26-按钮背景颜色" class="headerlink" title="26:按钮背景颜色"></a>26:按钮背景颜色</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> *  使用背景颜色设置按钮不同状态的图片</div><div class="line"> *</div><div class="line"> *  @param color 颜色</div><div class="line"> *</div><div class="line"> *  @return 背景图片</div><div class="line"> */</div><div class="line">+ (UIImage *)imageWithColor:(UIColor *)color &#123;</div><div class="line">    CGRect rect = CGRectMake(0.0f, 0.0f, 1.0f, 1.0f);</div><div class="line">    UIGraphicsBeginImageContext(rect.size);</div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line"></div><div class="line">    CGContextSetFillColorWithColor(context, [color CGColor]);</div><div class="line">    CGContextFillRect(context, rect);</div><div class="line"></div><div class="line">    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();</div><div class="line">    UIGraphicsEndImageContext();</div><div class="line"></div><div class="line">    return image;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="27：对象是否为空"><a href="#27：对象是否为空" class="headerlink" title="27：对象是否为空"></a>27：对象是否为空</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// 判断对象是否为空</div><div class="line">- (BOOL)isBlanceObject:(id)object&#123;</div><div class="line">    if (object == nil || object == NULL) &#123;</div><div class="line">        return YES;</div><div class="line">    &#125;</div><div class="line">    if ([object isKindOfClass:[NSNull class]]) &#123;</div><div class="line">        return YES;</div><div class="line">    &#125;</div><div class="line">    return NO;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="28：键盘退出与隐藏"><a href="#28：键盘退出与隐藏" class="headerlink" title="28：键盘退出与隐藏"></a>28：键盘退出与隐藏</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];</div><div class="line">[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil];</div></pre></td></tr></table></figure>
<p>}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">- (void)keyboardWillShow:(NSNotification *)notification &#123;</div><div class="line"></div><div class="line">    // 获取通知的信息字典</div><div class="line">    NSDictionary *userInfo = [notification userInfo];</div><div class="line"></div><div class="line">    // 获取键盘弹出后的rect</div><div class="line">    NSValue* aValue = [userInfo objectForKey:UIKeyboardFrameEndUserInfoKey];</div><div class="line">    CGRect keyboardRect = [aValue CGRectValue];</div><div class="line"></div><div class="line">    // 获取键盘弹出动画时间</div><div class="line">    NSValue *animationDurationValue = [userInfo objectForKey:UIKeyboardAnimationDurationUserInfoKey];</div><div class="line">    NSTimeInterval animationDuration;</div><div class="line">    [animationDurationValue getValue:&amp;animationDuration];</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)keyboardWillHide:(NSNotification *)notification &#123;</div><div class="line"></div><div class="line">    // 获取通知信息字典</div><div class="line">    NSDictionary* userInfo = [notification userInfo];</div><div class="line"></div><div class="line">    // 获取键盘隐藏动画时间</div><div class="line">    NSValue *animationDurationValue = [userInfo objectForKey:UIKeyboardAnimationDurationUserInfoKey];</div><div class="line">    NSTimeInterval animationDuration;</div><div class="line">    [animationDurationValue getValue:&amp;animationDuration];</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="29：获取设备唯一ID"><a href="#29：获取设备唯一ID" class="headerlink" title="29：获取设备唯一ID"></a>29：获取设备唯一ID</h2><p>-(NSString <em>)getUniqueDeviceIdentifierAsString { NSString</em> appName=[[[NSBundle mainBundle] infoDictionary] objectForKey:(NSString*)kCFBundleNameKey];</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">NSString *strApplicationUUID =  [SAMKeychain passwordForService:appName account:@&quot;incoding&quot;];</div><div class="line">if (strApplicationUUID == nil)</div><div class="line">&#123;</div><div class="line">    strApplicationUUID  = [[[UIDevice currentDevice] identifierForVendor] UUIDString];</div><div class="line"></div><div class="line">    NSError *error = nil;</div><div class="line">    SAMKeychainQuery *query = [[SAMKeychainQuery alloc] init];</div><div class="line">    query.service = appName;</div><div class="line">    query.account = @&quot;incoding&quot;;</div><div class="line">    query.password = strApplicationUUID;</div><div class="line">    query.synchronizationMode = SAMKeychainQuerySynchronizationModeNo;</div><div class="line">    [query save:&amp;error];</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">return strApplicationUUID;</div></pre></td></tr></table></figure>
<p>}</p>
<h2 id="30：MOV转Mp4"><a href="#30：MOV转Mp4" class="headerlink" title="30：MOV转Mp4"></a>30：MOV转Mp4</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line">- (void)movFileTransformToMP4WithSourceUrl:(NSURL *)sourceUrl completion:(void(^)(NSString *Mp4FilePath))comepleteBlock</div><div class="line">&#123;</div><div class="line">    /**</div><div class="line">     *  mov格式转mp4格式</div><div class="line">     */</div><div class="line">    AVURLAsset *avAsset = [AVURLAsset URLAssetWithURL:sourceUrl options:nil];</div><div class="line"></div><div class="line">    NSArray *compatiblePresets = [AVAssetExportSession exportPresetsCompatibleWithAsset:avAsset];</div><div class="line"></div><div class="line">    NSLog(@&quot;%@&quot;,compatiblePresets);</div><div class="line"></div><div class="line">    if ([compatiblePresets containsObject:AVAssetExportPresetHighestQuality]) &#123;</div><div class="line"></div><div class="line">        AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:avAsset presetName:AVAssetExportPresetMediumQuality];</div><div class="line"></div><div class="line">        NSDate *date = [NSDate date];</div><div class="line">        NSDateFormatter *formatter = [[NSDateFormatter alloc] init];</div><div class="line">        [formatter setDateFormat:@&quot;yyyyMMddHHmmss&quot;];</div><div class="line">        NSString *uniqueName = [NSString stringWithFormat:@&quot;%@.mp4&quot;,[formatter stringFromDate:date]];</div><div class="line">        NSString * resultPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0] stringByAppendingPathComponent:uniqueName];//PATH_OF_DOCUMENT为documents路径</div><div class="line"></div><div class="line">        NSLog(@&quot;output File Path : %@&quot;,resultPath);</div><div class="line"></div><div class="line">        exportSession.outputURL = [NSURL fileURLWithPath:resultPath];</div><div class="line"></div><div class="line">        exportSession.outputFileType = AVFileTypeMPEG4;//可以配置多种输出文件格式</div><div class="line"></div><div class="line">        exportSession.shouldOptimizeForNetworkUse = YES;</div><div class="line"></div><div class="line">        [exportSession exportAsynchronouslyWithCompletionHandler:^(void)</div><div class="line">         &#123;</div><div class="line">             switch (exportSession.status) &#123;</div><div class="line"></div><div class="line">                 case AVAssetExportSessionStatusUnknown:</div><div class="line"></div><div class="line">                     break;</div><div class="line"></div><div class="line">                 case AVAssetExportSessionStatusWaiting:</div><div class="line"></div><div class="line">                     break;</div><div class="line"></div><div class="line">                 case AVAssetExportSessionStatusExporting:</div><div class="line"></div><div class="line">                     break;</div><div class="line"></div><div class="line">                 case AVAssetExportSessionStatusCompleted:</div><div class="line">                 &#123;</div><div class="line">                     comepleteBlock(resultPath);</div><div class="line"></div><div class="line">                     NSLog(@&quot;mp4 file size:%lf MB&quot;,[NSData dataWithContentsOfURL:exportSession.outputURL].length/1024.f/1024.f);</div><div class="line">                 &#125;</div><div class="line">                     break;</div><div class="line"></div><div class="line">                 case AVAssetExportSessionStatusFailed:</div><div class="line"></div><div class="line">                     break;</div><div class="line"></div><div class="line">                 case AVAssetExportSessionStatusCancelled:</div><div class="line"></div><div class="line">                     break;</div><div class="line"></div><div class="line">             &#125;  </div><div class="line"></div><div class="line">         &#125;];</div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="31-上传图片"><a href="#31-上传图片" class="headerlink" title="31:上传图片"></a>31:上传图片</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div></pre></td><td class="code"><pre><div class="line">+ (void)uploadImage:(UIImage *)imageIcon successUpload:(void (^)(id responseObject))successUpload failureUpload:(void (^)(NSError *error))failureUpload;</div><div class="line">&#123;</div><div class="line"></div><div class="line">    //    拿到文件</div><div class="line">    NSString *NSDocmentsPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject;</div><div class="line">    NSString *iconPath       = [NSDocmentsPath stringByAppendingPathComponent:[NSString stringWithFormat:@&quot;faceUrl.png&quot;]];</div><div class="line">    //NSURL *url = [NSURL fileURLWithPath:iconPath];</div><div class="line"></div><div class="line">    long long size = [iCocosGetSize fileSizeAtPath:iconPath];</div><div class="line"></div><div class="line">    if (size &gt;= 7000000) &#123;</div><div class="line">        [SVProgressHUD showInfoWithStatus:@&quot;图片过大，请重新上传 \n 请不要上传超过7Mb文件&quot;];</div><div class="line">        NSDictionary *errDict = [NSDictionary dictionaryWithObject:@&quot;big&quot; forKey:@&quot;state&quot;];</div><div class="line">        failureUpload((NSError *)errDict);</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //1:文件的32位MD5值</div><div class="line">    NSString *strForEight = [iCocosFormatFileGetEight getStringWithEight:iconPath];</div><div class="line">    //2:文件的前8个字节的16位+文件的后8个字节的16位</div><div class="line">    NSString *str32MD5    = [NSString getMd5_32Bit_String:iconPath];</div><div class="line"></div><div class="line">    NSString *str64       = [NSString stringWithFormat:@&quot;%@%@&quot;, str32MD5,strForEight];</div><div class="line"></div><div class="line">    //存图片</div><div class="line">    //    NSData *imageData = UIImageJPEGRepresentation(imageIcon, 1.0);//将UIImage转为NSData，1.0表示不压缩图片质量。</div><div class="line">    NSData *imageData = [iCocosFileCondenseTools resetSizeOfImageData:imageIcon maxSize:50];</div><div class="line"></div><div class="line">    [imageData writeToFile:iconPath atomically:YES];</div><div class="line"></div><div class="line">    AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];</div><div class="line">    manager.responseSerializer.acceptableContentTypes = [NSSet setWithObjects:@&quot;text/html&quot;, nil];</div><div class="line"></div><div class="line">    //    NSString *urlStrIF        = [NSString stringWithFormat:@&quot;%@file/exist%@&quot;, [iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileUrl, [iCocosURLRequestExtension getURLRequestExtension]];</div><div class="line">    NSMutableDictionary *dict = [NSMutableDictionary dictionary];</div><div class="line">    //文件的32位MD5+前8个字节的16位+后8个字节的16位</div><div class="line">    dict[@&quot;file_md5&quot;] = str64;</div><div class="line">    dict[@&quot;is_blur&quot;] = @(1);</div><div class="line">    dict[@&quot;file_size&quot;] = @([iCocosGetSize fileSizeAtPath:iconPath]);</div><div class="line">    dict[@&quot;ext&quot;] = @&quot;png&quot;;</div><div class="line"></div><div class="line">    /**</div><div class="line">     *  超时时间</div><div class="line">     */</div><div class="line">    [manager.requestSerializer willChangeValueForKey:@&quot;timeoutInterval&quot;];</div><div class="line">    manager.requestSerializer.timeoutInterval = 10.f;</div><div class="line">    [manager.requestSerializer didChangeValueForKey:@&quot;timeoutInterval&quot;];</div><div class="line"></div><div class="line">    //    [manager POST:urlStrIF parameters:dict progress:nil success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) &#123;</div><div class="line"></div><div class="line">    [iCocosAFNPOSTRequestData iCocos_POST_HostSecurity:@&quot;file/exist&quot; hostHeaderValue:[iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileHost firstRequestWithUrl:[iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileUrl secondRequestWithIp:[iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileIp params:dict success:^(id response) &#123;</div><div class="line"></div><div class="line">        NSString *state = [NSString stringWithFormat:@&quot;%@&quot;, [response objectStringForKey:@&quot;state&quot;]];</div><div class="line">        NSString *msg= [NSString stringWithFormat:@&quot;%@&quot;, [response objectStringForKey:@&quot;msg&quot;]];</div><div class="line">        if ([state isEqualToString:@&quot;0&quot;]) &#123;</div><div class="line">            NSString *exist = [NSString stringWithFormat:@&quot;%@&quot;, [[response objectStringForKey:@&quot;data&quot;] objectStringForKey:@&quot;exist&quot;]];</div><div class="line">            /**</div><div class="line">             *  注意这里需要换成真实服务器地址</div><div class="line">             */</div><div class="line">            if ([exist isEqualToString:@&quot;0&quot;]) &#123; //不存在就需要发送请求</div><div class="line">                NSString *imageUrl          = [NSString stringWithFormat:@&quot;%@file/up%@&quot;, [iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileUrl,[iCocosURLRequestExtension getURLRequestExtension]];</div><div class="line">                NSMutableDictionary *params = [NSMutableDictionary dictionary];</div><div class="line">                params[@&quot;blur&quot;]          = @(1);</div><div class="line"></div><div class="line">                AFHTTPSessionManager *mger = [AFHTTPSessionManager manager];</div><div class="line"></div><div class="line">                AFJSONResponseSerializer *response = [AFJSONResponseSerializer serializer];</div><div class="line">                response.removesKeysWithNullValues = YES;</div><div class="line">                manager.responseSerializer = response;</div><div class="line"></div><div class="line">                manager.requestSerializer = [AFHTTPRequestSerializer serializer];//响应</div><div class="line"></div><div class="line">                mger.responseSerializer.acceptableContentTypes = [NSSet setWithObjects:@&quot;image/png&quot;, @&quot;text/html&quot;, nil];</div><div class="line"></div><div class="line">                /**</div><div class="line">                 *  超时时间</div><div class="line">                 */</div><div class="line">                [manager.requestSerializer willChangeValueForKey:@&quot;timeoutInterval&quot;];</div><div class="line">                manager.requestSerializer.timeoutInterval = 10.f;</div><div class="line">                [manager.requestSerializer didChangeValueForKey:@&quot;timeoutInterval&quot;];</div><div class="line"></div><div class="line">                [mger POST:imageUrl parameters:params constructingBodyWithBlock:^(id&lt;AFMultipartFormData&gt; formData) &#123;</div><div class="line">                    // 上传文件</div><div class="line">                    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];</div><div class="line">                    formatter.dateFormat       = @&quot;yyyyMMddHHmmss&quot;;</div><div class="line">                    NSString *str              = [formatter stringFromDate:[NSDate date]];</div><div class="line">                    NSString *fileName         = [NSString stringWithFormat:@&quot;%@.png&quot;, str];</div><div class="line"></div><div class="line">                    [formData appendPartWithFileData:imageData name:@&quot;file&quot; fileName:fileName mimeType:@&quot;image/png&quot;];</div><div class="line"></div><div class="line">                &#125; progress:^(NSProgress * _Nonnull uploadProgress) &#123;</div><div class="line"></div><div class="line">                    iCocosLog(@&quot;封面图片================%@&quot;, uploadProgress);</div><div class="line"></div><div class="line">                &#125; success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) &#123;</div><div class="line"></div><div class="line">                    NSDictionary *dataDic    = [responseObject objectStringForKey:@&quot;data&quot;]; </div><div class="line"></div><div class="line">                    successUpload(dataDic);</div><div class="line"></div><div class="line">                    iCocosLog(@&quot;%@&quot;, responseObject);</div><div class="line">                &#125; failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) &#123;</div><div class="line">                    iCocosLog(@&quot;上传错误:%@&quot;, error);</div><div class="line"></div><div class="line">                    failureUpload(error);</div><div class="line">                &#125;];</div><div class="line"></div><div class="line">            &#125; else &#123;</div><div class="line"></div><div class="line">                NSDictionary *dataDic    = [response objectStringForKey:@&quot;data&quot;];</div><div class="line"></div><div class="line">                successUpload(dataDic);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125; else &#123;</div><div class="line">            successUpload(response);</div><div class="line">        &#125;</div><div class="line">    &#125; failure:^(NSError *error) &#123;</div><div class="line">        failureUpload(error);</div><div class="line">    &#125;];</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="32：上传视频"><a href="#32：上传视频" class="headerlink" title="32：上传视频"></a>32：上传视频</h2><h4 id="上传MOV"><a href="#上传MOV" class="headerlink" title="上传MOV"></a>上传MOV</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div></pre></td><td class="code"><pre><div class="line">+ (void)updateMOVVideo:(NSURL *)url successUpload:(void (^)(id responseObject))successUpload failureUpload:(void (^)(NSError *error))failureUpload;</div><div class="line">&#123;</div><div class="line">    //保存数据</div><div class="line">    //    NSUserDefaults *defaults =[NSUserDefaults standardUserDefaults];</div><div class="line">    //    NSURL *url = [defaults URLForKey:@&quot;RecordVideoUrl&quot;];</div><div class="line"></div><div class="line">    NSData *videoData = [NSData dataWithContentsOfURL:url];</div><div class="line"></div><div class="line">    //   NSString *videoUrl = [iCocosUpLoadVideoTools upLoadVideoGetVideoUrlWithFileUrlInSandbox:url];</div><div class="line"></div><div class="line">    //    NSString *strUrl = [NSString stringWithContentsOfURL:url usedEncoding:0 error:nil];</div><div class="line"></div><div class="line">    //    //1:文件的32位MD5值</div><div class="line">    //    NSString *strForEight = [iCocosFormatFileGetEight getStringWithEight:strUrl];</div><div class="line">    //</div><div class="line">    //    //2:文件的前8个字节的16位+文件的后8个字节的16位</div><div class="line">    //    NSString *str32MD5 = [NSString getMd5_32Bit_String:strUrl];</div><div class="line"></div><div class="line">    NSString *str32MD5 = [iCocosRandomSix getSixRandom];</div><div class="line"></div><div class="line">    NSString *str64 = [NSString stringWithFormat:@&quot;%@%@&quot;, str32MD5,str32MD5];</div><div class="line"></div><div class="line">    AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];</div><div class="line">    manager.responseSerializer.acceptableContentTypes = [NSSet setWithObjects:@&quot;text/html&quot;, nil];</div><div class="line"></div><div class="line">    //    NSString *urlStrIF = [NSString stringWithFormat:@&quot;%@file/exist%@&quot;, [iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileUrl, [iCocosURLRequestExtension getURLRequestExtension]];</div><div class="line">    NSMutableDictionary *dict = [NSMutableDictionary dictionary];</div><div class="line">    dict[@&quot;file_md5&quot;] = str64;</div><div class="line">    dict[@&quot;is_blur&quot;] = 0;</div><div class="line">    dict[@&quot;file_size&quot;] = @([iCocosGetSize fileSizeAtPath:[url absoluteString]]);</div><div class="line">    dict[@&quot;ext&quot;] = @&quot;MOV&quot;;</div><div class="line"></div><div class="line">    /**</div><div class="line">     *  超时时间</div><div class="line">     */</div><div class="line">    [manager.requestSerializer willChangeValueForKey:@&quot;timeoutInterval&quot;];</div><div class="line">    manager.requestSerializer.timeoutInterval = 10.f;</div><div class="line">    [manager.requestSerializer didChangeValueForKey:@&quot;timeoutInterval&quot;];</div><div class="line"></div><div class="line">    /** 获取视频是否上传 */</div><div class="line">    //    [manager POST:urlStrIF parameters:dict progress:nil success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) &#123;</div><div class="line"></div><div class="line">    [iCocosAFNPOSTRequestData iCocos_POST_HostSecurity:@&quot;file/exist&quot; hostHeaderValue:[iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileHost firstRequestWithUrl:[iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileUrl secondRequestWithIp:[iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileIp params:dict success:^(id response) &#123;</div><div class="line"></div><div class="line">        NSString *state = [NSString stringWithFormat:@&quot;%@&quot;, [response objectStringForKey:@&quot;state&quot;]];</div><div class="line">        if ([state isEqualToString:@&quot;0&quot;]) &#123;</div><div class="line">            NSString *exist = [response objectStringForKey:@&quot;exist&quot;];</div><div class="line">            /**</div><div class="line">             *  注意这里需要换成真实服务器地址</div><div class="line">             */</div><div class="line">            if (exist == 0) &#123; //不存在就需要发送请求</div><div class="line">                NSString *vidUrl = [NSString stringWithFormat:@&quot;%@file/up%@&quot;, [iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileUrl, [iCocosURLRequestExtension getURLRequestExtension]];</div><div class="line">                NSMutableDictionary *params = [NSMutableDictionary dictionary];</div><div class="line">                //            params[@&quot;name:file&quot;] = @&quot;&quot;; //Content-Disposition: form-data; name=&quot;file&quot;; filename=&quot;1.txt&quot;</div><div class="line">                params[@&quot;is_blur&quot;] = @0;</div><div class="line">                params[@&quot;need_mp4&quot;] = @1;</div><div class="line">                AFHTTPSessionManager *mger = [AFHTTPSessionManager manager];</div><div class="line"></div><div class="line">                AFJSONResponseSerializer *response = [AFJSONResponseSerializer serializer];</div><div class="line">                response.removesKeysWithNullValues = YES;</div><div class="line">                manager.responseSerializer = response;</div><div class="line"></div><div class="line">                manager.requestSerializer = [AFHTTPRequestSerializer serializer];//响应</div><div class="line"></div><div class="line">                [mger.securityPolicy setAllowInvalidCertificates:YES];</div><div class="line"></div><div class="line">                /** 上传视频 */</div><div class="line">                [mger POST:vidUrl parameters:params constructingBodyWithBlock:^(id&lt;AFMultipartFormData&gt; formData) &#123;</div><div class="line"></div><div class="line">                    // 上传文件</div><div class="line">                    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];</div><div class="line">                    formatter.dateFormat = @&quot;yyyyMMddHHmmss&quot;;</div><div class="line">                    NSString *str = [formatter stringFromDate:[NSDate date]];</div><div class="line">                    NSString *fileName = [NSString stringWithFormat:@&quot;%@.mov&quot;, str];</div><div class="line"></div><div class="line">                    if (videoData != nil) &#123;</div><div class="line">                        [formData appendPartWithFileData:videoData name:@&quot;file&quot; fileName:fileName mimeType:@&quot;video/quicktime&quot;];</div><div class="line">                    &#125; else &#123;</div><div class="line"></div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                &#125; progress:^(NSProgress * _Nonnull uploadProgress) &#123;</div><div class="line"></div><div class="line">//                    iCocosLog(@&quot;%@&quot;, uploadProgress);</div><div class="line"></div><div class="line">                &#125; success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) &#123;</div><div class="line"></div><div class="line">                    NSString *state = [NSString stringWithFormat:@&quot;%@&quot;, [responseObject objectStringForKey:@&quot;state&quot;]];</div><div class="line">                    if ([state isEqualToString:@&quot;0&quot;]) &#123;</div><div class="line"></div><div class="line">                        NSDictionary *dataDic = [responseObject objectStringForKey:@&quot;data&quot;];</div><div class="line"></div><div class="line">                        successUpload(dataDic);</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                &#125; failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) &#123;</div><div class="line">                    iCocosLog(@&quot;上传错误:%@&quot;, error);</div><div class="line">                    failureUpload(error);</div><div class="line">                &#125;];</div><div class="line"></div><div class="line">            &#125; else &#123;</div><div class="line">                /**</div><div class="line">                 *  已经上传</div><div class="line">                 */</div><div class="line">                NSDictionary *dataDic    = [response objectStringForKey:@&quot;data&quot;];</div><div class="line">                NSString *file_url       = [NSString stringWithFormat:@&quot;%@&quot;, [dataDic objectStringForKey:@&quot;file_url&quot;]];</div><div class="line">                NSString *mp4_file_url       = [NSString stringWithFormat:@&quot;%@&quot;, [dataDic objectStringForKey:@&quot;mp4_file_url&quot;]];</div><div class="line"></div><div class="line">                NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];</div><div class="line">                [defaults setValue:file_url forKey:@&quot;video_url&quot;];</div><div class="line">                [defaults setValue:mp4_file_url forKey:@&quot;mp4_file_url&quot;];</div><div class="line">                [defaults synchronize];</div><div class="line"></div><div class="line">                successUpload(dataDic);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125; else &#123;</div><div class="line">            successUpload(response);</div><div class="line">        &#125;</div><div class="line">    &#125; failure:^(NSError *error) &#123; //上传错误</div><div class="line">        failureUpload(error);</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="上传MP4"><a href="#上传MP4" class="headerlink" title="上传MP4"></a>上传MP4</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div></pre></td><td class="code"><pre><div class="line">+ (void)updateMP4Video:(NSURL *)url successUpload:(void (^)(id responseObject))successUpload failureUpload:(void (^)(NSError *error))failureUpload</div><div class="line">&#123;</div><div class="line">    //保存数据</div><div class="line">    //    NSUserDefaults *defaults =[NSUserDefaults standardUserDefaults];</div><div class="line">    //    NSURL *url = [defaults URLForKey:@&quot;RecordVideoUrl&quot;];</div><div class="line"></div><div class="line">    NSData *videoData = [NSData dataWithContentsOfURL:url];</div><div class="line"></div><div class="line">    //   NSString *videoUrl = [iCocosUpLoadVideoTools upLoadVideoGetVideoUrlWithFileUrlInSandbox:url];</div><div class="line"></div><div class="line">    //    NSString *strUrl = [NSString stringWithContentsOfURL:url usedEncoding:0 error:nil];</div><div class="line"></div><div class="line">    //    //1:文件的32位MD5值</div><div class="line">    //    NSString *strForEight = [iCocosFormatFileGetEight getStringWithEight:strUrl];</div><div class="line">    //</div><div class="line">    //    //2:文件的前8个字节的16位+文件的后8个字节的16位</div><div class="line">    //    NSString *str32MD5 = [NSString getMd5_32Bit_String:strUrl];</div><div class="line"></div><div class="line">    NSString *str32MD5 = [iCocosRandomSix getSixRandom];</div><div class="line"></div><div class="line">    NSString *str64 = [NSString stringWithFormat:@&quot;%@%@&quot;, str32MD5,str32MD5];</div><div class="line"></div><div class="line">    AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];</div><div class="line">    manager.responseSerializer.acceptableContentTypes = [NSSet setWithObjects:@&quot;text/html&quot;, nil];</div><div class="line"></div><div class="line">    //    NSString *urlStrIF = [NSString stringWithFormat:@&quot;%@file/exist%@&quot;, [iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileUrl, [iCocosURLRequestExtension getURLRequestExtension]];</div><div class="line">    NSMutableDictionary *dict = [NSMutableDictionary dictionary];</div><div class="line">    dict[@&quot;file_md5&quot;] = str64;</div><div class="line">    dict[@&quot;is_blur&quot;] = 0;</div><div class="line">    dict[@&quot;file_size&quot;] = @([iCocosGetSize fileSizeAtPath:[url absoluteString]]);</div><div class="line">    dict[@&quot;ext&quot;] = @&quot;mp4&quot;;</div><div class="line"></div><div class="line">    /**</div><div class="line">     *  超时时间</div><div class="line">     */</div><div class="line">    [manager.requestSerializer willChangeValueForKey:@&quot;timeoutInterval&quot;];</div><div class="line">    manager.requestSerializer.timeoutInterval = 10.f;</div><div class="line">    [manager.requestSerializer didChangeValueForKey:@&quot;timeoutInterval&quot;];</div><div class="line"></div><div class="line">    /** 获取视频是否上传 */</div><div class="line">    //    [manager POST:urlStrIF parameters:dict progress:nil success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) &#123;</div><div class="line"></div><div class="line">    [iCocosAFNPOSTRequestData iCocos_POST_HostSecurity:@&quot;file/exist&quot; hostHeaderValue:[iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileHost firstRequestWithUrl:[iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileUrl secondRequestWithIp:[iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileIp params:dict success:^(id response) &#123;</div><div class="line"></div><div class="line">        NSString *state = [NSString stringWithFormat:@&quot;%@&quot;, [response objectStringForKey:@&quot;state&quot;]];</div><div class="line">        if ([state isEqualToString:@&quot;0&quot;]) &#123;</div><div class="line">            NSString *exist = [response objectStringForKey:@&quot;exist&quot;];</div><div class="line">            /**</div><div class="line">             *  注意这里需要换成真实服务器地址</div><div class="line">             */</div><div class="line">            if (exist == 0) &#123; //不存在就需要发送请求</div><div class="line">                NSString *vidUrl = [NSString stringWithFormat:@&quot;%@file/up%@&quot;, [iCocosUrlOperationTools shareiCocosUrlOperationTools].iCocosFileUrl, [iCocosURLRequestExtension getURLRequestExtension]];</div><div class="line">                NSMutableDictionary *params = [NSMutableDictionary dictionary];</div><div class="line">                //            params[@&quot;name:file&quot;] = @&quot;&quot;; //Content-Disposition: form-data; name=&quot;file&quot;; filename=&quot;1.txt&quot;</div><div class="line">                params[@&quot;is_blur&quot;] = @0;</div><div class="line">                params[@&quot;need_mp4&quot;] = @1;</div><div class="line">                AFHTTPSessionManager *mger = [AFHTTPSessionManager manager];</div><div class="line"></div><div class="line">                AFJSONResponseSerializer *response = [AFJSONResponseSerializer serializer];</div><div class="line">                response.removesKeysWithNullValues = YES;</div><div class="line">                manager.responseSerializer = response;</div><div class="line"></div><div class="line">                manager.requestSerializer = [AFHTTPRequestSerializer serializer];//响应</div><div class="line"></div><div class="line">                [mger.securityPolicy setAllowInvalidCertificates:YES];</div><div class="line"></div><div class="line">                /** 上传视频 */</div><div class="line">                [mger POST:vidUrl parameters:params constructingBodyWithBlock:^(id&lt;AFMultipartFormData&gt; formData) &#123;</div><div class="line"></div><div class="line">                    // 上传文件</div><div class="line">                    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];</div><div class="line">                    formatter.dateFormat = @&quot;yyyyMMddHHmmss&quot;;</div><div class="line">                    NSString *str = [formatter stringFromDate:[NSDate date]];</div><div class="line">                    NSString *fileName = [NSString stringWithFormat:@&quot;%@.mp4&quot;, str];</div><div class="line"></div><div class="line">                    if (videoData != nil) &#123;</div><div class="line">                        [formData appendPartWithFileData:videoData name:@&quot;file&quot; fileName:fileName mimeType:@&quot;video/mp4&quot;];</div><div class="line">                    &#125; else &#123;</div><div class="line"></div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                &#125; progress:^(NSProgress * _Nonnull uploadProgress) &#123;</div><div class="line"></div><div class="line">//                    iCocosLog(@&quot;%@&quot;, uploadProgress);</div><div class="line"></div><div class="line">                &#125; success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) &#123;</div><div class="line"></div><div class="line">                    NSString *state = [NSString stringWithFormat:@&quot;%@&quot;, [responseObject objectStringForKey:@&quot;state&quot;]];</div><div class="line">                    if ([state isEqualToString:@&quot;0&quot;]) &#123;</div><div class="line"></div><div class="line">                        NSDictionary *dataDic = [responseObject objectStringForKey:@&quot;data&quot;];</div><div class="line"></div><div class="line">                        successUpload(dataDic);</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                &#125; failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) &#123;</div><div class="line">                    iCocosLog(@&quot;上传错误:%@&quot;, error);</div><div class="line">                    failureUpload(error);</div><div class="line">                &#125;];</div><div class="line"></div><div class="line">            &#125; else &#123;</div><div class="line"></div><div class="line">                /**</div><div class="line">                 *  已经上传</div><div class="line">                 */</div><div class="line">                NSDictionary *dataDic    = [response objectStringForKey:@&quot;data&quot;];</div><div class="line">                NSString *file_url       = [NSString stringWithFormat:@&quot;%@&quot;, [dataDic objectStringForKey:@&quot;file_url&quot;]];</div><div class="line">                NSString *mp4_file_url       = [NSString stringWithFormat:@&quot;%@&quot;, [dataDic objectStringForKey:@&quot;mp4_file_url&quot;]];</div><div class="line"></div><div class="line">                NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];</div><div class="line">                [defaults setValue:file_url forKey:@&quot;video_url&quot;];</div><div class="line">                [defaults setValue:mp4_file_url forKey:@&quot;mp4_file_url&quot;];</div><div class="line">                [defaults synchronize];</div><div class="line"></div><div class="line">                successUpload(dataDic);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125; else &#123;</div><div class="line">            successUpload(response);</div><div class="line">        &#125;</div><div class="line">    &#125; failure:^(NSError *error) &#123; //上传错误</div><div class="line">        failureUpload(error);</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="33-获取视频帧图"><a href="#33-获取视频帧图" class="headerlink" title="33:获取视频帧图"></a>33:获取视频帧图</h2><h4 id="同步获取帧图"><a href="#同步获取帧图" class="headerlink" title="同步获取帧图"></a>同步获取帧图</h4><p>同步获取中间帧，需要指定哪个时间点的帧，当获取到以后，返回来的图片对象是CFRetained过的，需要外面手动CGImageRelease一下，释放内存。通过AVAsset来访问具体的视频资源，然后通过AVAssetImageGenerator图片生成器来生成某个帧图片： // Get the video’s center frame as video poster image - (UIImage <em>)frameImageFromVideoURL:(NSURL</em> )videoURL { // result UIImage *image = nil;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">  // AVAssetImageGenerator</div><div class="line">  AVAsset *asset = [AVAsset assetWithURL:videoURL];</div><div class="line">  AVAssetImageGenerator *imageGenerator = [[AVAssetImageGenerator alloc] initWithAsset:asset];</div><div class="line">  imageGenerator.appliesPreferredTrackTransform = YES;</div><div class="line"></div><div class="line">  // calculate the midpoint time of video</div><div class="line">  Float64 duration = CMTimeGetSeconds([asset duration]);</div><div class="line">  // 取某个帧的时间，参数一表示哪个时间（秒），参数二表示每秒多少帧</div><div class="line">  // 通常来说，600是一个常用的公共参数，苹果有说明:</div><div class="line">  // 24 frames per second (fps) for film, 30 fps for NTSC (used for TV in North America and</div><div class="line">  // Japan), and 25 fps for PAL (used for TV in Europe).</div><div class="line">  // Using a timescale of 600, you can exactly represent any number of frames in these systems</div><div class="line">  CMTime midpoint = CMTimeMakeWithSeconds(duration / 2.0, 600);</div><div class="line"></div><div class="line">  // get the image from</div><div class="line">  NSError *error = nil;</div><div class="line">  CMTime actualTime;</div><div class="line">  // Returns a CFRetained CGImageRef for an asset at or near the specified time.</div><div class="line">  // So we should mannully release it</div><div class="line">  CGImageRef centerFrameImage = [imageGenerator copyCGImageAtTime:midpoint</div><div class="line">                                                       actualTime:&amp;actualTime</div><div class="line">                                                            error:&amp;error];</div><div class="line"></div><div class="line">  if (centerFrameImage != NULL) &#123;</div><div class="line">    image = [[UIImage alloc] initWithCGImage:centerFrameImage];</div><div class="line">    // Release the CFRetained image</div><div class="line">    CGImageRelease(centerFrameImage);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  return image;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="异步获取帧图"><a href="#异步获取帧图" class="headerlink" title="异步获取帧图"></a>异步获取帧图</h4><p>异步获取某个帧的图片，与同步相比，只是调用API不同，可以传多个时间点，然后计算出实际的时间并返回图片，但是返回的图片不需要我们手动再release了。有可能取不到图片，所以还需要判断是否是AVAssetImageGeneratorSucceeded，是才转换图片：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">// 异步获取帧图片，可以一次获取多帧图片</div><div class="line">- (void)centerFrameImageWithVideoURL:(NSURL *)videoURL completion:(void (^)(UIImage *image))completion &#123;</div><div class="line">  // AVAssetImageGenerator</div><div class="line">  AVAsset *asset = [AVAsset assetWithURL:videoURL];</div><div class="line">  AVAssetImageGenerator *imageGenerator = [[AVAssetImageGenerator alloc] initWithAsset:asset];</div><div class="line">  imageGenerator.appliesPreferredTrackTransform = YES;</div><div class="line"></div><div class="line">  // calculate the midpoint time of video</div><div class="line">  Float64 duration = CMTimeGetSeconds([asset duration]);</div><div class="line">  // 取某个帧的时间，参数一表示哪个时间（秒），参数二表示每秒多少帧</div><div class="line">  // 通常来说，600是一个常用的公共参数，苹果有说明:</div><div class="line">  // 24 frames per second (fps) for film, 30 fps for NTSC (used for TV in North America and</div><div class="line">  // Japan), and 25 fps for PAL (used for TV in Europe).</div><div class="line">  // Using a timescale of 600, you can exactly represent any number of frames in these systems</div><div class="line">  CMTime midpoint = CMTimeMakeWithSeconds(duration / 2.0, 600);</div><div class="line"></div><div class="line">  // 异步获取多帧图片</div><div class="line">  NSValue *midTime = [NSValue valueWithCMTime:midpoint];</div><div class="line">  [imageGenerator generateCGImagesAsynchronouslyForTimes:@[midTime] completionHandler:^(CMTime requestedTime, CGImageRef  _Nullable image, CMTime actualTime, AVAssetImageGeneratorResult result, NSError * _Nullable error) &#123;</div><div class="line">    if (result == AVAssetImageGeneratorSucceeded &amp;&amp; image != NULL) &#123;</div><div class="line">      UIImage *centerFrameImage = [[UIImage alloc] initWithCGImage:image];</div><div class="line">      dispatch_async(dispatch_get_main_queue(), ^&#123;</div><div class="line">        if (completion) &#123;</div><div class="line">          completion(centerFrameImage);</div><div class="line">        &#125;</div><div class="line">      &#125;);</div><div class="line">    &#125; else &#123;</div><div class="line">      dispatch_async(dispatch_get_main_queue(), ^&#123;</div><div class="line">        if (completion) &#123;</div><div class="line">          completion(nil);</div><div class="line">        &#125;</div><div class="line">      &#125;);</div><div class="line">    &#125;</div><div class="line">  &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="34-压缩并导出视频"><a href="#34-压缩并导出视频" class="headerlink" title="34:压缩并导出视频"></a>34:压缩并导出视频</h2><p>压缩视频是因为视频分辨率过高所生成的视频的大小太大了，对于移动设备来说，内存是不能太大的，如果不支持分片上传到服务器，或者不支持流上传、文件上传，而只能支持表单上传，那么必须要限制大小，压缩视频。</p>
<p>就像我们在使用某平台的视频的上传的时候，到现在还没有支持流上传，也不支持文件上传，只支持表单上传，导致视频大一点就会闪退。流上传是上传成功了，但是人家后台不识别，这一次让某平台坑坏了。直接用file上传，也传过去了，上传进度100%了，但是人家那边还是作为失败处理，无奈！</p>
<blockquote>
<p>言归正传，压缩、导出视频，需要通过AVAssetExportSession来实现，我们需要指定一个preset，并判断是否支持这个preset，只有支持才能使用。</p>
</blockquote>
<p>我们这里设置的preset为AVAssetExportPreset640x480，属于压缩得比较厉害的了，这需要根据服务器视频上传的支持程度而选择的。然后通过调用异步压缩并导出视频：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line">- (void)compressVideoWithVideoURL:(NSURL *)videoURL</div><div class="line">                        savedName:(NSString *)savedName</div><div class="line">                       completion:(void (^)(NSString *savedPath))completion &#123;</div><div class="line">  // Accessing video by URL</div><div class="line">  AVURLAsset *videoAsset = [[AVURLAsset alloc] initWithURL:videoURL options:nil];</div><div class="line"></div><div class="line">  // Find compatible presets by video asset.</div><div class="line">  NSArray *presets = [AVAssetExportSession exportPresetsCompatibleWithAsset:videoAsset];</div><div class="line"></div><div class="line">  // Begin to compress video</div><div class="line">  // Now we just compress to low resolution if it supports</div><div class="line">  // If you need to upload to the server, but server does&apos;t support to upload by streaming,</div><div class="line">  // You can compress the resolution to lower. Or you can support more higher resolution.</div><div class="line">  if ([presets containsObject:AVAssetExportPreset640x480]) &#123;</div><div class="line">    AVAssetExportSession *session = [[AVAssetExportSession alloc] initWithAsset:videoAsset  presetName:AVAssetExportPreset640x480];</div><div class="line"></div><div class="line">    NSString *doc = [NSHomeDirectory() stringByAppendingPathComponent:@&quot;Documents&quot;];</div><div class="line">    NSString *folder = [doc stringByAppendingPathComponent:@&quot;HYBVideos&quot;];</div><div class="line">    BOOL isDir = NO;</div><div class="line">    BOOL isExist = [[NSFileManager defaultManager] fileExistsAtPath:folder isDirectory:&amp;isDir];</div><div class="line">    if (!isExist || (isExist &amp;&amp; !isDir)) &#123;</div><div class="line">      NSError *error = nil;</div><div class="line">      [[NSFileManager defaultManager] createDirectoryAtPath:folder</div><div class="line">                                withIntermediateDirectories:YES</div><div class="line">                                                 attributes:nil</div><div class="line">                                                      error:&amp;error];</div><div class="line">      if (error == nil) &#123;</div><div class="line">        NSLog(@&quot;目录创建成功&quot;);</div><div class="line">      &#125; else &#123;</div><div class="line">        NSLog(@&quot;目录创建失败&quot;);</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    NSString *outPutPath = [folder stringByAppendingPathComponent:savedName];</div><div class="line">    session.outputURL = [NSURL fileURLWithPath:outPutPath];</div><div class="line"></div><div class="line">    // Optimize for network use.</div><div class="line">    session.shouldOptimizeForNetworkUse = true;</div><div class="line"></div><div class="line">    NSArray *supportedTypeArray = session.supportedFileTypes;</div><div class="line">    if ([supportedTypeArray containsObject:AVFileTypeMPEG4]) &#123;</div><div class="line">      session.outputFileType = AVFileTypeMPEG4;</div><div class="line">    &#125; else if (supportedTypeArray.count == 0) &#123;</div><div class="line">      NSLog(@&quot;No supported file types&quot;);</div><div class="line">      return;</div><div class="line">    &#125; else &#123;</div><div class="line">      session.outputFileType = [supportedTypeArray objectAtIndex:0];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // Begin to export video to the output path asynchronously.</div><div class="line">    [session exportAsynchronouslyWithCompletionHandler:^&#123;</div><div class="line">      if ([session status] == AVAssetExportSessionStatusCompleted) &#123;</div><div class="line">        dispatch_async(dispatch_get_main_queue(), ^&#123;</div><div class="line">          if (completion) &#123;</div><div class="line">            completion([session.outputURL path]);</div><div class="line">          &#125;</div><div class="line">        &#125;);</div><div class="line">      &#125; else &#123;</div><div class="line">        dispatch_async(dispatch_get_main_queue(), ^&#123;</div><div class="line">          if (completion) &#123;</div><div class="line">            completion(nil);</div><div class="line">          &#125;</div><div class="line">        &#125;);</div><div class="line">      &#125;</div><div class="line">    &#125;];</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="35-保存视频到相册"><a href="#35-保存视频到相册" class="headerlink" title="35:保存视频到相册"></a>35:保存视频到相册</h2><p>写入相册可以通过ALAssetsLibrary类来实现，它提供了写入相册的API，异步写入，完成是要回到主线程更新UI：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];</div><div class="line">ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];</div><div class="line">dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;</div><div class="line">  // 判断相册是否兼容视频，兼容才能保存到相册</div><div class="line">  if ([library videoAtPathIsCompatibleWithSavedPhotosAlbum:videoURL]) &#123;</div><div class="line">    [library writeVideoAtPathToSavedPhotosAlbum:videoURL completionBlock:^(NSURL *assetURL, NSError *error) &#123;</div><div class="line">      dispatch_async(dispatch_get_main_queue(), ^&#123;</div><div class="line">        // 写入相册</div><div class="line">        if (error == nil) &#123;</div><div class="line">            NSLog(@&quot;写入相册成功&quot;);</div><div class="line">        &#125; else &#123;</div><div class="line">           NSLog(@&quot;写入相册失败&quot;);</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;];</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="36-获取当前最顶层的ViewController"><a href="#36-获取当前最顶层的ViewController" class="headerlink" title="36:获取当前最顶层的ViewController"></a>36:获取当前最顶层的ViewController</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">    - (UIViewController *)topViewController &#123;</div><div class="line">    UIViewController *resultVC;</div><div class="line">    resultVC = [self _topViewController:[[UIApplication sharedApplication].keyWindow rootViewController]];</div><div class="line">    while (resultVC.presentedViewController) &#123;</div><div class="line">        resultVC = [self _topViewController:resultVC.presentedViewController];</div><div class="line">    &#125;</div><div class="line">    return resultVC;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (UIViewController *)_topViewController:(UIViewController *)vc &#123;</div><div class="line">    if ([vc isKindOfClass:[UINavigationController class]]) &#123;</div><div class="line">        return [self _topViewController:[(UINavigationController *)vc topViewController]];</div><div class="line">    &#125; else if ([vc isKindOfClass:[UITabBarController class]]) &#123;</div><div class="line">        return [self _topViewController:[(UITabBarController *)vc selectedViewController]];</div><div class="line">    &#125; else &#123;</div><div class="line">        return vc;</div><div class="line">    &#125;</div><div class="line">    return nil;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">UIViewController *topmostVC = [self topViewController];</div></pre></td></tr></table></figure>
<h2 id="37-数组拆分"><a href="#37-数组拆分" class="headerlink" title="37:数组拆分"></a>37:数组拆分</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> *  数组拆分</div><div class="line"> *</div><div class="line"> *  @param array   数组</div><div class="line"> *  @param subSize 大小</div><div class="line"> *</div><div class="line"> *  @return 多个数组</div><div class="line"> */</div><div class="line">- (NSMutableArray *)splitArray: (NSArray *)array withSubSize : (int)subSize&#123;</div><div class="line">    //  数组将被拆分成指定长度数组的个数</div><div class="line">    unsigned long count = array.count % subSize == 0 ? (array.count / subSize) : (array.count / subSize + 1);</div><div class="line">    //  用来保存指定长度数组的可变数组对象</div><div class="line">    NSMutableArray *arr = [[NSMutableArray alloc] init];</div><div class="line"></div><div class="line">    //利用总个数进行循环，将指定长度的元素加入数组</div><div class="line">    for (int i = 0; i &lt; count; i ++) &#123;</div><div class="line">        //数组下标</div><div class="line">        int index = i * subSize;</div><div class="line">        //保存拆分的固定长度的数组元素的可变数组</div><div class="line">        NSMutableArray *arr1 = [[NSMutableArray alloc] init];</div><div class="line">        //移除子数组的所有元素</div><div class="line">        [arr1 removeAllObjects];</div><div class="line"></div><div class="line">        int j = index;</div><div class="line">        //将数组下标乘以1、2、3，得到拆分时数组的最大下标值，但最大不能超过数组的总大小</div><div class="line">        while (j &lt; subSize*(i + 1) &amp;&amp; j &lt; array.count) &#123;</div><div class="line">            [arr1 addObject:[array objectAtIndexCheck:j]];</div><div class="line">            j += 1;</div><div class="line">        &#125;</div><div class="line">        //将子数组添加到保存子数组的数组中</div><div class="line">        [arr addObject:[arr1 copy]];  </div><div class="line">    &#125;  </div><div class="line"></div><div class="line">    return arr;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="38-图片压缩"><a href="#38-图片压缩" class="headerlink" title="38.图片压缩"></a>38.图片压缩</h2><p>用法：UIImage *yourImage= [self imageWithImageSimple:image scaledToSize:CGSizeMake(210.0, 210.0)];</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">//压缩图片</div><div class="line">- (UIImage*)imageWithImageSimple:(UIImage*)image scaledToSize:(CGSize)newSize</div><div class="line"></div><div class="line">&#123;</div><div class="line"></div><div class="line">// Create a graphics image context</div><div class="line"></div><div class="line">UIGraphicsBeginImageContext(newSize);</div><div class="line"></div><div class="line">// Tell the old image to draw in this newcontext, with the desired</div><div class="line"></div><div class="line">// new size</div><div class="line"></div><div class="line">[image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];</div><div class="line"></div><div class="line">// Get the new image from the context</div><div class="line"></div><div class="line">UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();</div><div class="line"></div><div class="line">// End the context</div><div class="line"></div><div class="line">UIGraphicsEndImageContext();</div><div class="line"></div><div class="line">// Return the new image.</div><div class="line"></div><div class="line">return newImage;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="39-释放Timer宏"><a href="#39-释放Timer宏" class="headerlink" title="39.释放Timer宏"></a>39.释放Timer宏</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">/*</div><div class="line"> * 判断这个Timer不为nil则停止并释放</div><div class="line"> * 如果不先停止可能会导致crash</div><div class="line"> */</div><div class="line">#define WVSAFA_DELETE_TIMER(timer) &#123; \</div><div class="line">    if (timer != nil) &#123; \</div><div class="line">        [timer invalidate]; \</div><div class="line">        [timer release]; \</div><div class="line">        timer = nil; \</div><div class="line">    &#125; \</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="获取某个view所在的控制器"><a href="#获取某个view所在的控制器" class="headerlink" title="获取某个view所在的控制器"></a>获取某个view所在的控制器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (UIViewController *)viewController</div><div class="line">&#123;</div><div class="line">  UIViewController *viewController = nil;  </div><div class="line">  UIResponder *next = self.nextResponder;</div><div class="line">  while (next)</div><div class="line">  &#123;</div><div class="line">    if ([next isKindOfClass:[UIViewController class]])</div><div class="line">    &#123;</div><div class="line">      viewController = (UIViewController *)next;      </div><div class="line">      break;    </div><div class="line">    &#125;    </div><div class="line">    next = next.nextResponder;  </div><div class="line">  &#125; </div><div class="line">    return viewController;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="两种方法删除NSUserDefaults所有记录"><a href="#两种方法删除NSUserDefaults所有记录" class="headerlink" title="两种方法删除NSUserDefaults所有记录"></a>两种方法删除NSUserDefaults所有记录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">//方法一</div><div class="line">NSString *appDomain = [[NSBundle mainBundle] bundleIdentifier];</div><div class="line">[[NSUserDefaults standardUserDefaults] removePersistentDomainForName:appDomain];</div><div class="line"></div><div class="line">//方法二</div><div class="line">- (void)resetDefaults</div><div class="line">&#123;</div><div class="line">    NSUserDefaults * defs = [NSUserDefaults standardUserDefaults];</div><div class="line">    NSDictionary * dict = [defs dictionaryRepresentation];</div><div class="line">    for (id key in dict)</div><div class="line">    &#123;</div><div class="line">        [defs removeObjectForKey:key];</div><div class="line">    &#125;</div><div class="line">    [defs synchronize];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="打印系统所有已注册的字体名称"><a href="#打印系统所有已注册的字体名称" class="headerlink" title="打印系统所有已注册的字体名称"></a>打印系统所有已注册的字体名称</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">#pragma mark - 打印系统所有已注册的字体名称</div><div class="line">void enumerateFonts()</div><div class="line">&#123;</div><div class="line">    for(NSString *familyName in [UIFont familyNames])</div><div class="line">   &#123;</div><div class="line">        NSLog(@&quot;%@&quot;,familyName);               </div><div class="line">        NSArray *fontNames = [UIFont fontNamesForFamilyName:familyName];       </div><div class="line">        for(NSString *fontName in fontNames)</div><div class="line">       &#123;</div><div class="line">            NSLog(@&quot;\t|- %@&quot;,fontName);</div><div class="line">       &#125;</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="获取图片某一点的颜色"><a href="#获取图片某一点的颜色" class="headerlink" title="获取图片某一点的颜色"></a>获取图片某一点的颜色</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">- (UIColor*) getPixelColorAtLocation:(CGPoint)point inImage:(UIImage *)image</div><div class="line">&#123;</div><div class="line"></div><div class="line">    UIColor* color = nil;</div><div class="line">    CGImageRef inImage = image.CGImage;</div><div class="line">    CGContextRef cgctx = [self createARGBBitmapContextFromImage:inImage];</div><div class="line"></div><div class="line">    if (cgctx == NULL) &#123;</div><div class="line">        return nil; /* error */</div><div class="line">    &#125;</div><div class="line">    size_t w = CGImageGetWidth(inImage);</div><div class="line">    size_t h = CGImageGetHeight(inImage);</div><div class="line">    CGRect rect = &#123;0,0,w,&#125;&#125;;</div><div class="line"></div><div class="line">    CGContextDrawImage(cgctx, rect, inImage);</div><div class="line">    unsigned char* data = CGBitmapContextGetData (cgctx);</div><div class="line">    if (data != NULL) &#123;</div><div class="line">        int offset = 4*((w*round(point.y))+round(point.x));</div><div class="line">        int alpha =  data[offset];</div><div class="line">        int red = data[offset+1];</div><div class="line">        int green = data[offset+2];</div><div class="line">        int blue = data[offset+3];</div><div class="line">        color = [UIColor colorWithRed:(red/255.0f) green:(green/255.0f) blue:</div><div class="line">                 (blue/255.0f) alpha:(alpha/255.0f)];</div><div class="line">    &#125;</div><div class="line">    CGContextRelease(cgctx);</div><div class="line">    if (data) &#123;</div><div class="line">        free(data);</div><div class="line">    &#125;</div><div class="line">    return color;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="字符串反转"><a href="#字符串反转" class="headerlink" title="字符串反转"></a>字符串反转</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">第一种：</div><div class="line">- (NSString *)reverseWordsInString:(NSString *)str</div><div class="line">&#123;    </div><div class="line">    NSMutableString *newString = [[NSMutableString alloc] initWithCapacity:str.length];</div><div class="line">    for (NSInteger i = str.length - 1; i &gt;= 0 ; i --)</div><div class="line">    &#123;</div><div class="line">        unichar ch = [str characterAtIndex:i];       </div><div class="line">        [newString appendFormat:@&quot;%c&quot;, ch];    </div><div class="line">    &#125;    </div><div class="line">     return newString;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//第二种：</div><div class="line">- (NSString*)reverseWordsInString:(NSString*)str</div><div class="line">&#123;    </div><div class="line">     NSMutableString *reverString = [NSMutableString stringWithCapacity:str.length];    </div><div class="line">     [str enumerateSubstringsInRange:NSMakeRange(0, str.length) options:NSStringEnumerationReverse | NSStringEnumerationByComposedCharacterSequences  usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) &#123; </div><div class="line">          [reverString appendString:substring];                         </div><div class="line">      &#125;];    </div><div class="line">     return reverString;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="禁止锁屏，"><a href="#禁止锁屏，" class="headerlink" title="禁止锁屏，"></a>禁止锁屏，</h3><p>默认情况下，当设备一段时间没有触控动作时，iOS会锁住屏幕。但有一些应用是不需要锁屏的，比如视频播放器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[UIApplication sharedApplication].idleTimerDisabled = YES;</div><div class="line">或</div><div class="line">[[UIApplication sharedApplication] setIdleTimerDisabled:YES];</div></pre></td></tr></table></figure>
<h3 id="模态推出透明界面"><a href="#模态推出透明界面" class="headerlink" title="模态推出透明界面"></a>模态推出透明界面</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">UIViewController *vc = [[UIViewController alloc] init];</div><div class="line">UINavigationController *na = [[UINavigationController alloc] initWithRootViewController:vc];</div><div class="line"></div><div class="line">if ([[[UIDevice currentDevice] systemVersion] floatValue] &gt;= 8.0)</div><div class="line">&#123;</div><div class="line">     na.modalPresentationStyle = UIModalPresentationOverCurrentContext;</div><div class="line">&#125;</div><div class="line">else</div><div class="line">&#123;</div><div class="line">     self.modalPresentationStyle=UIModalPresentationCurrentContext;</div><div class="line">&#125;</div><div class="line"></div><div class="line">[self presentViewController:na animated:YES completion:nil];</div></pre></td></tr></table></figure>
<h3 id="Xcode调试不显示内存占用"><a href="#Xcode调试不显示内存占用" class="headerlink" title="Xcode调试不显示内存占用"></a>Xcode调试不显示内存占用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">editSCheme  里面有个选项叫叫做enable zoombie Objects  取消选中</div></pre></td></tr></table></figure>
<h3 id="显示隐藏文件"><a href="#显示隐藏文件" class="headerlink" title="显示隐藏文件"></a>显示隐藏文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//显示</div><div class="line">defaults write com.apple.finder AppleShowAllFiles -bool true</div><div class="line">killall Finder</div><div class="line"></div><div class="line">//隐藏</div><div class="line">defaults write com.apple.finder AppleShowAllFiles -bool false</div><div class="line">killall Finder</div></pre></td></tr></table></figure>
<h3 id="iOS跳转到App-Store下载应用评分"><a href="#iOS跳转到App-Store下载应用评分" class="headerlink" title="iOS跳转到App Store下载应用评分"></a>iOS跳转到App Store下载应用评分</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@&quot;itms-apps://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&amp;id=APPID&quot;]];</div></pre></td></tr></table></figure>
<h3 id="iOS-获取汉字的拼音"><a href="#iOS-获取汉字的拼音" class="headerlink" title="iOS 获取汉字的拼音"></a>iOS 获取汉字的拼音</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">+ (NSString *)transform:(NSString *)chinese</div><div class="line">&#123;    </div><div class="line">    //将NSString装换成NSMutableString </div><div class="line">    NSMutableString *pinyin = [chinese mutableCopy];    </div><div class="line">    //将汉字转换为拼音(带音标)    </div><div class="line">    CFStringTransform((__bridge CFMutableStringRef)pinyin, NULL, kCFStringTransformMandarinLatin, NO);    </div><div class="line">    NSLog(@&quot;%@&quot;, pinyin);    </div><div class="line">    //去掉拼音的音标    </div><div class="line">    CFStringTransform((__bridge CFMutableStringRef)pinyin, NULL, kCFStringTransformStripCombiningMarks, NO);    </div><div class="line">    NSLog(@&quot;%@&quot;, pinyin);    </div><div class="line">    //返回最近结果    </div><div class="line">    return pinyin;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<h3 id="手动更改iOS状态栏的颜色"><a href="#手动更改iOS状态栏的颜色" class="headerlink" title="手动更改iOS状态栏的颜色"></a>手动更改iOS状态栏的颜色</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- (void)setStatusBarBackgroundColor:(UIColor *)color</div><div class="line">&#123;</div><div class="line">    UIView *statusBar = [[[UIApplication sharedApplication] valueForKey:@&quot;statusBarWindow&quot;] valueForKey:@&quot;statusBar&quot;];</div><div class="line"></div><div class="line">    if ([statusBar respondsToSelector:@selector(setBackgroundColor:)])</div><div class="line">    &#123;</div><div class="line">        statusBar.backgroundColor = color;    </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="判断当前ViewController是push还是present的方式显示的"><a href="#判断当前ViewController是push还是present的方式显示的" class="headerlink" title="判断当前ViewController是push还是present的方式显示的"></a>判断当前ViewController是push还是present的方式显示的</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">NSArray *viewcontrollers=self.navigationController.viewControllers;</div><div class="line"></div><div class="line">if (viewcontrollers.count &gt; 1)</div><div class="line">&#123;</div><div class="line">    if ([viewcontrollers objectAtIndex:viewcontrollers.count - 1] == self)</div><div class="line">    &#123;</div><div class="line">        //push方式</div><div class="line">       [self.navigationController popViewControllerAnimated:YES];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">else</div><div class="line">&#123;</div><div class="line">    //present方式</div><div class="line">    [self dismissViewControllerAnimated:YES completion:nil];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="获取实际使用的LaunchImage图片"><a href="#获取实际使用的LaunchImage图片" class="headerlink" title="获取实际使用的LaunchImage图片"></a>获取实际使用的LaunchImage图片</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">- (NSString *)getLaunchImageName</div><div class="line">&#123;</div><div class="line">    CGSize viewSize = self.window.bounds.size;</div><div class="line">    // 竖屏    </div><div class="line">    NSString *viewOrientation = @&quot;Portrait&quot;;  </div><div class="line">    NSString *launchImageName = nil;    </div><div class="line">    NSArray* imagesDict = [[[NSBundle mainBundle] infoDictionary] valueForKey:@&quot;UILaunchImages&quot;];</div><div class="line">    for (NSDictionary* dict in imagesDict)</div><div class="line">    &#123;</div><div class="line">        CGSize imageSize = CGSizeFromString(dict[@&quot;UILaunchImageSize&quot;]);</div><div class="line">        if (CGSizeEqualToSize(imageSize, viewSize) &amp;&amp; [viewOrientation isEqualToString:dict[@&quot;UILaunchImageOrientation&quot;]])</div><div class="line">        &#123;</div><div class="line">            launchImageName = dict[@&quot;UILaunchImageName&quot;];        </div><div class="line">        &#125;    </div><div class="line">    &#125;    </div><div class="line">    return launchImageName;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="iOS在当前屏幕获取第一响应"><a href="#iOS在当前屏幕获取第一响应" class="headerlink" title="iOS在当前屏幕获取第一响应"></a>iOS在当前屏幕获取第一响应</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">UIWindow * keyWindow = [[UIApplication sharedApplication] keyWindow];</div><div class="line">UIView * firstResponder = [keyWindow performSelector:@selector(firstResponder)];</div></pre></td></tr></table></figure>
<h3 id="判断对象是否遵循了某协议"><a href="#判断对象是否遵循了某协议" class="headerlink" title="判断对象是否遵循了某协议"></a>判断对象是否遵循了某协议</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">if ([self.selectedController conformsToProtocol:@protocol(RefreshPtotocol)])</div><div class="line">&#123;</div><div class="line">     [self.selectedController performSelector:@selector(onTriggerRefresh)];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="判断view是不是指定视图的子视图"><a href="#判断view是不是指定视图的子视图" class="headerlink" title="判断view是不是指定视图的子视图"></a>判断view是不是指定视图的子视图</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">BOOL isView = [textView isDescendantOfView:self.view];</div></pre></td></tr></table></figure>
<h3 id="NSArray-快速求总和-最大值-最小值-和-平均值"><a href="#NSArray-快速求总和-最大值-最小值-和-平均值" class="headerlink" title="NSArray 快速求总和 最大值 最小值 和 平均值"></a>NSArray 快速求总和 最大值 最小值 和 平均值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">NSArray *array = [NSArray arrayWithObjects:@&quot;2.0&quot;, @&quot;2.3&quot;, @&quot;3.0&quot;, @&quot;4.0&quot;, @&quot;10&quot;, nil];</div><div class="line">CGFloat sum = [[array valueForKeyPath:@&quot;@sum.floatValue&quot;] floatValue];</div><div class="line">CGFloat avg = [[array valueForKeyPath:@&quot;@avg.floatValue&quot;] floatValue];</div><div class="line">CGFloat max =[[array valueForKeyPath:@&quot;@max.floatValue&quot;] floatValue];</div><div class="line">CGFloat min =[[array valueForKeyPath:@&quot;@min.floatValue&quot;] floatValue];</div><div class="line">NSLog(@&quot;%f\n%f\n%f\n%f&quot;,sum,avg,max,min);</div></pre></td></tr></table></figure>
<h3 id="修改UITextField中Placeholder的文字颜色"><a href="#修改UITextField中Placeholder的文字颜色" class="headerlink" title="修改UITextField中Placeholder的文字颜色"></a>修改UITextField中Placeholder的文字颜色</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[textField setValue:[UIColor redColor] forKeyPath:@&quot;_placeholderLabel.textColor&quot;];</div></pre></td></tr></table></figure>
<h3 id="关于NSDateFormatter的格式"><a href="#关于NSDateFormatter的格式" class="headerlink" title="关于NSDateFormatter的格式"></a>关于NSDateFormatter的格式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">G: 公元时代，例如AD公元</div><div class="line">yy: 年的后2位</div><div class="line">yyyy: 完整年</div><div class="line">MM: 月，显示为1-12</div><div class="line">MMM: 月，显示为英文月份简写,如 Jan</div><div class="line">MMMM: 月，显示为英文月份全称，如 Janualy</div><div class="line">dd: 日，2位数表示，如02</div><div class="line">d: 日，1-2位显示，如 2</div><div class="line">EEE: 简写星期几，如Sun</div><div class="line">EEEE: 全写星期几，如Sunday</div><div class="line">aa: 上下午，AM/PM</div><div class="line">H: 时，24小时制，0-23</div><div class="line">K：时，12小时制，0-11</div><div class="line">m: 分，1-2位</div><div class="line">mm: 分，2位</div><div class="line">s: 秒，1-2位</div><div class="line">ss: 秒，2位</div><div class="line">S: 毫秒</div></pre></td></tr></table></figure>
<h3 id="获取一个类的所有子类"><a href="#获取一个类的所有子类" class="headerlink" title="获取一个类的所有子类"></a>获取一个类的所有子类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">+ (NSArray *) allSubclasses</div><div class="line">&#123;</div><div class="line">    Class myClass = [self class];</div><div class="line">    NSMutableArray *mySubclasses = [NSMutableArray array];</div><div class="line">    unsigned int numOfClasses;</div><div class="line">    Class *classes = objc_copyClassList(&amp;numOfClasses;);</div><div class="line">    for (unsigned int ci = 0; ci </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="监测IOS设备是否设置了代理，需要CFNetwork-framework"><a href="#监测IOS设备是否设置了代理，需要CFNetwork-framework" class="headerlink" title="监测IOS设备是否设置了代理，需要CFNetwork.framework"></a>监测IOS设备是否设置了代理，需要CFNetwork.framework</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">NSDictionary *proxySettings = (__bridge NSDictionary *)(CFNetworkCopySystemProxySettings());</div><div class="line">NSArray *proxies = (__bridge NSArray *)(CFNetworkCopyProxiesForURL((__bridge CFURLRef _Nonnull)([NSURL URLWithString:@&quot;http://www.baidu.com&quot;]), (__bridge CFDictionaryRef _Nonnull)(proxySettings)));</div><div class="line">NSLog(@&quot;\n%@&quot;,proxies);</div><div class="line"></div><div class="line">NSDictionary *settings = proxies[0];</div><div class="line">NSLog(@&quot;%@&quot;,[settings objectForKey:(NSString *)kCFProxyHostNameKey]);</div><div class="line">NSLog(@&quot;%@&quot;,[settings objectForKey:(NSString *)kCFProxyPortNumberKey]);</div><div class="line">NSLog(@&quot;%@&quot;,[settings objectForKey:(NSString *)kCFProxyTypeKey]);</div><div class="line"></div><div class="line">if ([[settings objectForKey:(NSString *)kCFProxyTypeKey] isEqualToString:@&quot;kCFProxyTypeNone&quot;])</div><div class="line">&#123;</div><div class="line">     NSLog(@&quot;没代理&quot;);</div><div class="line">&#125;</div><div class="line">else</div><div class="line">&#123;</div><div class="line">     NSLog(@&quot;设置了代理&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="阿拉伯数字转中文格式"><a href="#阿拉伯数字转中文格式" class="headerlink" title="阿拉伯数字转中文格式"></a>阿拉伯数字转中文格式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">+(NSString *)translation:(NSString *)arebic</div><div class="line">&#123;  </div><div class="line">    NSString *str = arebic;</div><div class="line">    NSArray *arabic_numerals = @[@&quot;1&quot;,@&quot;2&quot;,@&quot;3&quot;,@&quot;4&quot;,@&quot;5&quot;,@&quot;6&quot;,@&quot;7&quot;,@&quot;8&quot;,@&quot;9&quot;,@&quot;0&quot;];</div><div class="line">    NSArray *chinese_numerals = @[@&quot;一&quot;,@&quot;二&quot;,@&quot;三&quot;,@&quot;四&quot;,@&quot;五&quot;,@&quot;六&quot;,@&quot;七&quot;,@&quot;八&quot;,@&quot;九&quot;,@&quot;零&quot;];</div><div class="line">    NSArray *digits = @[@&quot;个&quot;,@&quot;十&quot;,@&quot;百&quot;,@&quot;千&quot;,@&quot;万&quot;,@&quot;十&quot;,@&quot;百&quot;,@&quot;千&quot;,@&quot;亿&quot;,@&quot;十&quot;,@&quot;百&quot;,@&quot;千&quot;,@&quot;兆&quot;];</div><div class="line">    NSDictionary *dictionary = [NSDictionary dictionaryWithObjects:chinese_numerals forKeys:arabic_numerals];</div><div class="line"></div><div class="line">    NSMutableArray *sums = [NSMutableArray array];</div><div class="line">    for (int i = 0; i </div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Base64编码与NSString对象或NSData对象的转换"><a href="#Base64编码与NSString对象或NSData对象的转换" class="headerlink" title="Base64编码与NSString对象或NSData对象的转换"></a>Base64编码与NSString对象或NSData对象的转换</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">// Create NSData object</div><div class="line">NSData *nsdata = [@&quot;iOS Developer Tips encoded in Base64&quot;</div><div class="line">  dataUsingEncoding:NSUTF8StringEncoding];</div><div class="line"></div><div class="line">// Get NSString from NSData object in Base64</div><div class="line">NSString *base64Encoded = [nsdata base64EncodedStringWithOptions:0];</div><div class="line"></div><div class="line">// Print the Base64 encoded string</div><div class="line">NSLog(@&quot;Encoded: %@&quot;, base64Encoded);</div><div class="line"></div><div class="line">// Let&apos;s go the other way...</div><div class="line"></div><div class="line">// NSData from the Base64 encoded str</div><div class="line">NSData *nsdataFromBase64String = [[NSData alloc]</div><div class="line">  initWithBase64EncodedString:base64Encoded options:0];</div><div class="line"></div><div class="line">// Decoded NSString from the NSData</div><div class="line">NSString *base64Decoded = [[NSString alloc]</div><div class="line">  initWithData:nsdataFromBase64String encoding:NSUTF8StringEncoding];</div><div class="line">NSLog(@&quot;Decoded: %@&quot;, base64Decoded);</div></pre></td></tr></table></figure>
<h3 id="取消UICollectionView的隐式动画"><a href="#取消UICollectionView的隐式动画" class="headerlink" title="取消UICollectionView的隐式动画"></a>取消UICollectionView的隐式动画</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">UICollectionView在reloadItems的时候，默认会附加一个隐式的fade动画，有时候很讨厌，尤其是当你的cell是复合cell的情况下(比如cell使用到了UIStackView)。</div></pre></td></tr></table></figure>
<h3 id="下面几种方法都可以帮你去除这些动画"><a href="#下面几种方法都可以帮你去除这些动画" class="headerlink" title="下面几种方法都可以帮你去除这些动画"></a>下面几种方法都可以帮你去除这些动画</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">//方法一</div><div class="line">[UIView performWithoutAnimation:^&#123;</div><div class="line">    [collectionView reloadItemsAtIndexPaths:@[[NSIndexPath indexPathForItem:index inSection:0]]];</div><div class="line">&#125;];</div><div class="line"></div><div class="line">//方法二</div><div class="line">[UIView animateWithDuration:0 animations:^&#123;</div><div class="line">    [collectionView performBatchUpdates:^&#123;</div><div class="line">        [collectionView reloadItemsAtIndexPaths:@[[NSIndexPath indexPathForItem:index inSection:0]]];</div><div class="line">    &#125; completion:nil];</div><div class="line">&#125;];</div><div class="line"></div><div class="line">//方法三</div><div class="line">[UIView setAnimationsEnabled:NO];</div><div class="line">[self.trackPanel performBatchUpdates:^&#123;</div><div class="line">    [collectionView reloadItemsAtIndexPaths:@[[NSIndexPath indexPathForItem:index inSection:0]]];</div><div class="line">&#125; completion:^(BOOL finished) &#123;</div><div class="line">    [UIView setAnimationsEnabled:YES];</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h3 id="让Xcode的控制台支持LLDB类型的打印"><a href="#让Xcode的控制台支持LLDB类型的打印" class="headerlink" title="让Xcode的控制台支持LLDB类型的打印"></a>让Xcode的控制台支持LLDB类型的打印</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">打开终端输入三条命令:</div><div class="line">touch ~/.lldbinit</div><div class="line">echo display @import UIKit &gt;&gt; ~/.lldbinit</div><div class="line">echo target stop-hook add -o \&quot;target stop-hook disable\&quot; &gt;&gt; ~/.lldbinit</div></pre></td></tr></table></figure>
<h3 id="CocoaPods-pod-install-pod-update更新慢的问题"><a href="#CocoaPods-pod-install-pod-update更新慢的问题" class="headerlink" title="CocoaPods pod install/pod update更新慢的问题"></a>CocoaPods pod install/pod update更新慢的问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">pod install --verbose --no-repo-update </div><div class="line">pod update --verbose --no-repo-update</div></pre></td></tr></table></figure>
<p>如果不加后面的参数，默认会升级CocoaPods的spec仓库，加一个参数可以省略这一步，然后速度就会提升不少</p>
<h3 id="UIImage-占用内存大小"><a href="#UIImage-占用内存大小" class="headerlink" title="UIImage 占用内存大小"></a>UIImage 占用内存大小</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">UIImage *image = [UIImage imageNamed:@&quot;aa&quot;];</div><div class="line">NSUInteger size  = CGImageGetHeight(image.CGImage) * CGImageGetBytesPerRow(image.CGImage);</div></pre></td></tr></table></figure>
<h3 id="GCD-timer定时器"><a href="#GCD-timer定时器" class="headerlink" title="GCD timer定时器"></a>GCD timer定时器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);</div><div class="line">dispatch_source_t timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0,queue);</div><div class="line">dispatch_source_set_timer(timer,dispatch_walltime(NULL, 0),1.0*NSEC_PER_SEC, 0); //每秒执行</div><div class="line">dispatch_source_set_event_handler(timer, ^&#123;</div><div class="line">    //@&quot;倒计时结束，关闭&quot;</div><div class="line">    dispatch_source_cancel(timer); </div><div class="line">    dispatch_async(dispatch_get_main_queue(), ^&#123;</div><div class="line"></div><div class="line">    &#125;);</div><div class="line">&#125;);</div><div class="line">dispatch_resume(timer);</div></pre></td></tr></table></figure>
<h3 id="图片上绘制文字-写一个UIImage的category"><a href="#图片上绘制文字-写一个UIImage的category" class="headerlink" title="图片上绘制文字 写一个UIImage的category"></a>图片上绘制文字 写一个UIImage的category</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">- (UIImage *)imageWithTitle:(NSString *)title fontSize:(CGFloat)fontSize</div><div class="line">&#123;</div><div class="line">    //画布大小</div><div class="line">    CGSize size=CGSizeMake(self.size.width,self.size.height);</div><div class="line">    //创建一个基于位图的上下文</div><div class="line">    UIGraphicsBeginImageContextWithOptions(size,NO,0.0);//opaque:NO  scale:0.0</div><div class="line"></div><div class="line">    [self drawAtPoint:CGPointMake(0.0,0.0)];</div><div class="line"></div><div class="line">    //文字居中显示在画布上</div><div class="line">    NSMutableParagraphStyle* paragraphStyle = [[NSParagraphStyle defaultParagraphStyle] mutableCopy];</div><div class="line">    paragraphStyle.lineBreakMode = NSLineBreakByCharWrapping;</div><div class="line">    paragraphStyle.alignment=NSTextAlignmentCenter;//文字居中</div><div class="line"></div><div class="line">    //计算文字所占的size,文字居中显示在画布上</div><div class="line">    CGSize sizeText=[title boundingRectWithSize:self.size options:NSStringDrawingUsesLineFragmentOrigin</div><div class="line">                                     attributes:@&#123;NSFontAttributeName:[UIFont systemFontOfSize:fontSize]&#125;context:nil].size;</div><div class="line">    CGFloat width = self.size.width;</div><div class="line">    CGFloat height = self.size.height;</div><div class="line"></div><div class="line">    CGRect rect = CGRectMake((width-sizeText.width)/2, (height-sizeText.height)/2, sizeText.width, sizeText.height);</div><div class="line">    //绘制文字</div><div class="line">    [title drawInRect:rect withAttributes:@&#123; NSFontAttributeName:[UIFont systemFontOfSize:fontSize],NSForegroundColorAttributeName:[ UIColor whiteColor],NSParagraphStyleAttributeName:paragraphStyle&#125;];</div><div class="line"></div><div class="line">    //返回绘制的新图形</div><div class="line">    UIImage *newImage= UIGraphicsGetImageFromCurrentImageContext();</div><div class="line">    UIGraphicsEndImageContext();</div><div class="line">    return newImage;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="查找一个视图的所有子视图"><a href="#查找一个视图的所有子视图" class="headerlink" title="查找一个视图的所有子视图"></a>查找一个视图的所有子视图</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">- (NSMutableArray *)allSubViewsForView:(UIView *)view</div><div class="line">&#123;</div><div class="line">    NSMutableArray *array = [NSMutableArray arrayWithCapacity:0];</div><div class="line">    for (UIView *subView in view.subviews)</div><div class="line">    &#123;</div><div class="line">        [array addObject:subView];</div><div class="line">        if (subView.subviews.count &gt; 0)</div><div class="line">        &#123;</div><div class="line">            [array addObjectsFromArray:[self allSubViewsForView:subView]];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return array;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="计算文件大小"><a href="#计算文件大小" class="headerlink" title="计算文件大小"></a>计算文件大小</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">//文件大小</div><div class="line">- (long long)fileSizeAtPath:(NSString *)path</div><div class="line">&#123;</div><div class="line">    NSFileManager *fileManager = [NSFileManager defaultManager];</div><div class="line"></div><div class="line">    if ([fileManager fileExistsAtPath:path])</div><div class="line">    &#123;</div><div class="line">        long long size = [fileManager attributesOfItemAtPath:path error:nil].fileSize;</div><div class="line">        return size;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    return 0;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//文件夹大小</div><div class="line">- (long long)folderSizeAtPath:(NSString *)path</div><div class="line">&#123;</div><div class="line">    NSFileManager *fileManager = [NSFileManager defaultManager];</div><div class="line"></div><div class="line">    long long folderSize = 0;</div><div class="line"></div><div class="line">    if ([fileManager fileExistsAtPath:path])</div><div class="line">    &#123;</div><div class="line">        NSArray *childerFiles = [fileManager subpathsAtPath:path];</div><div class="line">        for (NSString *fileName in childerFiles)</div><div class="line">        &#123;</div><div class="line">            NSString *fileAbsolutePath = [path stringByAppendingPathComponent:fileName];</div><div class="line">            if ([fileManager fileExistsAtPath:fileAbsolutePath])</div><div class="line">            &#123;</div><div class="line">                long long size = [fileManager attributesOfItemAtPath:fileAbsolutePath error:nil].fileSize;</div><div class="line">                folderSize += size;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    return folderSize;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="UIView设置部分圆角"><a href="#UIView设置部分圆角" class="headerlink" title="UIView设置部分圆角"></a>UIView设置部分圆角</h3><p>你是不是也遇到过这样的问题，一个button或者label，只要右边的两个角圆角，或者只要一个圆角。该怎么办呢。这就需要图层蒙版来帮助我们了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">CGRect rect = view.bounds;</div><div class="line">CGSize radio = CGSizeMake(30, 30);//圆角尺寸</div><div class="line">UIRectCorner corner = UIRectCornerTopLeft|UIRectCornerTopRight;//这只圆角位置</div><div class="line">UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:rect byRoundingCorners:corner cornerRadii:radio];</div><div class="line">CAShapeLayer *masklayer = [[CAShapeLayer alloc]init];//创建shapelayer</div><div class="line">masklayer.frame = view.bounds;</div><div class="line">masklayer.path = path.CGPath;//设置路径</div><div class="line">view.layer.mask = masklayer;</div></pre></td></tr></table></figure>
<h3 id="取上整与取下整"><a href="#取上整与取下整" class="headerlink" title="取上整与取下整"></a>取上整与取下整</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">floor(x),有时候也写做Floor(x)，其功能是“下取整”，即取不大于x的最大整数 例如：</div><div class="line">x=3.14，floor(x)=3</div><div class="line">y=9.99999，floor(y)=9</div><div class="line"></div><div class="line">与floor函数对应的是ceil函数，即上取整函数。</div><div class="line"></div><div class="line">ceil函数的作用是求不小于给定实数的最小整数。</div><div class="line">ceil(2)=ceil(1.2)=cei(1.5)=2.00</div><div class="line"></div><div class="line">floor函数与ceil函数的返回值均为double型</div></pre></td></tr></table></figure>
<h3 id="计算字符串字符长度，一个汉字算两个字符"><a href="#计算字符串字符长度，一个汉字算两个字符" class="headerlink" title="计算字符串字符长度，一个汉字算两个字符"></a>计算字符串字符长度，一个汉字算两个字符</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//方法一：</div><div class="line">- (int)convertToInt:(NSString*)strtemp</div><div class="line">&#123;</div><div class="line">    int strlength = 0;</div><div class="line">    char* p = (char*)[strtemp cStringUsingEncoding:NSUnicodeStringEncoding];</div><div class="line">    for (int i=0 ; i</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="给UIView设置图片"><a href="#给UIView设置图片" class="headerlink" title="给UIView设置图片"></a>给UIView设置图片</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">UIImage *image = [UIImage imageNamed:@&quot;image&quot;];</div><div class="line">self.MYView.layer.contents = (__bridge id _Nullable)(image.CGImage);</div><div class="line">self.MYView.layer.contentsRect = CGRectMake(0, 0, 0.5, 0.5);</div></pre></td></tr></table></figure>
<h3 id="防止scrollView手势覆盖侧滑手势"><a href="#防止scrollView手势覆盖侧滑手势" class="headerlink" title="防止scrollView手势覆盖侧滑手势"></a>防止scrollView手势覆盖侧滑手势</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[scrollView.panGestureRecognizerrequireGestureRecognizerToFail:self.navigationController.interactivePopGestureRecognizer];</div></pre></td></tr></table></figure>
<h3 id="去掉导航栏返回的back标题"><a href="#去掉导航栏返回的back标题" class="headerlink" title="去掉导航栏返回的back标题"></a>去掉导航栏返回的back标题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[[UIBarButtonItemappearance]setBackButtonTitlePositionAdjustment:UIOffsetMake(0, -60)forBarMetrics:UIBarMetricsDefault];</div></pre></td></tr></table></figure>
<h3 id="字符串中是否含有中文"><a href="#字符串中是否含有中文" class="headerlink" title="字符串中是否含有中文"></a>字符串中是否含有中文</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">+ (BOOL)checkIsChinese:(NSString *)string</div><div class="line">&#123;</div><div class="line">    for (int i=0; i</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="dispatch-group的使用"><a href="#dispatch-group的使用" class="headerlink" title="dispatch_group的使用"></a>dispatch_group的使用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">dispatch_group_t dispatchGroup = dispatch_group_create();</div><div class="line">   dispatch_group_enter(dispatchGroup);</div><div class="line">   dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">       NSLog(@&quot;第一个请求完成&quot;);</div><div class="line">       dispatch_group_leave(dispatchGroup);</div><div class="line">   &#125;);</div><div class="line"></div><div class="line">   dispatch_group_enter(dispatchGroup);</div><div class="line"></div><div class="line">   dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(10 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">       NSLog(@&quot;第二个请求完成&quot;);</div><div class="line">       dispatch_group_leave(dispatchGroup);</div><div class="line">   &#125;);</div><div class="line"></div><div class="line">   dispatch_group_notify(dispatchGroup, dispatch_get_main_queue(), ^()&#123;</div><div class="line">       NSLog(@&quot;请求完成&quot;);</div><div class="line">   &#125;);</div></pre></td></tr></table></figure>
<h3 id="UITextField每四位加一个空格-实现代理"><a href="#UITextField每四位加一个空格-实现代理" class="headerlink" title="UITextField每四位加一个空格,实现代理"></a>UITextField每四位加一个空格,实现代理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string</div><div class="line">&#123;</div><div class="line">    // 四位加一个空格</div><div class="line">    if ([string isEqualToString:@&quot;&quot;])</div><div class="line">    &#123;</div><div class="line">        // 删除字符</div><div class="line">        if ((textField.text.length - 2) % 5 == 0)</div><div class="line">        &#123;</div><div class="line">            textField.text = [textField.text substringToIndex:textField.text.length - 1];</div><div class="line">        &#125;</div><div class="line">        return YES;</div><div class="line">    &#125;</div><div class="line">    else</div><div class="line">    &#123;</div><div class="line">        if (textField.text.length % 5 == 0)</div><div class="line">        &#123;</div><div class="line">            textField.text = [NSString stringWithFormat:@&quot;%@ &quot;, textField.text];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return YES;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="获取私有属性和成员变量-import"><a href="#获取私有属性和成员变量-import" class="headerlink" title="获取私有属性和成员变量 #import"></a>获取私有属性和成员变量 #import</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">//获取私有属性 比如设置UIDatePicker的字体颜色</div><div class="line">- (void)setTextColor</div><div class="line">&#123;</div><div class="line">    //获取所有的属性，去查看有没有对应的属性</div><div class="line">    unsigned int count = 0;</div><div class="line">    objc_property_t *propertys = class_copyPropertyList([UIDatePicker class], &amp;count);</div><div class="line">    for(int i = 0;i </div><div class="line"></div><div class="line">//获得成员变量 比如修改UIAlertAction的按钮字体颜色</div><div class="line">    unsigned int count = 0;</div><div class="line">    Ivar *ivars = class_copyIvarList([UIAlertAction class], &amp;count);</div><div class="line">    for(int i =0;i</div></pre></td></tr></table></figure>
<h3 id="获取手机安装的应用"><a href="#获取手机安装的应用" class="headerlink" title="获取手机安装的应用"></a>获取手机安装的应用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Class c =NSClassFromString(@&quot;LSApplicationWorkspace&quot;);</div><div class="line">id s = [(id)c performSelector:NSSelectorFromString(@&quot;defaultWorkspace&quot;)];</div><div class="line">NSArray *array = [s performSelector:NSSelectorFromString(@&quot;allInstalledApplications&quot;)];</div><div class="line">for (id item in array)</div><div class="line">&#123;</div><div class="line">    NSLog(@&quot;%@&quot;,[item performSelector:NSSelectorFromString(@&quot;applicationIdentifier&quot;)]);</div><div class="line">    //NSLog(@&quot;%@&quot;,[item performSelector:NSSelectorFromString(@&quot;bundleIdentifier&quot;)]);</div><div class="line">    NSLog(@&quot;%@&quot;,[item performSelector:NSSelectorFromString(@&quot;bundleVersion&quot;)]);</div><div class="line">    NSLog(@&quot;%@&quot;,[item performSelector:NSSelectorFromString(@&quot;shortVersionString&quot;)]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="判断两个日期是否在同一周-写在NSDate的category里面"><a href="#判断两个日期是否在同一周-写在NSDate的category里面" class="headerlink" title="判断两个日期是否在同一周 写在NSDate的category里面"></a>判断两个日期是否在同一周 写在NSDate的category里面</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">- (BOOL)isSameDateWithDate:(NSDate *)date</div><div class="line">&#123;</div><div class="line">    //日期间隔大于七天之间返回NO</div><div class="line">    if (fabs([self timeIntervalSinceDate:date]) &gt;= 7 * 24 *3600)</div><div class="line">    &#123;</div><div class="line">        return NO;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    NSCalendar *calender = [NSCalendar currentCalendar];</div><div class="line">    calender.firstWeekday = 2;//设置每周第一天从周一开始</div><div class="line">    //计算两个日期分别为这年第几周</div><div class="line">    NSUInteger countSelf = [calender ordinalityOfUnit:NSCalendarUnitWeekday inUnit:NSCalendarUnitYear forDate:self];</div><div class="line">    NSUInteger countDate = [calender ordinalityOfUnit:NSCalendarUnitWeekday inUnit:NSCalendarUnitYear forDate:date];</div><div class="line"></div><div class="line">    //相等就在同一周，不相等就不在同一周</div><div class="line">    return countSelf == countDate;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="应用内打开系统设置界面"><a href="#应用内打开系统设置界面" class="headerlink" title="应用内打开系统设置界面"></a>应用内打开系统设置界面</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//iOS8之后</div><div class="line">[[UIApplication sharedApplication] openURL:[NSURL URLWithString:UIApplicationOpenSettingsURLString]];</div><div class="line">//如果App没有添加权限，显示的是设定界面。如果App有添加权限（例如通知），显示的是App的设定界面。</div><div class="line"></div><div class="line">//iOS8之前</div><div class="line">//先添加一个url type如下图，在代码中调用如下代码,即可跳转到设置页面的对应项</div><div class="line">[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@&quot;prefs:root=WIFI&quot;]];</div></pre></td></tr></table></figure>
<h3 id="可选值如下："><a href="#可选值如下：" class="headerlink" title="可选值如下："></a>可选值如下：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">About — prefs:root=General&amp;path=About</div><div class="line">Accessibility — prefs:root=General&amp;path=ACCESSIBILITY</div><div class="line">Airplane Mode On — prefs:root=AIRPLANE_MODE</div><div class="line">Auto-Lock — prefs:root=General&amp;path=AUTOLOCK</div><div class="line">Brightness — prefs:root=Brightness</div><div class="line">Bluetooth — prefs:root=General&amp;path=Bluetooth</div><div class="line">Date &amp; Time — prefs:root=General&amp;path=DATE_AND_TIME</div><div class="line">FaceTime — prefs:root=FACETIME</div><div class="line">General — prefs:root=General</div><div class="line">Keyboard — prefs:root=General&amp;path=Keyboard</div><div class="line">iCloud — prefs:root=CASTLE</div><div class="line">iCloud Storage &amp; Backup — prefs:root=CASTLE&amp;path=STORAGE_AND_BACKUP</div><div class="line">International — prefs:root=General&amp;path=INTERNATIONAL</div><div class="line">Location Services — prefs:root=LOCATION_SERVICES</div><div class="line">Music — prefs:root=MUSIC</div><div class="line">Music Equalizer — prefs:root=MUSIC&amp;path=EQ</div><div class="line">Music Volume Limit — prefs:root=MUSIC&amp;path=VolumeLimit</div><div class="line">Network — prefs:root=General&amp;path=Network</div><div class="line">Nike + iPod — prefs:root=NIKE_PLUS_IPOD</div><div class="line">Notes — prefs:root=NOTES</div><div class="line">Notification — prefs:root=NOTIFICATI*****_ID</div><div class="line">Phone — prefs:root=Phone</div><div class="line">Photos — prefs:root=Photos</div><div class="line">Profile — prefs:root=General&amp;path=ManagedConfigurationList</div><div class="line">Reset — prefs:root=General&amp;path=Reset</div><div class="line">Safari — prefs:root=Safari</div><div class="line">Siri — prefs:root=General&amp;path=Assistant</div><div class="line">Sounds — prefs:root=Sounds</div><div class="line">Software Update — prefs:root=General&amp;path=SOFTWARE_UPDATE_LINK</div><div class="line">Store — prefs:root=STORE</div><div class="line">Twitter — prefs:root=TWITTER</div><div class="line">Usage — prefs:root=General&amp;path=USAGE</div><div class="line">VPN — prefs:root=General&amp;path=Network/VPN</div><div class="line">Wallpaper — prefs:root=Wallpaper</div><div class="line">Wi-Fi — prefs:root=WIFI</div></pre></td></tr></table></figure>
<h3 id="屏蔽触发事件，2秒后取消屏蔽"><a href="#屏蔽触发事件，2秒后取消屏蔽" class="headerlink" title="屏蔽触发事件，2秒后取消屏蔽"></a>屏蔽触发事件，2秒后取消屏蔽</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[[UIApplication sharedApplication] beginIgnoringInteractionEvents];</div><div class="line">dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">    [[UIApplication sharedApplication] endIgnoringInteractionEvents]</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="动画暂停再开始"><a href="#动画暂停再开始" class="headerlink" title="动画暂停再开始"></a>动画暂停再开始</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">-(void)pauseLayer:(CALayer *)layer</div><div class="line">&#123;</div><div class="line">    CFTimeInterval pausedTime = [layer convertTime:CACurrentMediaTime() fromLayer:nil];</div><div class="line">    layer.speed = 0.0;</div><div class="line">    layer.timeOffset = pausedTime;</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)resumeLayer:(CALayer *)layer</div><div class="line">&#123;</div><div class="line">    CFTimeInterval pausedTime = [layer timeOffset];</div><div class="line">    layer.speed = 1.0;</div><div class="line">    layer.timeOffset = 0.0;</div><div class="line">    layer.beginTime = 0.0;</div><div class="line">    CFTimeInterval timeSincePause = [layer convertTime:CACurrentMediaTime() fromLayer:nil] - pausedTime;</div><div class="line">    layer.beginTime = timeSincePause;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="iOS中数字的格式化"><a href="#iOS中数字的格式化" class="headerlink" title="iOS中数字的格式化"></a>iOS中数字的格式化</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">//通过NSNumberFormatter，同样可以设置NSNumber输出的格式。例如如下代码：</div><div class="line">NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];</div><div class="line">formatter.numberStyle = NSNumberFormatterDecimalStyle;</div><div class="line">NSString *string = [formatter stringFromNumber:[NSNumber numberWithInt:123456789]];</div><div class="line">NSLog(@&quot;Formatted number string:%@&quot;,string);</div><div class="line">//输出结果为：[1223:403] Formatted number string:123,456,789</div><div class="line"></div><div class="line">//其中NSNumberFormatter类有个属性numberStyle，它是一个枚举型，设置不同的值可以输出不同的数字格式。该枚举包括：</div><div class="line">typedef NS_ENUM(NSUInteger, NSNumberFormatterStyle) &#123;</div><div class="line">    NSNumberFormatterNoStyle = kCFNumberFormatterNoStyle,</div><div class="line">    NSNumberFormatterDecimalStyle = kCFNumberFormatterDecimalStyle,</div><div class="line">    NSNumberFormatterCurrencyStyle = kCFNumberFormatterCurrencyStyle,</div><div class="line">    NSNumberFormatterPercentStyle = kCFNumberFormatterPercentStyle,</div><div class="line">    NSNumberFormatterScientificStyle = kCFNumberFormatterScientificStyle,</div><div class="line">    NSNumberFormatterSpellOutStyle = kCFNumberFormatterSpellOutStyle</div><div class="line">&#125;;</div><div class="line">//各个枚举对应输出数字格式的效果如下：其中第三项和最后一项的输出会根据系统设置的语言区域的不同而不同。</div><div class="line">[1243:403] Formatted number string:123456789</div><div class="line">[1243:403] Formatted number string:123,456,789</div><div class="line">[1243:403] Formatted number string:￥123,456,789.00</div><div class="line">[1243:403] Formatted number string:-539,222,988%</div><div class="line">[1243:403] Formatted number string:1.23456789E8</div><div class="line">[1243:403] Formatted number string:一亿二千三百四十五万六千七百八十九</div></pre></td></tr></table></figure>
<h3 id="如何获取WebView所有的图片地址，"><a href="#如何获取WebView所有的图片地址，" class="headerlink" title="如何获取WebView所有的图片地址，"></a>如何获取WebView所有的图片地址，</h3><p>在网页加载完成时，通过js获取图片和添加点击的识别方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">//UIWebView</div><div class="line">- (void)webViewDidFinishLoad:(UIWebView *)webView</div><div class="line">&#123;</div><div class="line">    //这里是js，主要目的实现对url的获取</div><div class="line">    static  NSString * const jsGetImages =</div><div class="line">    @&quot;function getImages()&#123;\</div><div class="line">    var objs = document.getElementsByTagName(\&quot;img\&quot;);\</div><div class="line">    var imgScr = &apos;&apos;;\</div><div class="line">    for(var i=0;i</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">//WKWebView</div><div class="line">- (void)webView:(WKWebView *)webView didFinishNavigation:(null_unspecified WKNavigation *)navigation</div><div class="line">&#123;</div><div class="line">    static  NSString * const jsGetImages =</div><div class="line">    @&quot;function getImages()&#123;\</div><div class="line">    var objs = document.getElementsByTagName(\&quot;img\&quot;);\</div><div class="line">    var imgScr = &apos;&apos;;\</div><div class="line">    for(var i=0;i</div></pre></td></tr></table></figure>
<h3 id="获取到webview的高度"><a href="#获取到webview的高度" class="headerlink" title="获取到webview的高度"></a>获取到webview的高度</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CGFloat height = [[self.webView stringByEvaluatingJavaScriptFromString:@&quot;document.body.offsetHeight&quot;] floatValue];</div></pre></td></tr></table></figure>
<h3 id="navigationBar变为纯透明"><a href="#navigationBar变为纯透明" class="headerlink" title="navigationBar变为纯透明"></a>navigationBar变为纯透明</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//第一种方法</div><div class="line">//导航栏纯透明</div><div class="line">[self.navigationBar setBackgroundImage:[UIImage new] forBarMetrics:UIBarMetricsDefault];</div><div class="line">//去掉导航栏底部的黑线</div><div class="line">self.navigationBar.shadowImage = [UIImage new];</div><div class="line"></div><div class="line">//第二种方法</div><div class="line">[[self.navigationBar subviews] objectAtIndex:0].alpha = 0;</div></pre></td></tr></table></figure>
<h3 id="tabBar同理"><a href="#tabBar同理" class="headerlink" title="tabBar同理"></a>tabBar同理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[self.tabBar setBackgroundImage:[UIImage new]];</div><div class="line">self.tabBar.shadowImage = [UIImage new];</div></pre></td></tr></table></figure>
<h3 id="navigationBar根据滑动距离的渐变色实现"><a href="#navigationBar根据滑动距离的渐变色实现" class="headerlink" title="navigationBar根据滑动距离的渐变色实现"></a>navigationBar根据滑动距离的渐变色实现</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">//第一种</div><div class="line">- (void)scrollViewDidScroll:(UIScrollView *)scrollView</div><div class="line">&#123;</div><div class="line">    CGFloat offsetToShow = 200.0;//滑动多少就完全显示</div><div class="line">    CGFloat alpha = 1 - (offsetToShow - scrollView.contentOffset.y) / offsetToShow;</div><div class="line">    [[self.navigationController.navigationBar subviews] objectAtIndex:0].alpha = alpha;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//第二种</div><div class="line">- (void)scrollViewDidScroll:(UIScrollView *)scrollView</div><div class="line">&#123;</div><div class="line">    CGFloat offsetToShow = 200.0;</div><div class="line">    CGFloat alpha = 1 - (offsetToShow - scrollView.contentOffset.y) / offsetToShow;</div><div class="line"></div><div class="line">    [self.navigationController.navigationBar setShadowImage:[UIImage new]];</div><div class="line">    [self.navigationController.navigationBar setBackgroundImage:[self imageWithColor:[[UIColor orangeColor]colorWithAlphaComponent:alpha]] forBarMetrics:UIBarMetricsDefault];</div><div class="line">&#125;</div><div class="line"></div><div class="line">//生成一张纯色的图片</div><div class="line">- (UIImage *)imageWithColor:(UIColor *)color</div><div class="line">&#123;</div><div class="line">    CGRect rect = CGRectMake(0.0f, 0.0f, 1.0f, 1.0f);</div><div class="line">    UIGraphicsBeginImageContext(rect.size);</div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">    CGContextSetFillColorWithColor(context, [color CGColor]);</div><div class="line">    CGContextFillRect(context, rect);</div><div class="line">    UIImage *theImage = UIGraphicsGetImageFromCurrentImageContext();</div><div class="line">    UIGraphicsEndImageContext();</div><div class="line"></div><div class="line">    return theImage;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="iOS-开发中一些相关的路径"><a href="#iOS-开发中一些相关的路径" class="headerlink" title="iOS 开发中一些相关的路径"></a>iOS 开发中一些相关的路径</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">模拟器的位置:</div><div class="line">/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs </div><div class="line"></div><div class="line">文档安装位置:</div><div class="line">/Applications/Xcode.app/Contents/Developer/Documentation/DocSets</div><div class="line"></div><div class="line">插件保存路径:</div><div class="line">~/Library/ApplicationSupport/Developer/Shared/Xcode/Plug-ins</div><div class="line"></div><div class="line">自定义代码段的保存路径:</div><div class="line">~/Library/Developer/Xcode/UserData/CodeSnippets/ </div><div class="line">如果找不到CodeSnippets文件夹，可以自己新建一个CodeSnippets文件夹。</div><div class="line"></div><div class="line">描述文件路径</div><div class="line">~/Library/MobileDevice/Provisioning Profiles</div></pre></td></tr></table></figure>
<h3 id="navigationItem的BarButtonItem如何紧靠屏幕右边界或者左边界？"><a href="#navigationItem的BarButtonItem如何紧靠屏幕右边界或者左边界？" class="headerlink" title="navigationItem的BarButtonItem如何紧靠屏幕右边界或者左边界？"></a>navigationItem的BarButtonItem如何紧靠屏幕右边界或者左边界？</h3><p>一般情况下，右边的item会和屏幕右侧保持一段距离： 下面是通过添加一个负值宽度的固定间距的item来解决，也可以改变宽度实现不同的间隔：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">UIImage *img = [[UIImage imageNamed:@&quot;icon_cog&quot;] imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal];</div><div class="line">//宽度为负数的固定间距的系统item</div><div class="line">UIBarButtonItem *rightNegativeSpacer = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil];</div><div class="line">[rightNegativeSpacer setWidth:-15];</div><div class="line"></div><div class="line">UIBarButtonItem *rightBtnItem1 = [[UIBarButtonItem alloc]initWithImage:img style:UIBarButtonItemStylePlain target:self action:@selector(rightButtonItemClicked:)];</div><div class="line">UIBarButtonItem *rightBtnItem2 = [[UIBarButtonItem alloc]initWithImage:img style:UIBarButtonItemStylePlain target:self action:@selector(rightButtonItemClicked:)];</div><div class="line">self.navigationItem.rightBarButtonItems = @[rightNegativeSpacer,rightBtnItem1,rightBtnItem2];</div></pre></td></tr></table></figure>
<h3 id="NSString进行URL编码和解码"><a href="#NSString进行URL编码和解码" class="headerlink" title="NSString进行URL编码和解码"></a>NSString进行URL编码和解码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">NSString *string = @&quot;http://abc.com?aaa=你好&amp;bbb=tttee&quot;;</div><div class="line"></div><div class="line">//编码 打印：http://abc.com?aaa=%E4%BD%A0%E5%A5%BD&amp;bbb=tttee</div><div class="line">string = [string stringByAddingPercentEncodingWithAllowedCharacters:[NSCharacterSet URLQueryAllowedCharacterSet]];</div><div class="line"></div><div class="line">//解码 打印：http://abc.com?aaa=你好&amp;bbb=tttee</div><div class="line">string = [string stringByRemovingPercentEncoding];</div></pre></td></tr></table></figure>
<h3 id="UIWebView设置User-Agent。"><a href="#UIWebView设置User-Agent。" class="headerlink" title="UIWebView设置User-Agent。"></a>UIWebView设置User-Agent。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//设置</div><div class="line">NSDictionary *dic = @&#123;@&quot;UserAgent&quot;:@&quot;your UserAgent&quot;&#125;;</div><div class="line">[[NSUserDefaults standardUserDefaults] registerDefaults:dic];</div><div class="line">//获取</div><div class="line">NSString *agent = [self.WebView stringByEvaluatingJavaScriptFromString:@&quot;navigator.userAgent&quot;];</div></pre></td></tr></table></figure>
<h3 id="获取硬盘总容量与可用容量"><a href="#获取硬盘总容量与可用容量" class="headerlink" title="获取硬盘总容量与可用容量:"></a>获取硬盘总容量与可用容量:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">NSFileManager *fileManager = [NSFileManager defaultManager];</div><div class="line">NSDictionary *attributes = [fileManager attributesOfFileSystemForPath:NSHomeDirectory() error:nil];</div><div class="line"></div><div class="line">NSLog(@&quot;容量%.2fG&quot;,[attributes[NSFileSystemSize] doubleValue] / (powf(1024, 3)));</div><div class="line">NSLog(@&quot;可用%.2fG&quot;,[attributes[NSFileSystemFreeSize] doubleValue] / powf(1024, 3));</div></pre></td></tr></table></figure>
<h3 id="获取UIColor的RGBA值"><a href="#获取UIColor的RGBA值" class="headerlink" title="获取UIColor的RGBA值"></a>获取UIColor的RGBA值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">UIColor *color = [UIColor colorWithRed:0.2 green:0.3 blue:0.9 alpha:1.0];</div><div class="line">const CGFloat *components = CGColorGetComponents(color.CGColor);</div><div class="line">NSLog(@&quot;Red: %.1f&quot;, components[0]);</div><div class="line">NSLog(@&quot;Green: %.1f&quot;, components[1]);</div><div class="line">NSLog(@&quot;Blue: %.1f&quot;, components[2]);</div><div class="line">NSLog(@&quot;Alpha: %.1f&quot;, components[3]);</div></pre></td></tr></table></figure>
<h3 id="修改textField的placeholder的字体颜色、大小"><a href="#修改textField的placeholder的字体颜色、大小" class="headerlink" title="修改textField的placeholder的字体颜色、大小"></a>修改textField的placeholder的字体颜色、大小</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[self.textField setValue:[UIColor redColor] forKeyPath:@&quot;_placeholderLabel.textColor&quot;];</div><div class="line">[self.textField setValue:[UIFont boldSystemFontOfSize:16] forKeyPath:@&quot;_placeholderLabel.font&quot;];</div></pre></td></tr></table></figure>
<h3 id="AFN移除JSON中的NSNull"><a href="#AFN移除JSON中的NSNull" class="headerlink" title="AFN移除JSON中的NSNull"></a>AFN移除JSON中的NSNull</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">AFJSONResponseSerializer *response = [AFJSONResponseSerializer serializer];</div><div class="line">response.removesKeysWithNullValues = YES;</div></pre></td></tr></table></figure>
<h3 id="ceil-和floor"><a href="#ceil-和floor" class="headerlink" title="ceil()和floor()"></a>ceil()和floor()</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ceil()功 能：返回大于或者等于指定表达式的最小整数</div><div class="line">floor()功 能：返回小于或者等于指定表达式的最大整数</div><div class="line">UIWebView里面的图片自适应屏幕</div></pre></td></tr></table></figure>
<h3 id="在webView加载完的代理方法里面这样写："><a href="#在webView加载完的代理方法里面这样写：" class="headerlink" title="在webView加载完的代理方法里面这样写："></a>在webView加载完的代理方法里面这样写：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (void)webViewDidFinishLoad:(UIWebView *)webView</div><div class="line">&#123;</div><div class="line">    NSString *js = @&quot;function imgAutoFit() &#123; \</div><div class="line">    var imgs = document.getElementsByTagName(&apos;img&apos;); \</div><div class="line">    for (var i = 0; i &lt; imgs.length; ++i) &#123; \</div><div class="line">    var img = imgs[i]; \</div><div class="line">    img.style.maxWidth = %f; \</div><div class="line">    &#125; \</div><div class="line">    &#125;&quot;;</div><div class="line"></div><div class="line">    js = [NSString stringWithFormat:js, [UIScreen mainScreen].bounds.size.width - 20];</div><div class="line"></div><div class="line">    [webView stringByEvaluatingJavaScriptFromString:js];</div><div class="line">    [webView stringByEvaluatingJavaScriptFromString:@&quot;imgAutoFit()&quot;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="NSDateFormat最佳方式（strptime）"><a href="#NSDateFormat最佳方式（strptime）" class="headerlink" title="NSDateFormat最佳方式（strptime）"></a>NSDateFormat最佳方式（strptime）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">+ (NSDate *)dateFromISO8601StringDateFormatter:(NSString *)string locale:(NSLocale *)locale&#123;</div><div class="line">    if (!string) &#123;</div><div class="line">        return nil;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    struct tm tm;</div><div class="line">    time_t t;</div><div class="line"></div><div class="line">    strptime([string cStringUsingEncoding:NSUTF8StringEncoding], &quot;%Y-%m-%d %H:%M:%S&quot;, &amp;tm);</div><div class="line">    tm.tm_isdst = -1;</div><div class="line">    t = mktime(&amp;tm);</div><div class="line"></div><div class="line">    return [NSDate dateWithTimeIntervalSince1970:t + [[NSTimeZone localTimeZone] secondsFromGMT]];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (NSString *)ISO8601String:(NSDate*)date &#123;</div><div class="line">    struct tm *timeinfo;</div><div class="line">    char buffer[80];</div><div class="line"></div><div class="line">    time_t rawtime = [date timeIntervalSince1970] - [[NSTimeZone localTimeZone] secondsFromGMT];</div><div class="line">    timeinfo = localtime(&amp;rawtime);</div><div class="line"></div><div class="line">    strftime(buffer, 80, &quot;%Y-%m-%d %H:%M:%S&quot;, timeinfo);</div><div class="line"></div><div class="line">    return [NSString stringWithCString:buffer encoding:NSUTF8StringEncoding];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="毛玻璃"><a href="#毛玻璃" class="headerlink" title="毛玻璃"></a>毛玻璃</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">//创建</div><div class="line">UIImageView *imageView = [[UIImageView alloc]initWithFrame:self.view.bounds];</div><div class="line">//图片</div><div class="line">imageView.image = [UIImage imageNamed:@&quot;1.jpeg&quot;];</div><div class="line">//背景颜色</div><div class="line">imageView.backgroundColor = [UIColor yellowColor];</div><div class="line">//设置图片内容模式</div><div class="line">imageView.contentMode = UIViewContentModeScaleAspectFill;</div><div class="line"></div><div class="line">[self.view addSubview:imageView];</div><div class="line"></div><div class="line">//毛玻璃</div><div class="line">UIToolbar *toolbar = [[UIToolbar alloc]initWithFrame:imageView.bounds];</div><div class="line">//样式</div><div class="line">toolbar.barStyle = UIBarStyleDefault;</div><div class="line">//透明度</div><div class="line">toolbar.alpha = 0.8f;</div><div class="line">[imageView addSubview:toolbar];</div></pre></td></tr></table></figure>
<h3 id="tableview下拉刷新停留（不滚到顶部），-类似QQ，微信拉去历史消息"><a href="#tableview下拉刷新停留（不滚到顶部），-类似QQ，微信拉去历史消息" class="headerlink" title="tableview下拉刷新停留（不滚到顶部）， 类似QQ，微信拉去历史消息"></a>tableview下拉刷新停留（不滚到顶部）， 类似QQ，微信拉去历史消息</h3><p>关于TableView代理方法和其他一些数据与逻辑处理和平时一样，只是在下啦的时候啦到的数据，放到最前面，同事控制TableView的偏移。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">self.oldSize = self.tableView.contentSize;</div><div class="line">self.oldPoint = self.tableView.contentOffset;</div><div class="line"></div><div class="line">dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.2 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line"></div><div class="line">    //                if (self.isfirst) &#123;</div><div class="line">    for (int i = 0; i &lt; 15; i++) &#123;</div><div class="line">        [self.dataArray insertObject:[NSString stringWithFormat:@&quot;新增加信息%d&quot;,i] atIndex:0];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //            &#125;</div><div class="line">    //            self.isfirst = YES;</div><div class="line">    // 刷新表格</div><div class="line">    [self.tableView reloadData];</div><div class="line"></div><div class="line">    // (最好在刷新表格后调用)调用endRefreshing可以结束刷新状态</div><div class="line">    [self.tableView EndRefreshing];</div><div class="line"></div><div class="line">    CGSize newSize = self.tableView.contentSize;</div><div class="line"></div><div class="line">    CGPoint newPoint = CGPointMake(0, self.oldPoint.y+newSize.height - self.oldSize.height);</div><div class="line">    self.tableView.contentOffset = newPoint;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="KeyChain隐私信息存储（主要是密码类）"><a href="#KeyChain隐私信息存储（主要是密码类）" class="headerlink" title="KeyChain隐私信息存储（主要是密码类）"></a>KeyChain隐私信息存储（主要是密码类）</h3><p>集成NSObject</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"> -(NSMutableDictionary *)getKeychainQuery:(NSString *)service</div><div class="line">&#123;</div><div class="line">    return [NSMutableDictionary dictionaryWithObjectsAndKeys:</div><div class="line">            (__bridge_transfer id)kSecClassGenericPassword,(__bridge_transfer id)kSecClass,</div><div class="line">            service, (__bridge_transfer id)kSecAttrService,</div><div class="line">            service, (__bridge_transfer id)kSecAttrAccount,</div><div class="line">            (__bridge_transfer id)kSecAttrAccessibleAfterFirstUnlock,(__bridge_transfer id)kSecAttrAccessible,</div><div class="line">            nil];</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (void)saveKeychainValue:(NSString *)sValue Key:(NSString *)sKey</div><div class="line">&#123;</div><div class="line">    //Get search dictionary</div><div class="line">    NSMutableDictionary *keychainQuery = [self getKeychainQuery:sKey];</div><div class="line">    //Delete old item before add new item</div><div class="line">    SecItemDelete((__bridge_retained CFDictionaryRef)keychainQuery);</div><div class="line">    //Add new object to search dictionary(Attention:the data format)</div><div class="line">    [keychainQuery setObject:[NSKeyedArchiver archivedDataWithRootObject:sValue] forKey:(__bridge_transfer id)kSecValueData];</div><div class="line">    //Add item to keychain with the search dictionary</div><div class="line">    SecItemAdd((__bridge_retained CFDictionaryRef)keychainQuery, NULL);</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (NSString *)readKeychainValue:(NSString *)sKey</div><div class="line">&#123;</div><div class="line">    NSString *ret = nil;</div><div class="line">    NSMutableDictionary *keychainQuery = [self getKeychainQuery:sKey];</div><div class="line"></div><div class="line">    //Configure the search setting</div><div class="line">    [keychainQuery setObject:(id)kCFBooleanTrue forKey:(__bridge_transfer id)kSecReturnData];</div><div class="line">    [keychainQuery setObject:(__bridge_transfer id)kSecMatchLimitOne forKey:(__bridge_transfer id)kSecMatchLimit];</div><div class="line">    CFDataRef keyData = NULL;</div><div class="line">    if (SecItemCopyMatching((__bridge_retained CFDictionaryRef)keychainQuery, (CFTypeRef *)&amp;keyData) == noErr) &#123;</div><div class="line">    &lt;a href=&quot;http://www.jobbole.com/members/xyz937134366&quot;&gt;@try&lt;/a&gt; &#123;</div><div class="line">        ret = (NSString *)[NSKeyedUnarchiver unarchiveObjectWithData:(__bridge_transfer NSData *)keyData];</div><div class="line">        &#125; &lt;a href=&quot;http://www.jobbole.com/members/wx895846013&quot;&gt;@catch&lt;/a&gt; (NSException *e) &#123;</div><div class="line">            NSLog(@&quot;Unarchive of %@ failed: %@&quot;, sKey, e);</div><div class="line">        &#125; &lt;a href=&quot;http://www.jobbole.com/members/finally&quot;&gt;@finally&lt;/a&gt; &#123;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return ret;</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (void)deleteKeychainValue:(NSString *)sKey &#123;</div><div class="line">    NSMutableDictionary *keychainQuery = [self getKeychainQuery:sKey];</div><div class="line">    SecItemDelete((__bridge_retained CFDictionaryRef)keychainQuery);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="自定义圆角裁剪：搞性能"><a href="#自定义圆角裁剪：搞性能" class="headerlink" title="自定义圆角裁剪：搞性能"></a>自定义圆角裁剪：搞性能</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div></pre></td><td class="code"><pre><div class="line">// ------------------------------------------------------------------</div><div class="line">// --------------------- 以下是自定义图像处理部分 -----------------------</div><div class="line">// ------------------------------------------------------------------</div><div class="line"></div><div class="line">// 自定义裁剪算法</div><div class="line">- (UIImage *)dealImage:(UIImage *)img cornerRadius:(CGFloat)c &#123;</div><div class="line">    // 1.CGDataProviderRef 把 CGImage 转 二进制流</div><div class="line">    CGDataProviderRef provider = CGImageGetDataProvider(img.CGImage);</div><div class="line">    void *imgData = (void *)CFDataGetBytePtr(CGDataProviderCopyData(provider));</div><div class="line">    int width = img.size.width * img.scale;</div><div class="line">    int height = img.size.height * img.scale;</div><div class="line"></div><div class="line">    // 2.处理 imgData</div><div class="line">//    dealImage(imgData, width, height);</div><div class="line">    cornerImage(imgData, width, height, c);</div><div class="line"></div><div class="line">    // 3.CGDataProviderRef 把 二进制流 转 CGImage</div><div class="line">    CGDataProviderRef pv = CGDataProviderCreateWithData(NULL, imgData, width * height * 4, releaseData);</div><div class="line">    CGImageRef content = CGImageCreate(width , height, 8, 32, 4 * width, CGColorSpaceCreateDeviceRGB(), kCGBitmapByteOrder32Big | kCGImageAlphaPremultipliedLast, pv, NULL, true, kCGRenderingIntentDefault);</div><div class="line">    UIImage *result = [UIImage imageWithCGImage:content];</div><div class="line">    CGDataProviderRelease(pv);      // 释放空间</div><div class="line">    CGImageRelease(content);</div><div class="line"></div><div class="line">    return result;</div><div class="line">&#125;</div><div class="line"></div><div class="line">void releaseData(void *info, const void *data, size_t size) &#123;</div><div class="line">    free((void *)data);</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 在 img 上处理图片, 测试用</div><div class="line">void dealImage(UInt32 *img, int w, int h) &#123;</div><div class="line">    int num = w * h;</div><div class="line">    UInt32 *cur = img;</div><div class="line">    for (int i=0; i&lt;num; i++, cur++) &#123;</div><div class="line">        UInt8 *p = (UInt8 *)cur;</div><div class="line">        // RGBA 排列</div><div class="line">        // f(x) = 255 - g(x) 求负片</div><div class="line">        p[0] = 255 - p[0];</div><div class="line">        p[1] = 255 - p[1];</div><div class="line">        p[2] = 255 - p[2];</div><div class="line">        p[3] = 255;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 裁剪圆角</div><div class="line">void cornerImage(UInt32 *const img, int w, int h, CGFloat cornerRadius) &#123;</div><div class="line">    CGFloat c = cornerRadius;</div><div class="line">    CGFloat min = w &gt; h ? h : w;</div><div class="line"></div><div class="line">    if (c &lt; 0) &#123; c = 0; &#125;</div><div class="line">    if (c &gt; min * 0.5) &#123; c = min * 0.5; &#125;</div><div class="line"></div><div class="line">    // 左上 y:[0, c), x:[x, c-y)</div><div class="line">    for (int y=0; y&lt;c; y++) &#123;</div><div class="line">        for (int x=0; x&lt;c-y; x++) &#123;</div><div class="line">            UInt32 *p = img + y * w + x;    // p 32位指针，RGBA排列，各8位</div><div class="line">            if (isCircle(c, c, c, x, y) == false) &#123;</div><div class="line">                *p = 0;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    // 右上 y:[0, c), x:[w-c+y, w)</div><div class="line">    int tmp = w-c;</div><div class="line">    for (int y=0; y&lt;c; y++) &#123;</div><div class="line">        for (int x=tmp+y; x&lt;w; x++) &#123;</div><div class="line">            UInt32 *p = img + y * w + x;</div><div class="line">            if (isCircle(w-c, c, c, x, y) == false) &#123;</div><div class="line">                *p = 0;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    // 左下 y:[h-c, h), x:[0, y-h+c)</div><div class="line">    tmp = h-c;</div><div class="line">    for (int y=h-c; y&lt;h; y++) &#123;</div><div class="line">        for (int x=0; x&lt;y-tmp; x++) &#123;</div><div class="line">            UInt32 *p = img + y * w + x;</div><div class="line">            if (isCircle(c, h-c, c, x, y) == false) &#123;</div><div class="line">                *p = 0;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    // 右下 y~[h-c, h), x~[w-c+h-y, w)</div><div class="line">    tmp = w-c+h;</div><div class="line">    for (int y=h-c; y&lt;h; y++) &#123;</div><div class="line">        for (int x=tmp-y; x&lt;w; x++) &#123;</div><div class="line">            UInt32 *p = img + y * w + x;</div><div class="line">            if (isCircle(w-c, h-c, c, x, y) == false) &#123;</div><div class="line">                *p = 0;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 判断点 (px, py) 在不在圆心 (cx, cy) 半径 r 的圆内</div><div class="line">static inline bool isCircle(float cx, float cy, float r, float px, float py) &#123;</div><div class="line">    if ((px-cx) * (px-cx) + (py-cy) * (py-cy) &gt; r * r) &#123;</div><div class="line">        return false;</div><div class="line">    &#125;</div><div class="line">    return true;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 其他图像效果可以自己写函数，然后在 dealImage: 中调用 otherImage 即可</div><div class="line">void otherImage(UInt32 *const img, int w, int h) &#123;</div><div class="line">    // 自定义处理</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="隐藏tabbar上面的虚线"><a href="#隐藏tabbar上面的虚线" class="headerlink" title="隐藏tabbar上面的虚线"></a>隐藏tabbar上面的虚线</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">//隐藏阴影线</div><div class="line">[[UITabBar appearance] setShadowImage:[UIImage new]];</div><div class="line">- (void)setupTabBarBackgroundImage &#123;</div><div class="line">    UIImage *image = [UIImage imageNamed:@&quot;tab_bg&quot;];</div><div class="line">    CGFloat top = 40; // 顶端盖高度</div><div class="line">    CGFloat bottom = 40 ; // 底端盖高度</div><div class="line">    CGFloat left = 100; // 左端盖宽度</div><div class="line">    CGFloat right = 100; // 右端盖宽度</div><div class="line">    UIEdgeInsets insets = UIEdgeInsetsMake(top, left, bottom, right);</div><div class="line">    // 指定为拉伸模式，伸缩后重新赋值</div><div class="line">    UIImage *TabBgImage = [image resizableImageWithCapInsets:insets resizingMode:UIImageResizingModeStretch];</div><div class="line">    self.tabBar.backgroundImage = TabBgImage;</div><div class="line">    [[UITabBar appearance] setShadowImage:[UIImage new]];</div><div class="line">    [[UITabBar appearance] setBackgroundImage:[[UIImage alloc]init]];</div><div class="line">&#125;</div><div class="line">//自定义TabBar高度</div><div class="line">- (void)viewWillLayoutSubviews &#123;</div><div class="line">    CGRect tabFrame = self.tabBar.frame;</div><div class="line">    tabFrame.size.height = 60;</div><div class="line">    tabFrame.origin.y = self.view.frame.size.height - 60;</div><div class="line">    self.tabBar.frame = tabFrame;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="隐藏导航栏下面的虚线"><a href="#隐藏导航栏下面的虚线" class="headerlink" title="隐藏导航栏下面的虚线"></a>隐藏导航栏下面的虚线</h3><h6 id="方法一，世界使用背景图片与阴影"><a href="#方法一，世界使用背景图片与阴影" class="headerlink" title="#方法一，世界使用背景图片与阴影"></a>#方法一，世界使用背景图片与阴影</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">- (void)viewWillAppear:(BOOL)animated&#123;</div><div class="line"></div><div class="line">    // Called when the view is about to made visible. Default does nothing    </div><div class="line"></div><div class="line">    [super viewWillAppear:animated];</div><div class="line"></div><div class="line">    //去除导航栏下方的横线</div><div class="line"></div><div class="line">    [navigationBar setBackgroundImage:[UIImage imageWithColor:[self colorFromHexRGB:@&quot;33cccc&quot;]]</div><div class="line"></div><div class="line">                       forBarPosition:UIBarPositionAny</div><div class="line"></div><div class="line">                           barMetrics:UIBarMetricsDefault];</div><div class="line"></div><div class="line">    [navigationBar setShadowImage:[UIImage new]];</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这是唯一一个隐藏这条线的官方用法，但是有一个缺陷-删除了translucency(半透明)</p>
<h6 id="方法二："><a href="#方法二：" class="headerlink" title="#方法二："></a>#方法二：</h6><p>1）声明UIImageView变量,存储底部横线</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@interface MyViewController &#123;</div><div class="line">    UIImageView *navBarHairlineImageView;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>2）在viewDidLoad中加入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">navBarHairlineImageView = [self findHairlineImageViewUnder:self.navigationController.navigationBar];</div></pre></td></tr></table></figure>
<p>3）实现找出底部横线的函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">- (UIImageView *)findHairlineImageViewUnder:(UIView *)view &#123;</div><div class="line">    if ([view isKindOfClass:UIImageView.class] &amp;&amp; view.bounds.size.height &lt;= 1.0) &#123;</div><div class="line">            return (UIImageView *)view;</div><div class="line">    &#125;</div><div class="line">    for (UIView *subview in view.subviews) &#123;</div><div class="line">        UIImageView *imageView = [self findHairlineImageViewUnder:subview];</div><div class="line">        if (imageView) &#123;</div><div class="line">            return imageView;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return nil;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>4）最后在viewWillAppear，viewWillDisappear中处理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- (void)viewWillAppear:(BOOL)animated &#123;</div><div class="line">    [super viewWillAppear:animated];</div><div class="line">    navBarHairlineImageView.hidden = YES;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)viewWillDisappear:(BOOL)animated &#123;</div><div class="line">    [super viewWillDisappear:animated];</div><div class="line">    navBarHairlineImageView.hidden = NO;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###两个范围的富文本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">NSString *times = [NSString stringWithFormat:@&quot;哇塞！本次视频聊天%@&quot;, [info objectStringForKey:@&quot;times&quot;]];</div><div class="line">NSString *type = [NSString stringWithFormat:@&quot;%@&quot;, [info objectStringForKey:@&quot;type&quot;]];</div><div class="line">NSString *counts = nil;</div><div class="line">if ([type isEqualToString:@&quot;1&quot;]) &#123;</div><div class="line">    counts = [NSString stringWithFormat:@&quot;消耗%@能量&quot;, [info objectStringForKey:@&quot;counts&quot;]];</div><div class="line">&#125; else &#123;</div><div class="line">    counts = [NSString stringWithFormat:@&quot;赚了%@积分&quot;, [info objectStringForKey:@&quot;counts&quot;]];</div><div class="line">&#125;</div><div class="line"></div><div class="line">NSString *formatString = [NSString stringWithFormat:@&quot;%@,%@&quot;, times, counts];</div><div class="line">NSMutableAttributedString *AttributedStr = [[NSMutableAttributedString alloc]initWithString:formatString];</div><div class="line">NSRange range = [formatString rangeOfString:@&quot;,&quot;];</div><div class="line">[AttributedStr addAttribute:NSForegroundColorAttributeName value:[UIColor colorWithHexString:@&quot;#fb455a&quot;] range:NSMakeRange(9, range.location - 9)];</div><div class="line">[AttributedStr addAttribute:NSForegroundColorAttributeName value:[UIColor colorWithHexString:@&quot;#fb455a&quot;] range:NSMakeRange(range.location + 3, formatString.length - range.location - 5)];</div></pre></td></tr></table></figure>
<h3 id="修改UIAlertController"><a href="#修改UIAlertController" class="headerlink" title="修改UIAlertController"></a>修改UIAlertController</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">// 在 viewDidLoad 中创建</div><div class="line">UIAlertController *alertVC = [UIAlertController alertControllerWithTitle:nil message:AttributedStr.string preferredStyle:UIAlertControllerStyleAlert];</div><div class="line">// 用 KVC 修改其 没有暴露出来的</div></pre></td></tr></table></figure>
<p>// [alertVC setValue:AttributedTit forKey:@“attributedTitle”]; [alertVC setValue:AttributedStr forKey:@“attributedMessage”];</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">//修改按钮的颜色，同上可以使用同样的方法修改内容，样式</div><div class="line">UIAlertAction *defaultAction = [UIAlertAction actionWithTitle:@&quot;确定&quot; style:UIAlertActionStyleDefault handler:nil];</div><div class="line">[defaultAction setValue:[UIColor blackColor] forKey:@&quot;_titleTextColor&quot;];</div><div class="line">[alertVC addAction:defaultAction];</div><div class="line"></div><div class="line">[self presentViewController:alertVC animated:YES completion:nil];</div></pre></td></tr></table></figure>
<p>上面使用了一种个人比较喜欢的方法，</p>
<blockquote>
<p>总体来说，第二种办法还是很好地，建议大家使用第二种办法。</p>
</blockquote>
<hr>
<hr>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/iOS/" rel="tag"># iOS</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/09/15/关于多线程安全/" rel="next" title="关于多线程安全">
                <i class="fa fa-chevron-left"></i> 关于多线程安全
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/12/20/我的读书清单/" rel="prev" title="我的读书清单">
                我的读书清单 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/11/21/功能代码小结&备忘/"
           data-title="功能代码小结&备忘" data-url="http://dupengfei.com/2016/11/21/功能代码小结&备忘/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="杜鹏飞" />
          <p class="site-author-name" itemprop="name">杜鹏飞</p>
           
              <p class="site-description motion-element" itemprop="description">iOS Developer</p>
          
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">18</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/dupengfei" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://plus.google.com/u/0/117309292640302365524" target="_blank" title="G+">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  G+
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1：取消tableView头部和底部悬浮效果"><span class="nav-number">1.</span> <span class="nav-text">1：取消tableView头部和底部悬浮效果</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2：获取随机数"><span class="nav-number">2.</span> <span class="nav-text">2：获取随机数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3：去除tableView分组头部多余间距"><span class="nav-number">3.</span> <span class="nav-text">3：去除tableView分组头部多余间距</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一："><span class="nav-number">3.0.1.</span> <span class="nav-text">一：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二："><span class="nav-number">3.0.2.</span> <span class="nav-text">二：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#有个朋友给了一个更好的方案"><span class="nav-number">3.0.3.</span> <span class="nav-text">有个朋友给了一个更好的方案</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4：图片截取"><span class="nav-number">4.</span> <span class="nav-text">4：图片截取</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5：模糊图片"><span class="nav-number">5.</span> <span class="nav-text">5：模糊图片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6：文件大小"><span class="nav-number">6.</span> <span class="nav-text">6：文件大小</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7：手机号"><span class="nav-number">7.</span> <span class="nav-text">7：手机号</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8：邮箱"><span class="nav-number">8.</span> <span class="nav-text">8：邮箱</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#通过区分字符串"><span class="nav-number">8.0.1.</span> <span class="nav-text">通过区分字符串</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#利用正则表达式验证"><span class="nav-number">8.0.2.</span> <span class="nav-text">利用正则表达式验证</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9：网址"><span class="nav-number">9.</span> <span class="nav-text">9：网址</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-首先进行第一步判断传入的字符串是否符合HTTP路径的语法规则-即”HTTPS-E2-80-9D-或-“HTTP-E2-80-9D-从封装的一个函数-传入即可判断"><span class="nav-number">9.0.1.</span> <span class="nav-text">1.首先进行第一步判断传入的字符串是否符合HTTP路径的语法规则,即”HTTPS://%E2%80%9D 或 “HTTP://%E2%80%9D ,从封装的一个函数,传入即可判断</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#第二步-判断此路径是否能够请求成功-直接进行HTTP请求-观察返回结果-gt"><span class="nav-number">9.0.2.</span> <span class="nav-text">第二步,判断此路径是否能够请求成功,直接进行HTTP请求,观察返回结果-></span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10：JSON转字典"><span class="nav-number">10.</span> <span class="nav-text">10：JSON转字典</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#数组转JSON"><span class="nav-number">10.0.1.</span> <span class="nav-text">数组转JSON</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11：iPhone设备类型"><span class="nav-number">11.</span> <span class="nav-text">11：iPhone设备类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12：iPhone系统版本"><span class="nav-number">12.</span> <span class="nav-text">12：iPhone系统版本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13：日志"><span class="nav-number">13.</span> <span class="nav-text">13：日志</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14：颜色"><span class="nav-number">14.</span> <span class="nav-text">14：颜色</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15：弱引用"><span class="nav-number">15.</span> <span class="nav-text">15：弱引用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16：屏幕尺寸"><span class="nav-number">16.</span> <span class="nav-text">16：屏幕尺寸</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17：获取view的控制"><span class="nav-number">17.</span> <span class="nav-text">17：获取view的控制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#18：字典防蹦"><span class="nav-number">18.</span> <span class="nav-text">18：字典防蹦</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#不可变"><span class="nav-number">18.0.1.</span> <span class="nav-text">不可变</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#可变"><span class="nav-number">18.0.2.</span> <span class="nav-text">可变</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#19：数组防蹦"><span class="nav-number">19.</span> <span class="nav-text">19：数组防蹦</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#不可变-1"><span class="nav-number">19.0.1.</span> <span class="nav-text">不可变</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#可变-1"><span class="nav-number">19.0.2.</span> <span class="nav-text">可变</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#20：本文输入错误提示"><span class="nav-number">20.</span> <span class="nav-text">20：本文输入错误提示</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#21：当前时间"><span class="nav-number">21.</span> <span class="nav-text">21：当前时间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#22-当前版本"><span class="nav-number">22.</span> <span class="nav-text">22:当前版本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#23-tabBar红点"><span class="nav-number">23.</span> <span class="nav-text">23:tabBar红点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#24-Log日志-m"><span class="nav-number">24.</span> <span class="nav-text">24:Log日志.m</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#25-MD5"><span class="nav-number">25.</span> <span class="nav-text">25:MD5</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#26-按钮背景颜色"><span class="nav-number">26.</span> <span class="nav-text">26:按钮背景颜色</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#27：对象是否为空"><span class="nav-number">27.</span> <span class="nav-text">27：对象是否为空</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#28：键盘退出与隐藏"><span class="nav-number">28.</span> <span class="nav-text">28：键盘退出与隐藏</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#29：获取设备唯一ID"><span class="nav-number">29.</span> <span class="nav-text">29：获取设备唯一ID</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#30：MOV转Mp4"><span class="nav-number">30.</span> <span class="nav-text">30：MOV转Mp4</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#31-上传图片"><span class="nav-number">31.</span> <span class="nav-text">31:上传图片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#32：上传视频"><span class="nav-number">32.</span> <span class="nav-text">32：上传视频</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#上传MOV"><span class="nav-number">32.0.1.</span> <span class="nav-text">上传MOV</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#上传MP4"><span class="nav-number">32.0.2.</span> <span class="nav-text">上传MP4</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#33-获取视频帧图"><span class="nav-number">33.</span> <span class="nav-text">33:获取视频帧图</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#同步获取帧图"><span class="nav-number">33.0.1.</span> <span class="nav-text">同步获取帧图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#异步获取帧图"><span class="nav-number">33.0.2.</span> <span class="nav-text">异步获取帧图</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#34-压缩并导出视频"><span class="nav-number">34.</span> <span class="nav-text">34:压缩并导出视频</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#35-保存视频到相册"><span class="nav-number">35.</span> <span class="nav-text">35:保存视频到相册</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#36-获取当前最顶层的ViewController"><span class="nav-number">36.</span> <span class="nav-text">36:获取当前最顶层的ViewController</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#37-数组拆分"><span class="nav-number">37.</span> <span class="nav-text">37:数组拆分</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#38-图片压缩"><span class="nav-number">38.</span> <span class="nav-text">38.图片压缩</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#39-释放Timer宏"><span class="nav-number">39.</span> <span class="nav-text">39.释放Timer宏</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#获取某个view所在的控制器"><span class="nav-number">39.1.</span> <span class="nav-text">获取某个view所在的控制器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#两种方法删除NSUserDefaults所有记录"><span class="nav-number">39.2.</span> <span class="nav-text">两种方法删除NSUserDefaults所有记录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打印系统所有已注册的字体名称"><span class="nav-number">39.3.</span> <span class="nav-text">打印系统所有已注册的字体名称</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取图片某一点的颜色"><span class="nav-number">39.4.</span> <span class="nav-text">获取图片某一点的颜色</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串反转"><span class="nav-number">39.5.</span> <span class="nav-text">字符串反转</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#禁止锁屏，"><span class="nav-number">39.6.</span> <span class="nav-text">禁止锁屏，</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#模态推出透明界面"><span class="nav-number">39.7.</span> <span class="nav-text">模态推出透明界面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Xcode调试不显示内存占用"><span class="nav-number">39.8.</span> <span class="nav-text">Xcode调试不显示内存占用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#显示隐藏文件"><span class="nav-number">39.9.</span> <span class="nav-text">显示隐藏文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iOS跳转到App-Store下载应用评分"><span class="nav-number">39.10.</span> <span class="nav-text">iOS跳转到App Store下载应用评分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iOS-获取汉字的拼音"><span class="nav-number">39.11.</span> <span class="nav-text">iOS 获取汉字的拼音</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#手动更改iOS状态栏的颜色"><span class="nav-number">39.12.</span> <span class="nav-text">手动更改iOS状态栏的颜色</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#判断当前ViewController是push还是present的方式显示的"><span class="nav-number">39.13.</span> <span class="nav-text">判断当前ViewController是push还是present的方式显示的</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取实际使用的LaunchImage图片"><span class="nav-number">39.14.</span> <span class="nav-text">获取实际使用的LaunchImage图片</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iOS在当前屏幕获取第一响应"><span class="nav-number">39.15.</span> <span class="nav-text">iOS在当前屏幕获取第一响应</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#判断对象是否遵循了某协议"><span class="nav-number">39.16.</span> <span class="nav-text">判断对象是否遵循了某协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#判断view是不是指定视图的子视图"><span class="nav-number">39.17.</span> <span class="nav-text">判断view是不是指定视图的子视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NSArray-快速求总和-最大值-最小值-和-平均值"><span class="nav-number">39.18.</span> <span class="nav-text">NSArray 快速求总和 最大值 最小值 和 平均值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改UITextField中Placeholder的文字颜色"><span class="nav-number">39.19.</span> <span class="nav-text">修改UITextField中Placeholder的文字颜色</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关于NSDateFormatter的格式"><span class="nav-number">39.20.</span> <span class="nav-text">关于NSDateFormatter的格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取一个类的所有子类"><span class="nav-number">39.21.</span> <span class="nav-text">获取一个类的所有子类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#监测IOS设备是否设置了代理，需要CFNetwork-framework"><span class="nav-number">39.22.</span> <span class="nav-text">监测IOS设备是否设置了代理，需要CFNetwork.framework</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#阿拉伯数字转中文格式"><span class="nav-number">39.23.</span> <span class="nav-text">阿拉伯数字转中文格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Base64编码与NSString对象或NSData对象的转换"><span class="nav-number">39.24.</span> <span class="nav-text">Base64编码与NSString对象或NSData对象的转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#取消UICollectionView的隐式动画"><span class="nav-number">39.25.</span> <span class="nav-text">取消UICollectionView的隐式动画</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#下面几种方法都可以帮你去除这些动画"><span class="nav-number">39.26.</span> <span class="nav-text">下面几种方法都可以帮你去除这些动画</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#让Xcode的控制台支持LLDB类型的打印"><span class="nav-number">39.27.</span> <span class="nav-text">让Xcode的控制台支持LLDB类型的打印</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CocoaPods-pod-install-pod-update更新慢的问题"><span class="nav-number">39.28.</span> <span class="nav-text">CocoaPods pod install/pod update更新慢的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UIImage-占用内存大小"><span class="nav-number">39.29.</span> <span class="nav-text">UIImage 占用内存大小</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GCD-timer定时器"><span class="nav-number">39.30.</span> <span class="nav-text">GCD timer定时器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#图片上绘制文字-写一个UIImage的category"><span class="nav-number">39.31.</span> <span class="nav-text">图片上绘制文字 写一个UIImage的category</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查找一个视图的所有子视图"><span class="nav-number">39.32.</span> <span class="nav-text">查找一个视图的所有子视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#计算文件大小"><span class="nav-number">39.33.</span> <span class="nav-text">计算文件大小</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UIView设置部分圆角"><span class="nav-number">39.34.</span> <span class="nav-text">UIView设置部分圆角</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#取上整与取下整"><span class="nav-number">39.35.</span> <span class="nav-text">取上整与取下整</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#计算字符串字符长度，一个汉字算两个字符"><span class="nav-number">39.36.</span> <span class="nav-text">计算字符串字符长度，一个汉字算两个字符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#给UIView设置图片"><span class="nav-number">39.37.</span> <span class="nav-text">给UIView设置图片</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#防止scrollView手势覆盖侧滑手势"><span class="nav-number">39.38.</span> <span class="nav-text">防止scrollView手势覆盖侧滑手势</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#去掉导航栏返回的back标题"><span class="nav-number">39.39.</span> <span class="nav-text">去掉导航栏返回的back标题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串中是否含有中文"><span class="nav-number">39.40.</span> <span class="nav-text">字符串中是否含有中文</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dispatch-group的使用"><span class="nav-number">39.41.</span> <span class="nav-text">dispatch_group的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UITextField每四位加一个空格-实现代理"><span class="nav-number">39.42.</span> <span class="nav-text">UITextField每四位加一个空格,实现代理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取私有属性和成员变量-import"><span class="nav-number">39.43.</span> <span class="nav-text">获取私有属性和成员变量 #import</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取手机安装的应用"><span class="nav-number">39.44.</span> <span class="nav-text">获取手机安装的应用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#判断两个日期是否在同一周-写在NSDate的category里面"><span class="nav-number">39.45.</span> <span class="nav-text">判断两个日期是否在同一周 写在NSDate的category里面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#应用内打开系统设置界面"><span class="nav-number">39.46.</span> <span class="nav-text">应用内打开系统设置界面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#可选值如下："><span class="nav-number">39.47.</span> <span class="nav-text">可选值如下：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#屏蔽触发事件，2秒后取消屏蔽"><span class="nav-number">39.48.</span> <span class="nav-text">屏蔽触发事件，2秒后取消屏蔽</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#动画暂停再开始"><span class="nav-number">39.49.</span> <span class="nav-text">动画暂停再开始</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iOS中数字的格式化"><span class="nav-number">39.50.</span> <span class="nav-text">iOS中数字的格式化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如何获取WebView所有的图片地址，"><span class="nav-number">39.51.</span> <span class="nav-text">如何获取WebView所有的图片地址，</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取到webview的高度"><span class="nav-number">39.52.</span> <span class="nav-text">获取到webview的高度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#navigationBar变为纯透明"><span class="nav-number">39.53.</span> <span class="nav-text">navigationBar变为纯透明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tabBar同理"><span class="nav-number">39.54.</span> <span class="nav-text">tabBar同理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#navigationBar根据滑动距离的渐变色实现"><span class="nav-number">39.55.</span> <span class="nav-text">navigationBar根据滑动距离的渐变色实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iOS-开发中一些相关的路径"><span class="nav-number">39.56.</span> <span class="nav-text">iOS 开发中一些相关的路径</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#navigationItem的BarButtonItem如何紧靠屏幕右边界或者左边界？"><span class="nav-number">39.57.</span> <span class="nav-text">navigationItem的BarButtonItem如何紧靠屏幕右边界或者左边界？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NSString进行URL编码和解码"><span class="nav-number">39.58.</span> <span class="nav-text">NSString进行URL编码和解码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UIWebView设置User-Agent。"><span class="nav-number">39.59.</span> <span class="nav-text">UIWebView设置User-Agent。</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取硬盘总容量与可用容量"><span class="nav-number">39.60.</span> <span class="nav-text">获取硬盘总容量与可用容量:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取UIColor的RGBA值"><span class="nav-number">39.61.</span> <span class="nav-text">获取UIColor的RGBA值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改textField的placeholder的字体颜色、大小"><span class="nav-number">39.62.</span> <span class="nav-text">修改textField的placeholder的字体颜色、大小</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AFN移除JSON中的NSNull"><span class="nav-number">39.63.</span> <span class="nav-text">AFN移除JSON中的NSNull</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ceil-和floor"><span class="nav-number">39.64.</span> <span class="nav-text">ceil()和floor()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在webView加载完的代理方法里面这样写："><span class="nav-number">39.65.</span> <span class="nav-text">在webView加载完的代理方法里面这样写：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NSDateFormat最佳方式（strptime）"><span class="nav-number">39.66.</span> <span class="nav-text">NSDateFormat最佳方式（strptime）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#毛玻璃"><span class="nav-number">39.67.</span> <span class="nav-text">毛玻璃</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tableview下拉刷新停留（不滚到顶部），-类似QQ，微信拉去历史消息"><span class="nav-number">39.68.</span> <span class="nav-text">tableview下拉刷新停留（不滚到顶部）， 类似QQ，微信拉去历史消息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#KeyChain隐私信息存储（主要是密码类）"><span class="nav-number">39.69.</span> <span class="nav-text">KeyChain隐私信息存储（主要是密码类）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义圆角裁剪：搞性能"><span class="nav-number">39.70.</span> <span class="nav-text">自定义圆角裁剪：搞性能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#隐藏tabbar上面的虚线"><span class="nav-number">39.71.</span> <span class="nav-text">隐藏tabbar上面的虚线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#隐藏导航栏下面的虚线"><span class="nav-number">39.72.</span> <span class="nav-text">隐藏导航栏下面的虚线</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#方法一，世界使用背景图片与阴影"><span class="nav-number">39.72.0.0.1.</span> <span class="nav-text">#方法一，世界使用背景图片与阴影</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#方法二："><span class="nav-number">39.72.0.0.2.</span> <span class="nav-text">#方法二：</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改UIAlertController"><span class="nav-number">39.73.</span> <span class="nav-text">修改UIAlertController</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2014 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">杜鹏飞</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"dupengfei"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  













  
  

  

  

  

  


  

</body>
</html>
